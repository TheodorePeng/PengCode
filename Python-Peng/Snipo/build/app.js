/*! For license information please see app.js.LICENSE.txt */
(()=>{var e={591:(e,t,n)=>{var r=n(8).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new O(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return q()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,i),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m={};function h(){}function f(){}function y(){}var v={};u(v,s,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(E([])));b&&b!==n&&o.call(b,s)&&(v=b);var x=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,i,s,c){var l=d(e[a],e,i);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==r(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(p).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:q}}function q(){return{value:void 0,done:!0}}return f.prototype=y,u(x,"constructor",y),u(y,"constructor",f),f.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(p(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),u(x,l,"Generator"),u(x,s,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},8:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},757:(e,t,n)=>{var r=n(591)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},441:(e,t,n)=>{var r;!function(a,o,i){if(a){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},p={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)c[111+d]="f"+d;for(d=0;d<=9;++d)c[d+96]=d.toString();b.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},b.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},b.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(g(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);s=null},b.init=function(){var e=b(o);for(var t in e)"_"!==t.charAt(0)&&(b[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},b.init(),a.Mousetrap=b,e.exports&&(e.exports=b),void 0===(r=function(){return b}.call(t,n,t,e))||(e.exports=r)}function m(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function h(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function y(e,t,n){return n||(n=function(){if(!s)for(var e in s={},c)e>95&&e<112||c.hasOwnProperty(e)&&(s[c[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function v(e,t){var n,r,a,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),a=0;a<n.length;++a)r=n[a],p[r]&&(r=p[r]),t&&"keypress"!=t&&u[r]&&(r=u[r],o.push("shift")),f(r)&&o.push(r);return{key:r,modifiers:o,action:t=y(r,o,t)}}function g(e,t){return null!==e&&e!==o&&(e===t||g(e.parentNode,t))}function b(e){var t=this;if(e=e||o,!(t instanceof b))return new b(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},a=!1,i=!1,s=!1;function c(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function l(e,n,a,o,i,s){var c,l,u,p,d=[],m=a.type;if(!t._callbacks[e])return[];for("keyup"==m&&f(e)&&(n=[e]),c=0;c<t._callbacks[e].length;++c)if(l=t._callbacks[e][c],(o||!l.seq||r[l.seq]==l.level)&&m==l.action&&("keypress"==m&&!a.metaKey&&!a.ctrlKey||(u=n,p=l.modifiers,u.sort().join(",")===p.sort().join(",")))){var h=!o&&l.combo==i,y=o&&l.seq==o&&l.level==s;(h||y)&&t._callbacks[e].splice(c,1),d.push(l)}return d}function u(e,n,r,a){t.stopCallback(n,n.target||n.srcElement,r,a)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=h(e);n&&("keyup"!=e.type||a!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):a=!1)}function d(e,t,o,i){function l(t){return function(){s=t,++r[e],clearTimeout(n),n=setTimeout(c,1e3)}}function p(t){u(o,t,e),"keyup"!==i&&(a=h(t)),setTimeout(c,10)}r[e]=0;for(var d=0;d<t.length;++d){var m=d+1===t.length?p:l(i||v(t[d+1]).action);y(t[d],m,i,e,d)}}function y(e,n,r,a,o){t._directMap[e+":"+r]=n;var i,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?d(e,s,n,r):(i=v(e,r),t._callbacks[i.key]=t._callbacks[i.key]||[],l(i.key,i.modifiers,{type:i.action},a,e,o),t._callbacks[i.key][a?"unshift":"push"]({callback:n,modifiers:i.modifiers,action:i.action,seq:a,level:o,combo:e}))}t._handleKey=function(e,t,n){var r,a=l(e,t,n),o={},p=0,d=!1;for(r=0;r<a.length;++r)a[r].seq&&(p=Math.max(p,a[r].level));for(r=0;r<a.length;++r)if(a[r].seq){if(a[r].level!=p)continue;d=!0,o[a[r].seq]=1,u(a[r].callback,n,a[r].combo,a[r].seq)}else d||u(a[r].callback,n,a[r].combo);var m="keypress"==n.type&&i;n.type!=s||f(e)||m||c(o),i=d&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)y(e[r],t,n)},m(e,"keypress",p),m(e,"keydown",p),m(e,"keyup",p)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},277:(e,t)=>{!function(){var e={direction:"horizontal",snapToLines:!0,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center"},n=function(t){t||(t={"&amp":"&","&lt":"<","&gt":">","&lrm":"‎","&rlm":"‏","&nbsp":" "}),this.entities=t,this.parse=function(n,o){n=n.replace(/\0/g,"�");var i=Date.now(),s=0,c=n.split(/\r\n|\r|\n/),l=!1,u=[],p=[],d=[];function m(e,t){d.push({message:e,line:s+1,col:t})}var h=c[s],f=h.length,y="WEBVTT",v=0,g=y.length;for("\ufeff"===h[0]&&(v=1,g+=1),(f<g||h.indexOf(y)!==0+v||f>g&&" "!==h[g]&&"\t"!==h[g])&&m('No valid signature. (File needs to start with "WEBVTT".)'),s++;""!=c[s]&&null!=c[s];){if(m("No blank line after the signature."),-1!=c[s].indexOf("--\x3e")){l=!0;break}s++}for(;null!=c[s];){for(var b;!l&&""==c[s];)s++;if(!l&&null==c[s])break;b=Object.assign({},e,{id:"",startTime:0,endTime:0,pauseOnExit:!1,direction:"horizontal",snapToLines:!0,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center",text:"",tree:null});var x=!0;if(-1==c[s].indexOf("--\x3e")){if(b.id=c[s],/^NOTE($|[ \t])/.test(b.id)){for(s++;""!=c[s]&&null!=c[s];)-1!=c[s].indexOf("--\x3e")&&m("Cannot have timestamp in a comment."),s++;continue}if(/^STYLE($|[ \t])/.test(b.id)){var w=[],k=!1;for(s++;""!=c[s]&&null!=c[s];)-1!=c[s].indexOf("--\x3e")&&(m("Cannot have timestamp in a style block."),k=!0),w.push(c[s]),s++;if(p.length){m("Style blocks cannot appear after the first cue.");continue}k||u.push(w.join("\n"));continue}if(""==c[++s]||null==c[s]){m("Cue identifier cannot be standalone.");continue}if(-1==c[s].indexOf("--\x3e")){x=!1,m("Cue identifier needs to be followed by timestamp.");continue}}l=!1;var S=new r(c[s],m),_=0;if(p.length>0&&(_=p[p.length-1].startTime),!x||S.parse(b,_)){for(s++;""!=c[s]&&null!=c[s];){if(-1!=c[s].indexOf("--\x3e")){m("Blank line missing before cue."),l=!0;break}""!=b.text&&(b.text+="\n"),b.text+=c[s],s++}var T=new a(b.text,m,o,t);b.tree=T.parse(b.startTime,b.endTime),p.push(b)}else for(b=null,s++;""!=c[s]&&null!=c[s];){if(-1!=c[s].indexOf("--\x3e")){l=!0;break}s++}}return p.sort((function(e,t){return e.startTime<t.startTime?-1:e.startTime>t.startTime?1:e.endTime>t.endTime?-1:e.endTime<t.endTime?1:0})),{cues:p,errors:d,time:Date.now()-i,styles:u}}},r=function(e,t){var n=/[\u0020\t\f]/,r=/[^\u0020\t\f]/,a=(e=e,0),o=function(e){t(e,a+1)};function i(t){for(;null!=e[a]&&t.test(e[a]);)a++}function s(t){for(var n="";null!=e[a]&&t.test(e[a]);)n+=e[a],a++;return n}function c(){var t,n,r,i,c="minutes";if(null!=e[a])if(/\d/.test(e[a]))if(((t=s(/\d/)).length>2||parseInt(t,10)>59)&&(c="hours"),":"==e[a])if(a++,2==(n=s(/\d/)).length){if("hours"==c||":"==e[a]){if(":"!=e[a])return void o("No seconds found or minutes is greater than 59.");if(a++,2!=(r=s(/\d/)).length)return void o("Must be exactly two digits.")}else{if(2!=t.length)return void o("Must be exactly two digits.");r=n,n=t,t="0"}if("."==e[a])if(a++,3==(i=s(/\d/)).length)if(parseInt(n,10)>59)o("You cannot have more than 59 minutes.");else{if(!(parseInt(r,10)>59))return 60*parseInt(t,10)*60+60*parseInt(n,10)+parseInt(r,10)+parseInt(i,10)/1e3;o("You cannot have more than 59 seconds.")}else o("Milliseconds must be given in three digits.");else o('No decimal separator (".") found.')}else o("Must be exactly two digits.");else o("No time unit separator found.");else o("Timestamp must start with a character in the range 0-9.");else o("No timestamp found.")}this.parse=function(t,s){if(i(n),t.startTime=c(),null!=t.startTime)if(t.startTime<s&&o("Start timestamp is not greater than or equal to start timestamp of previous cue."),r.test(e[a])&&o("Timestamp not separated from '--\x3e' by whitespace."),i(n),"-"==e[a])if(a++,"-"==e[a])if(a++,">"==e[a]){if(a++,r.test(e[a])&&o("'--\x3e' not separated from timestamp by whitespace."),i(n),t.endTime=c(),null!=t.endTime)return t.endTime<=t.startTime&&o("End timestamp is not greater than start timestamp."),r.test(e[a])&&!1,i(n),function(e,t){for(var r=e.split(n),a=[],i=0;i<r.length;i++)if(""!=r[i]){var s=r[i].indexOf(":"),c=r[i].slice(0,s),l=r[i].slice(s+1);if(-1!=a.indexOf(c)&&o("Duplicate setting."),a.push(c),""==l)return void o("No value for setting defined.");if("vertical"==c){if("rl"!=l&&"lr"!=l){o("Writing direction can only be set to 'rl' or 'rl'.");continue}t.direction=l}else if("line"==c){if(/,/.test(l)){var u=l.split(",");l=u[0];var p=u[1]}if(!/^[-\d](\d*)(\.\d+)?%?$/.test(l)){o("Line position takes a number or percentage.");continue}if(-1!=l.indexOf("-",1)){o("Line position can only have '-' at the start.");continue}if(-1!=l.indexOf("%")&&l.indexOf("%")!=l.length-1){o("Line position can only have '%' at the end.");continue}if("-"==l[0]&&"%"==l[l.length-1]){o("Line position cannot be a negative percentage.");continue}var d=l,m=!1;if("%"==l[l.length-1]&&(m=!0,d=l.slice(0,l.length-1),parseInt(l,10)>100)){o("Line position cannot be >100%.");continue}if(""===d||isNaN(d)||!isFinite(d)){o("Line position needs to be a number");continue}if(void 0!==p){if(!["start","center","end"].includes(p)){o("Line alignment needs to be one of start, center or end");continue}t.lineAlign=p}t.snapToLines=!m,t.linePosition=parseFloat(d),parseFloat(d).toString()!==d&&(t.nonSerializable=!0)}else if("position"==c){if(/,/.test(l)){u=l.split(","),l=u[0];var h=u[1]}if("%"!=l[l.length-1]){o("Text position must be a percentage.");continue}if(parseInt(l,10)>100||parseInt(l,10)<0){o("Text position needs to be between 0 and 100%.");continue}if(""===(d=l.slice(0,l.length-1))||isNaN(d)||!isFinite(d)){o("Line position needs to be a number");continue}if(void 0!==h){if(!["line-left","center","line-right"].includes(h)){o("Position alignment needs to be one of line-left, center or line-right");continue}t.positionAlign=h}t.textPosition=parseFloat(d)}else if("size"==c){if("%"!=l[l.length-1]){o("Size must be a percentage.");continue}if(parseInt(l,10)>100){o("Size cannot be >100%.");continue}var f=l.slice(0,l.length-1);if(void 0===f||""===f||isNaN(f)){o("Size needs to be a number"),f=100;continue}if((f=parseFloat(f))<0||f>100){o("Size needs to be between 0 and 100%.");continue}t.size=f}else if("align"==c){var y=["start","center","end","left","right"];if(-1==y.indexOf(l)){o("Alignment can only be set to one of "+y.join(", ")+".");continue}t.alignment=l}else o("Invalid setting.")}}(e.substring(a),t),!0}else o("No valid timestamp separator found.");else o("No valid timestamp separator found.");else o("No valid timestamp separator found.")},this.parseTimestamp=function(){var t=c();if(null==e[a])return t;o("Timestamp must not have trailing characters.")}},a=function(e,t,n,a){this.entities=a;var o=this,i=(e=e,0),s=function(e){"metadata"!=n&&t(e,i+1)};function c(){for(var t="data",n="",r="",c=[];null!=e[i-1]||0==i;){var l=e[i];if("data"==t)if("&"==l)r=l,t="escape";else if("<"==l&&""==n)t="tag";else{if("<"==l||null==l)return["text",n];n+=l}else if("escape"==t){if("<"==l||null==l){let e;return s("Incorrect escape."),(e=r.match(/^&#([0-9]+)$/))?n+=String.fromCharCode(e[1]):o.entities[r]?n+=o.entities[r]:n+=r,["text",n]}if("&"==l)s("Incorrect escape."),n+=r,r=l;else if(/[a-z#0-9]/i.test(l))r+=l;else if(";"==l){let e;(e=r.match(/^&#(x?[0-9]+)$/))?n+=String.fromCharCode("0"+e[1]):o.entities[r+l]?n+=o.entities[r+l]:(e=Object.keys(a).find((e=>r.startsWith(e))))?n+=o.entities[e]+r.slice(e.length)+l:(s("Incorrect escape."),n+=r+";"),t="data"}else s("Incorrect escape."),n+=r+l,t="data"}else if("tag"==t)if("\t"==l||"\n"==l||"\f"==l||" "==l)t="start tag annotation";else if("."==l)t="start tag class";else if("/"==l)t="end tag";else if(/\d/.test(l))n=l,t="timestamp tag";else{if(">"==l||null==l)return">"==l&&i++,["start tag","",[],""];n=l,t="start tag"}else if("start tag"==t)if("\t"==l||"\f"==l||" "==l)t="start tag annotation";else if("\n"==l)r=l,t="start tag annotation";else if("."==l)t="start tag class";else{if(">"==l||null==l)return">"==l&&i++,["start tag",n,[],""];n+=l}else if("start tag class"==t)if("\t"==l||"\f"==l||" "==l)r&&c.push(r),r="",t="start tag annotation";else if("\n"==l)r&&c.push(r),r=l,t="start tag annotation";else if("."==l)r&&c.push(r),r="";else{if(">"==l||null==l)return">"==l&&i++,r&&c.push(r),["start tag",n,c,""];r+=l}else if("start tag annotation"==t){if(">"==l||null==l)return">"==l&&i++,["start tag",n,c,r=r.split(/[\u0020\t\f\r\n]+/).filter((function(e){if(e)return!0})).join(" ")];r+=l}else if("end tag"==t){if(">"==l||null==l)return">"==l&&i++,["end tag",n];n+=l}else if("timestamp tag"==t){if(">"==l||null==l)return">"==l&&i++,["timestamp",n];n+=l}else s("Never happens.");i++}}this.parse=function(t,a){var o={children:[]},l=o,u=[];function p(e){l.children.push({type:"object",name:e[1],classes:e[2],children:[],parent:l}),l=l.children[l.children.length-1]}function d(e){for(var t=l;t;){if(t.name==e)return!0;t=t.parent}}for(;null!=e[i];){var m=c();if("text"==m[0])l.children.push({type:"text",value:m[1],parent:l});else if("start tag"==m[0]){"chapters"==n&&s("Start tags not allowed in chapter title text.");var h=m[1];"v"!=h&&"lang"!=h&&""!=m[3]&&s("Only <v> and <lang> can have an annotation."),"c"==h||"i"==h||"b"==h||"u"==h||"ruby"==h||"rt"==h&&"ruby"==l.name?p(m):"v"==h?(d("v")&&s("<v> cannot be nested inside itself."),p(m),l.value=m[3],m[3]||s("<v> requires an annotation.")):"lang"==h?(p(m),l.value=m[3]):s("Incorrect start tag.")}else if("end tag"==m[0])"chapters"==n&&s("End tags not allowed in chapter title text."),m[1]==l.name?l=l.parent:"ruby"==m[1]&&"rt"==l.name?l=l.parent.parent:s("Incorrect end tag.");else if("timestamp"==m[0]){"chapters"==n&&s("Timestamp not allowed in chapter title text.");var f=new r(m[1],s).parseTimestamp();null!=f&&((f<=t||f>=a)&&s("Timestamp must be between start timestamp and end timestamp."),u.length>0&&u[u.length-1]>=f&&s("Timestamp must be greater than any previous timestamp."),l.children.push({type:"timestamp",value:f,parent:l}),u.push(f))}}for(;l.parent;)"v"!=l.name&&s("Required end tag missing."),l=l.parent;return function e(t){const n={...t};return t.children&&(n.children=t.children.map(e)),n.parent&&delete n.parent,n}(o)}},o=function(){function t(e){const t=("00"+1e3*(e-Math.floor(e)).toFixed(3)).slice(-3);let n=0,r=0,a=0;return e>=3600&&(n=Math.floor(e/3600)),r=Math.floor((e-3600*n)/60),a=Math.floor(e-3600*n-60*r),(n?n+":":"")+(""+r).padStart(2,"0")+":"+(""+a).padStart(2,"0")+"."+t}function n(e){for(var r="",a=0;a<e.length;a++){var o=e[a];if("text"==o.type)r+=o.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");else if("object"==o.type){if(r+="<"+o.name,o.classes)for(var i=0;i<o.classes.length;i++)r+="."+o.classes[i];o.value&&(r+=" "+o.value),r+=">",o.children&&(r+=n(o.children)),r+="</"+o.name+">"}else"timestamp"==o.type?r+="<"+t(o.value)+">":r+="<"+o.value+">"}return r}function r(r){return(void 0!==r.id?r.id+"\n":"")+t(r.startTime)+" --\x3e "+t(r.endTime)+function(t){var n="";const r=Object.keys(e).filter((n=>t[n]!==e[n]));return r.includes("direction")&&(n+=" vertical:"+t.direction),r.includes("alignment")&&(n+=" align:"+t.alignment),r.includes("size")&&(n+=" size:"+t.size+"%"),(r.includes("lineAlign")||r.includes("linePosition"))&&(n+=" line:"+t.linePosition+(t.snapToLines?"":"%")+(t.lineAlign&&t.lineAlign!=e.lineAlign?","+t.lineAlign:"")),(r.includes("textPosition")||r.includes("positionAlign"))&&(n+=" position:"+t.textPosition+"%"+(t.positionAlign&&t.positionAlign!==e.positionAlign?","+t.positionAlign:"")),n}(r)+"\n"+n(r.tree.children)+"\n\n"}this.serialize=function(e,t){var n="WEBVTT\n\n";if(t)for(var a=0;a<t.length;a++)n+="STYLE\n"+t[a]+"\n\n";for(a=0;a<e.length;a++)n+=r(e[a]);return n}};function i(e){e.WebVTTParser=n,e.WebVTTCueTimingsAndSettingsParser=r,e.WebVTTCueTextParser=a,e.WebVTTSerializer=o}"undefined"!=typeof window&&i(window),i(t)}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=t.apply(n,r);function s(t){e(i,a,o,s,c,"next",t)}function c(t){e(i,a,o,s,c,"throw",t)}s(void 0)}))}}var r=n(757),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i="https://api.snipo.io",s="https://oauth.snipo.io";function c(e){return l.apply(this,arguments)}function l(){return(l=t(a().mark((function e(t){var n,r,o,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,(r=new Headers).append("Authorization","Bearer "+n),r.append("Content-Type","application/json"),o=JSON.stringify(t),s={method:"POST",headers:r,body:o,redirect:"follow"},c="".concat(i,"/notion/youtube/action"),e.next=14,fetch(c,s);case 14:if(401!==(l=e.sent).status){e.next=17;break}return e.abrupt("return",{error:"auth"});case 17:if(200===l.status){e.next=20;break}return console.error("url: ".concat(c,", requestBody: ").concat(o,",  response: ").concat(l.status)),e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 20:return e.next=22,l.json();case 22:return e.abrupt("return",e.sent);case 25:return e.prev=25,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 29:case"end":return e.stop()}}),e,null,[[5,25]])})))).apply(this,arguments)}function u(e,t){return p.apply(this,arguments)}function p(){return p=t(a().mark((function e(t,n){var r,o,s,c,l,u,p,d,m,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:"youtube",o=h.length>3&&void 0!==h[3]?h[3]:0,e.next=4,z();case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,(c=new Headers).append("Authorization","Bearer "+s),c.append("Content-Type","application/json"),l=JSON.stringify({playlistData:t,dataVideo:n,batch:o}),u={method:"POST",headers:c,body:l,redirect:"follow"},p="".concat(i,"/notion/").concat(r,"/playlist"),e.next=16,fetch(p,u);case 16:if(401!==(d=e.sent).status){e.next=19;break}return e.abrupt("return",{error:"auth"});case 19:if(200===d.status){e.next=27;break}return console.error("url: ".concat(p,", requestBody: ").concat(l,",  response: ").concat(d.status)),e.next=23,d.json();case 23:if(!("desc"in(m=e.sent))){e.next=26;break}return e.abrupt("return",{error:"Something wrong! The error description: "+m.desc});case 26:return e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 27:return e.next=29,d.json();case 29:return e.abrupt("return",e.sent);case 32:return e.prev=32,e.t0=e.catch(7),console.error(e.t0),e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 36:case"end":return e.stop()}}),e,null,[[7,32]])}))),p.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return(m=t(a().mark((function e(t){var n,r,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new Headers).append("Authorization","Bearer "+t),n.append("Content-Type","application/json"),r={method:"GET",headers:n,redirect:"follow"},o="".concat(i,"/user"),e.next=8,fetch(o,r);case 8:if(401!==(s=e.sent).status){e.next=11;break}return e.abrupt("return",{error:"auth"});case 11:if(200===s.status){e.next=19;break}return console.error("url: ".concat(o,", requestBody: ").concat(body,",  response: ").concat(s.status)),e.next=15,s.json();case 15:if(!("desc"in(c=e.sent))){e.next=18;break}return e.abrupt("return",{error:"Something wrong! The error description: "+c.desc});case 18:return e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 19:return e.next=21,s.json();case 21:return e.abrupt("return",e.sent);case 24:return e.prev=24,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=t(a().mark((function e(t){var n,r,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new Headers).append("Authorization","Bearer "+t),n.append("Content-Type","application/json"),r={method:"GET",headers:n,redirect:"follow"},o="".concat(i,"/ext-settings"),e.next=8,fetch(o,r);case 8:if(403!==(s=e.sent).status){e.next=16;break}return e.next=12,s.json();case 12:if(!(c=e.sent).provider){e.next=15;break}return e.abrupt("return",{buttons:[],provider:c.provider});case 15:return e.abrupt("return",{buttons:[],email:c.email});case 16:if(200===s.status){e.next=18;break}return e.abrupt("return",{buttons:[]});case 18:return e.next=20,s.json();case 20:return e.abrupt("return",e.sent);case 23:return e.prev=23,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 27:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}function y(){return v.apply(this,arguments)}function v(){return(v=t(a().mark((function e(){var t,n,r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new Headers).append("Content-Type","application/json"),n={method:"GET",headers:t,credentials:"include",redirect:"follow"},r="".concat(s,"/refresh-token"),e.next=7,fetch(r,n);case 7:if(200===(o=e.sent).status){e.next=11;break}return console.error("url: ".concat(r,", response: ").concat(o.status)),e.abrupt("return","");case 11:return e.next=13,o.json();case 13:if(!("token"in(i=e.sent))){e.next=16;break}return e.abrupt("return",i.token);case 16:return e.abrupt("return","");case 19:return e.prev=19,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return","");case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function g(e,t){return b.apply(this,arguments)}function b(){return(b=t(a().mark((function e(t,n){var r,o,i,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return"https://api.snipo.io",e.prev=6,(o=new Headers).append("Authorization","Bearer "+r),o.append("Content-Type","application/json"),i=JSON.stringify(t),s={method:"POST",headers:o,body:i,redirect:"follow"},c="".concat("https://api.snipo.io","/notion/").concat(n,"/action"),e.next=15,fetch(c,s);case 15:if(401!==(l=e.sent).status){e.next=18;break}return e.abrupt("return",{error:"auth"});case 18:if(200===l.status){e.next=21;break}return console.error("url: ".concat(c,", requestBody: ").concat(i,",  response: ").concat(l.status)),e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 21:return e.next=23,l.json();case 23:return e.abrupt("return",e.sent);case 26:return e.prev=26,e.t0=e.catch(6),console.error(e.t0),e.abrupt("return",{error:"Something wrong! Support email: hello@snipo.io"});case 30:case"end":return e.stop()}}),e,null,[[6,26]])})))).apply(this,arguments)}function x(e){return w.apply(this,arguments)}function w(){return(w=t(a().mark((function e(t){var n,r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new TextEncoder).encode(t),e.next=3,crypto.subtle.digest("SHA-1",n);case 3:return r=e.sent,o=Array.from(new Uint8Array(r)),i=o.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document;null!==t&&null!==e&&(Element.prototype.matches||(Element.prototype.webkitMatchesSelector?Element.prototype.matches=Element.prototype.webkitMatchesSelector:Element.prototype.mozMatchesSelector?Element.prototype.matches=Element.prototype.mozMatchesSelector:Element.prototype.msMatchesSelector&&(Element.prototype.matches=Element.prototype.msMatchesSelector)),r.addEventListener(e,(function(e){for(var r,a=e.target;a&&a.matches&&!(r=a.matches(t));)a=a.parentElement;r&&n.apply(a,[e])})))}function _(e){var t=function(e,t){return("000"+e).slice(-1*t)},n=parseFloat(e).toFixed(3),r=Math.floor(n/60/60),a=Math.floor(n/60)%60,o=Math.floor(n-60*a);return 0!==r?(r>=10?r:t(r,1))+":"+(a>=10?a:t(a,2))+":"+t(o,2):0!==a?(a>=10?a:t(a,1))+":"+t(o,2):"0:"+t(o,2)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}function O(){switch(!0){case navigator.userAgent.indexOf("OPR/")>=0:return"opera";case E():return"brave";case navigator.userAgent.indexOf("YaBrowser/")>=0:return"yandex";case q():return"edge";case I():return"safari";case R():return"firefox";default:return"chrome"}}function E(){return!!navigator.brave}function q(){return navigator.userAgent.indexOf("Edg/")>=0||navigator.userAgent.indexOf("Edge/")>=0}function R(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function I(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function A(){switch(!0){case q():return"https://bit.ly/3RloKk7";case R():case I():default:return"https://bit.ly/3BPpZ5d"}}function P(e){if("/build/snipo.js"===e&&I()){var t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.text='!function(){try{let t=window.fetch;window.fetch=function(){return 0===arguments.length||"/api/v3/createOauthAuthorizationCode"===arguments[0]&&(document.querySelector("html").dataset.snipo=arguments[1].body),t.apply(this,arguments)}}catch(e){console.log(e)}}();',void(document.head||document.documentElement).appendChild(t)}var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=chrome.runtime.getURL(e),(document.head||document.documentElement).appendChild(n)}function L(){app.analytics.track("open_cource",{type:location.host})}function C(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString());var o=e+"="+(t=encodeURIComponent(t));for(var i in n){o+="; "+i;var s=n[i];!0!==s&&(o+="="+s)}document.cookie=o}function j(e,t){return M.apply(this,arguments)}function M(){return M=t(a().mark((function e(n,r){var i,s,c,l,u,p,d,m,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=h.length>2&&void 0!==h[2]?h[2]:0,document.body.appendChild(r),s=document.querySelectorAll(".snipo-promo .snipo-close-popup"),c="snipo"+n,l=0;l<s.length;l++)s[l].addEventListener("click",function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.parentNode.classList.remove("on"),t.preventDefault(),app.analytics.track("popup_"+n+"_close"),e.next=5,G(o({},n,!0));case 5:C(c,1,{expires:31536e3,path:"/"});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}());for(u=document.querySelectorAll(".snipo-promo .snipo-promo-link"),p=0;p<u.length;p++)u[p].addEventListener("click",function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.dataset.href){e.next=13;break}if(app.analytics.track("popup_"+n+"_open"),!this.dataset.rating){e.next=7;break}return app.analytics.track("rating",{type:this.dataset.rating}),e.next=7,G({rating:this.dataset.rating});case 7:if("BF"!=this.dataset.href){e.next=12;break}return e.next=10,J({cmd:"open-premium-popup-bf"});case 10:e.next=13;break;case 12:window.open(this.dataset.href,"_blank");case 13:return e.next=15,G(o({},n,!0));case 15:C(c,1,{expires:31536e3,path:"/"}),document.querySelector(".snipo-promo").classList.remove("on");case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}());if(0==i){e.next=15;break}if(d=c+"_limit",m=parseInt(k(d)||0)+1,C(d,m,{expires:31536e3,path:"/"}),!(m>=i)){e.next=15;break}return e.next=14,G(o({},n,!0));case 14:C(c,1,{expires:31536e3,path:"/"});case 15:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function N(e){return D.apply(this,arguments)}function D(){return(D=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.storage.local.get(t,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return U.apply(this,arguments)}function U(){return(U=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.storage.local.remove(t,(function(){e()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return B.apply(this,arguments)}function B(){return(B=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.storage.sync.get(t,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),r=JSON.parse(n).exp;return Date.now()>=1e3*r-12e4}function z(){return F.apply(this,arguments)}function F(){return(F=t(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(["notion_auth_token","auth_token"]);case 2:if(!(t=e.sent).auth_token){e.next=14;break}if(Z(t.auth_token)){e.next=7;break}return e.abrupt("return",t.auth_token);case 7:return e.next=9,y();case 9:if(!(n=e.sent)){e.next=13;break}return e.next=13,G({auth_token:n});case 13:return e.abrupt("return",n);case 14:if(!t.notion_auth_token){e.next=16;break}return e.abrupt("return",t.notion_auth_token);case 16:return e.abrupt("return","");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return W.apply(this,arguments)}function W(){return(W=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.storage.sync.set(t,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return Q.apply(this,arguments)}function Q(){return(Q=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.runtime.sendMessage(t,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){var t=document.querySelector(".snipo-speed");if(!t){(t=document.createElement("div")).style.cssText="\n\t\tposition: absolute;\n\t\tdisplay: none;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: white;\n\t\tfont-size: 100px;\n\t\tfont-family: sans-serif;\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tz-index: 9999;\n\t";var n=document.createElement("div");t.appendChild(n),t.classList.add("snipo-speed"),document.body.appendChild(t)}var r=t.querySelector("div"),a=e.getBoundingClientRect(),o=e.playbackRate;r.textContent="".concat(e.playbackRate,"x"),t.style.display="flex",t.dataset.snipoPlayback="".concat(e.playbackRate,"x"),t.style.left="".concat(a.left,"px"),t.style.top="".concat(a.top,"px"),t.style.width="".concat(a.width,"px"),t.style.height="".concat(a.height,"px"),setTimeout((function(){document.querySelector('.snipo-speed[data-snipo-playback="'.concat(o,'x"]')).style.display="none"}),1e3)}function Y(e){var t=document.querySelector(".snipo-recording");if(!t){(t=document.createElement("div")).style.cssText="\n\t\tposition: absolute;\n\t\tcolor: white;\n\t\tfont-family: sans-serif;\n\t\tbackground: rgba(0, 0, 0, 0.6);\n\t\tright: 40px;\n\t\ttop: 80px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: white;\n\t\tdisplay: block;\n\t\twidth: 76px;\n\t";var n=document.createElement("div");t.appendChild(n),t.classList.add("snipo-recording"),document.body.appendChild(t)}var r=t.querySelector("div"),a=e.getBoundingClientRect();return r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" style="margin: 14px"><path fill="currentColor" d="M12.5 5A7.5 7.5 0 0 0 5 12.5a7.5 7.5 0 0 0 7.5 7.5a7.5 7.5 0 0 0 7.5-7.5A7.5 7.5 0 0 0 12.5 5M7 10h2a1 1 0 0 1 1 1v1c0 .5-.38.9-.86.97L10.31 15H9.15L8 13v2H7m5-5h2v1h-2v1h2v1h-2v1h2v1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1m4 0h2v1h-2v3h2v1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1m-8 1v1h1v-1"></path></svg><span class="snipo-record-time" data-time="0" style="float: right; font-size: 18px; margin: 0 1px">0s / 60s </span>',t.style.display="flex",t.style.right="".concat(a.left,"px"),t.style.top="".concat(a.top,"px"),setInterval((function(){parseInt(document.querySelector(".snipo-record-time").dataset.time)<60&&(document.querySelector(".snipo-record-time").textContent=parseInt(document.querySelector(".snipo-record-time").dataset.time)+1+"s / 60s "),60===parseInt(document.querySelector(".snipo-record-time").dataset.time)&&chrome.storage.local.set({action:{cmd:"clip"}}),document.querySelector(".snipo-record-time").dataset.time=parseInt(document.querySelector(".snipo-record-time").dataset.time)+1,"currentColor"===document.querySelector(".snipo-recording svg path").getAttribute("fill")?document.querySelector(".snipo-recording svg path").setAttribute("fill","grey"):document.querySelector(".snipo-recording svg path").setAttribute("fill","currentColor")}),1e3)}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(e||"").split(":"),n=0;return 3===t.length?""+(60*parseInt(t[0]+"")*60+60*parseInt(t[1]+"")+parseInt(t[2]+"")):2===t.length?""+(60*parseInt(t[0]+"")+parseInt(t[1]+"")):1===t.length?""+parseInt(t[0]+""):""+n}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){var n=document.createElement("div");if(n.innerHTML=t,n.classList.add("snipo-open-notion"),e){for(var r=document.querySelectorAll(".snipo-open-notion"),a=0;a<r.length;a++)r[a].remove();e.appendChild(n)}}function ne(e){(e=ee(e)).forEach(function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.dataset.snipoInit){e.next=2;break}return e.abrupt("return");case 2:t.dataset.snipoInit=!0,t.addEventListener("play",(function(){chrome.storage.local.set({cmdRes:{video_paused:!1}})})),t.addEventListener("pause",(function(){chrome.storage.local.set({cmdRes:{video_paused:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function re(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){return ce.apply(this,arguments)}function ce(){return ce=t(a().mark((function e(t){var n,r,o,i,s,c,l,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"",r=u.length>2&&void 0!==u[2]?u[2]:ytcfg.INNERTUBE_CONTEXT_HL,o=u.length>3&&void 0!==u[3]?u[3]:"",i=Math.floor((new Date).getTime()/1e3),s=void 0===k("SAPISID")?k("__Secure-3PAPISID"):k("SAPISID"),e.next=7,x(i+" "+s+" https://www.youtube.com");case 7:return c=e.sent,l={},""!==ytcfg.DELEGATED_SESSION_ID&&(l["x-goog-pageid"]=ytcfg.DELEGATED_SESSION_ID),e.abrupt("return",fetch("https://www.youtube.com/youtubei/v1/browse?key=".concat(ytcfg.INNERTUBE_API_KEY),{credentials:"include",headers:ie(ie({},l),{},{accept:"*/*","accept-language":ytcfg.accept_language,"cache-control":"no-cache",pragma:"no-cache",authorization:"SAPISIDHASH "+i+"_"+c,"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-goog-authuser":ytcfg.SESSION_INDEX,"x-goog-visitor-id":ytcfg.visitorData,"x-spf-previous":"https://www.youtube.com/","x-spf-referer":"https://www.youtube.com/","x-youtube-client-name":ytcfg.INNERTUBE_CONTEXT_CLIENT_NAME,"x-youtube-client-version":ytcfg.INNERTUBE_CONTEXT_CLIENT_VERSION,"x-youtube-device":ytcfg.DEVICE,"x-youtube-identity-token":ytcfg.ID_TOKEN,"x-youtube-page-cl":ytcfg.PAGE_CL,"x-youtube-page-label":ytcfg.PAGE_BUILD_LABEL}),referrer:"https://www.youtube.com/",referrerPolicy:"origin-when-cross-origin",body:"{".concat(o?'"continuation":"'+o+'",':"",'"context":{"client":{"clientName":"').concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_NAME,'","hl":"').concat(r,'","gl":"').concat(ytcfg.INNERTUBE_CONTEXT_GL,'","clientVersion":"').concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_VERSION,'"},"request":{"internalExperimentFlags":[],"consistencyTokenJars":[]}},"browseId":"').concat(t,'","params":"').concat(n,'"}'),method:"POST",mode:"cors"}));case 11:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function le(e){return ue.apply(this,arguments)}function ue(){return(ue=t(a().mark((function e(t){var n,r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.floor((new Date).getTime()/1e3),r=void 0===k("SAPISID")?k("__Secure-3PAPISID"):k("SAPISID"),e.next=4,x(n+" "+r+" https://www.youtube.com");case 4:return o=e.sent,i="https://www.youtube.com/youtubei/v1/next?key=".concat(ytcfg.INNERTUBE_API_KEY),s={credentials:"include",headers:{accept:"*/*","content-type":"application/json","accept-language":ytcfg.accept_language,"cache-control":"no-cache",authorization:"SAPISIDHASH "+n+"_"+o,pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-goog-authuser":ytcfg.SESSION_INDEX,"x-goog-visitor-id":ytcfg.visitorData,"x-origin":"https://www.youtube.com"},referrer:"https://www.youtube.com/",referrerPolicy:"origin-when-cross-origin",body:'{"context":{"client":{"clientName":"'.concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_NAME,'","hl":"').concat(ytcfg.INNERTUBE_CONTEXT_HL,'","gl":"').concat(ytcfg.INNERTUBE_CONTEXT_GL,'","clientVersion":"').concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_VERSION,'"},').concat(""!==ytcfg.DELEGATED_SESSION_ID?'"user":{"onBehalfOfUser":"'+ytcfg.DELEGATED_SESSION_ID+'"},':"",'"request":{"internalExperimentFlags":[],"consistencyTokenJars":[]}},"videoId":"').concat(t,'"}'),method:"POST",mode:"cors"},e.abrupt("return",fetch(i,s));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return de.apply(this,arguments)}function de(){return(de=t(a().mark((function e(){var t,n,r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://www.youtube.com/youtubei/v1/get_transcript?key=".concat(ytcfg.INNERTUBE_API_KEY,"&prettyPrint=false"),n=Math.floor((new Date).getTime()/1e3),r=void 0===k("SAPISID")?k("__Secure-3PAPISID"):k("SAPISID"),e.next=5,x(n+" "+r+" https://www.youtube.com");case 5:return o=e.sent,i={credentials:"include",referrer:"https://www.youtube.com/",referrerPolicy:"origin-when-cross-origin",headers:{accept:"*/*","content-type":"application/json","accept-language":ytcfg.accept_language,"cache-control":"no-cache",authorization:"SAPISIDHASH "+n+"_"+o,pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-goog-authuser":ytcfg.SESSION_INDEX,"x-goog-visitor-id":ytcfg.visitorData,"x-origin":"https://www.youtube.com"},body:'{"context":{"client":{"clientName":"'.concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_NAME,'","hl":"').concat(ytcfg.INNERTUBE_CONTEXT_HL,'","gl":"').concat(ytcfg.INNERTUBE_CONTEXT_GL,'","clientVersion":"').concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_VERSION,'"},').concat(""!==ytcfg.DELEGATED_SESSION_ID?'"user":{"onBehalfOfUser":"'+ytcfg.DELEGATED_SESSION_ID+'"},':"",'"request":{"internalExperimentFlags":[],"consistencyTokenJars":[]}},"params":"').concat(activeTranscriptApiParams,'"}'),method:"POST",mode:"cors"},e.abrupt("return",fetch(t,i));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){return he.apply(this,arguments)}function he(){return(he=t(a().mark((function e(t,n){var r,o,i,s,c,l,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n<5e3&&(n=5e3),n>6e4&&(n=6e4),r="https://www.youtube.com/youtubei/v1/backstage/create_post?key=".concat(ytcfg.INNERTUBE_API_KEY,"&prettyPrint=false"),o=Math.floor((new Date).getTime()/1e3),i=void 0===k("SAPISID")?k("__Secure-3PAPISID"):k("SAPISID"),e.next=7,x(o+" "+i+" https://www.youtube.com");case 7:return s=e.sent,c=new URL(location.href).searchParams,l=c.get("v")||"",u={credentials:"include",referrer:"https://www.youtube.com/",referrerPolicy:"origin-when-cross-origin",headers:{accept:"*/*","content-type":"application/json","accept-language":ytcfg.accept_language,"cache-control":"no-cache",authorization:"SAPISIDHASH "+o+"_"+s,pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-goog-authuser":ytcfg.SESSION_INDEX,"x-goog-visitor-id":ytcfg.visitorData,"x-origin":"https://www.youtube.com"},body:'{"context":{"client":{"clientName":"'.concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_NAME,'","hl":"').concat(ytcfg.INNERTUBE_CONTEXT_HL,'","gl":"').concat(ytcfg.INNERTUBE_CONTEXT_GL,'","clientVersion":"').concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_VERSION,'"},').concat(""!==ytcfg.DELEGATED_SESSION_ID?'"user":{"onBehalfOfUser":"'+ytcfg.DELEGATED_SESSION_ID+'"},':"",'"request":{"internalExperimentFlags":[],"consistencyTokenJars":[]}},"createBackstagePostParams":"').concat(activeCreateBackstagePostParams,'","commentText":"Snipo clip","clipAttachment":{"externalVideoId":"').concat(l,'","offsetMs":"').concat(t,'","durationMs":"').concat(n,'"}}'),method:"POST",mode:"cors"},e.abrupt("return",fetch(r,u));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return ye.apply(this,arguments)}function ye(){return(ye=t(a().mark((function e(t){var n,r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://www.youtube.com/youtubei/v1/share/get_share_panel?key=".concat(ytcfg.INNERTUBE_API_KEY,"&prettyPrint=false"),r=Math.floor((new Date).getTime()/1e3),o=void 0===k("SAPISID")?k("__Secure-3PAPISID"):k("SAPISID"),e.next=5,x(r+" "+o+" https://www.youtube.com");case 5:return i=e.sent,s={credentials:"include",referrer:"https://www.youtube.com/",referrerPolicy:"origin-when-cross-origin",headers:{accept:"*/*","content-type":"application/json","accept-language":ytcfg.accept_language,"cache-control":"no-cache",authorization:"SAPISIDHASH "+r+"_"+i,pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-goog-authuser":ytcfg.SESSION_INDEX,"x-goog-visitor-id":ytcfg.visitorData,"x-origin":"https://www.youtube.com"},body:'{"context":{"client":{"clientName":"'.concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_NAME,'","hl":"').concat(ytcfg.INNERTUBE_CONTEXT_HL,'","gl":"').concat(ytcfg.INNERTUBE_CONTEXT_GL,'","clientVersion":"').concat(ytcfg.INNERTUBE_CONTEXT_CLIENT_VERSION,'"},').concat(""!==ytcfg.DELEGATED_SESSION_ID?'"user":{"onBehalfOfUser":"'+ytcfg.DELEGATED_SESSION_ID+'"},':"",'"request":{"internalExperimentFlags":[],"consistencyTokenJars":[]}},"serializedSharedEntity":"').concat(t,'"}'),method:"POST",mode:"cors"},e.abrupt("return",fetch(n,s));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){var e=window.location.href.match(/watch\?/),n=window.location.href.match(/playlist\?/);if(e||n){for(var r=document.querySelectorAll(".snipo-open-notion"),o=0;o<r.length;o++)r[o].remove();var i=document.querySelectorAll('[role="main"] h1.title yt-formatted-string, [role="main"] h1.ytd-watch-metadata yt-formatted-string');(i=ee(i)).forEach(function(){var e=t(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=document.createElement("div")).innerHTML='<div style="display: none; justify-content: center; align-items: center;" class="style-scope ytd-item-section-renderer"> <div style="display: inline-block; position: relative; width: 20px; height: 20px; --paper-spinner-container-rotation-duration: 1568ms; --paper-spinner-expand-contract-duration: 1333ms; --paper-spinner-full-cycle-duration: 5332ms; --paper-spinner-cooldown-duration: 400ms; margin:0;" id="spinner" class="style-scope yt-next-continuation" active> <div id="spinnerContainer" class="active  style-scope tp-yt-paper-spinner"><div class="spinner-layer layer-1 style-scope tp-yt-paper-spinner"><div class="circle-clipper left style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div><div class="circle-clipper right style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div></div><div class="spinner-layer layer-2 style-scope tp-yt-paper-spinner"><div class="circle-clipper left style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div><div class="circle-clipper right style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div></div><div class="spinner-layer layer-3 style-scope tp-yt-paper-spinner"><div class="circle-clipper left style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div><div class="circle-clipper right style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div></div><div class="spinner-layer layer-4 style-scope tp-yt-paper-spinner"><div class="circle-clipper left style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div><div class="circle-clipper right style-scope tp-yt-paper-spinner"><div class="circle style-scope tp-yt-paper-spinner"></div></div></div></div> </div> </div><div class="snipo-open-notion-svg"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 22 22" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope yt-icon" style="floar:right; pointer-events: none;display: inline;width: 20px;height: 20px;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"/></svg></div><div class="style-scope ytd-topbar-menu-button-renderer snipo-open-tooltip" role="tooltip" tabindex="-1" style="display: block;position: absolute;outline: none;z-index: 1002;-moz-user-select: none;-ms-user-select: none;-webkit-user-select: none;user-select: none;cursor: default;"><div id="tooltip" style-target="tooltip" class="style-scope tp-yt-paper-tooltip hidden" style="margin: 8px; text-transform: none; font-size: 1.2rem; line-height: 1.8rem; font-width: 400;width: 60px;border-radius: 4px;">Take notes'+"</div></div>",n.style="display: inline-block; cursor:pointer; floar:right;",n.classList.add("snipo-open-notion"),n.addEventListener("mouseover",(function(){this.querySelector(".snipo-open-tooltip")&&this.querySelector(".snipo-open-tooltip").setAttribute("style","display: block;position: absolute;outline: none;z-index: 1002;-moz-user-select: none;-ms-user-select: none;-webkit-user-select: none;user-select: none;cursor: default;left:"+(this.getBoundingClientRect().left-60)+"px"),this.querySelector(".snipo-open-tooltip .tp-yt-paper-tooltip")&&this.querySelector(".snipo-open-tooltip .tp-yt-paper-tooltip").classList.remove("hidden")})),n.addEventListener("mouseout",(function(){this.querySelector(".snipo-open-tooltip")&&this.querySelector(".snipo-open-tooltip").setAttribute("style","display: block;position: absolute;outline: none;z-index: 1002;-moz-user-select: none;-ms-user-select: none;-webkit-user-select: none;user-select: none;cursor: default;left:"+(this.getBoundingClientRect().left-60)+"px"),this.querySelector(".snipo-open-tooltip .tp-yt-paper-tooltip")&&this.querySelector(".snipo-open-tooltip .tp-yt-paper-tooltip").classList.add("hidden")})),t.append(n),n.style.float="right";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ne(document.querySelectorAll("video"))}}function ge(){for(var e=document.querySelectorAll("script"),t=0;t<e.length;t++){var n=e[t].textContent;if(-1!==n.indexOf("window.ytcsi")||-1!==n.indexOf("INNERTUBE_API_KEY")){if(null==/"accept_language":"(.*?)"/gm.exec(n))continue;var r=/"accept_language":"(.*?)"/gm.exec(n),a=/"INNERTUBE_CONTEXT_CLIENT_NAME":([0-9]*)/gm.exec(n),o=/"INNERTUBE_CONTEXT_CLIENT_VERSION":"(.*?)"/gm.exec(n),i=/"INNERTUBE_CONTEXT_GL":"(.*?)"/gm.exec(n),s=/"INNERTUBE_CONTEXT_HL":"(.*?)"/gm.exec(n),c=/"DEVICE":"(.*?)"/gm.exec(n),l=/"ID_TOKEN":"(.*?)"/gm.exec(n),u=/"PAGE_CL":(.*?),/gm.exec(n),p=/"PAGE_BUILD_LABEL":"(.*?)"/gm.exec(n),d=/"INNERTUBE_API_KEY":"(.*?)"/gm.exec(n),m=/"DELEGATED_SESSION_ID":"(.*?)"/gm.exec(n),h=/"SESSION_INDEX":"(.*?)"/gm.exec(n);if(!("visitorData"in ytcfg)){var f=/"visitorData":"(.*?)"/gm.exec(n);ytcfg.visitorData=null!==f?f[1]:""}ytcfg=Object.assign(ytcfg,{accept_language:null!==r?r[1]:"",INNERTUBE_CONTEXT_CLIENT_NAME:null!==a?a[1]:"",INNERTUBE_API_KEY:null!==d?d[1]:"",INNERTUBE_CONTEXT_CLIENT_VERSION:null!==o?o[1]:"",DEVICE:null!==c?c[1]:"",ID_TOKEN:null!==l?l[1]:"",PAGE_CL:null!==u?u[1]:"",PAGE_BUILD_LABEL:null!==p?p[1]:"",DELEGATED_SESSION_ID:null!==m?m[1]:"",INNERTUBE_CONTEXT_GL:null!==i?i[1]:"",INNERTUBE_CONTEXT_HL:null!==s?s[1]:"",SESSION_INDEX:null!==h?h[1]:""})}}}function be(e){return xe.apply(this,arguments)}function xe(){return(xe=t(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:if(!("reload"in(n=e.sent))){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function we(e){return ke.apply(this,arguments)}function ke(){return(ke=t(a().mark((function e(t){var n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g,b,x,w,k;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.documentElement.querySelector('[role="main"] video')){e.next=2;break}return e.abrupt("return");case 2:if(n=0,r=6e5,t&&(r=-1),R()){e.next=19;break}return o=new URL(location.href).searchParams,e.next=9,le(o.get("v")||"");case 9:return i=e.sent,e.next=12,i.json();case 12:s=e.sent,activeTranscriptCodes=[],activeTranscriptApiParams="",c=re((null==s?void 0:s.engagementPanels)||[]);try{for(c.s();!(l=c.n()).done;)"engagement-panel-searchable-transcript"==(null==(p=l.value)||null===(u=p.engagementPanelSectionListRenderer)||void 0===u?void 0:u.panelIdentifier)&&(activeTranscriptApiParams=null==p||null===(d=p.engagementPanelSectionListRenderer)||void 0===d||null===(m=d.content)||void 0===m||null===(h=m.continuationItemRenderer)||void 0===h||null===(f=h.continuationEndpoint)||void 0===f||null===(y=f.getTranscriptEndpoint)||void 0===y?void 0:y.params)}catch(e){c.e(e)}finally{c.f()}e.next=22;break;case 19:return document.querySelector("html").setAttribute("snipo-video-transcript",JSON.stringify({ytcfg,startRange:n,endRange:r})),document.querySelector("html").setAttribute("snipo-fetch-options","get_flashcards"),e.abrupt("return");case 22:if(activeTranscriptApiParams||document.querySelector("html").getAttribute("snipo-active-transcript-api")){e.next=25;break}return chrome.storage.local.set({cmdRes:{alert:"YouTube Flashcards is not available for the video!"}}),e.abrupt("return");case 25:return e.next=27,pe();case 27:return v=e.sent,e.next=30,v.json();case 30:for(k in g=e.sent,b=g.actions[0].updateEngagementPanelAction.content.transcriptRenderer.content.transcriptSearchPanelRenderer.body.transcriptSegmentListRenderer.initialSegments,activeTranscriptCodes=[],b.forEach((function(e){"transcriptSegmentRenderer"in e&&activeTranscriptCodes.push({startMs:e.transcriptSegmentRenderer.startMs,endMs:e.transcriptSegmentRenderer.endMs,startTimeText:e.transcriptSegmentRenderer.startTimeText.simpleText,text:e.transcriptSegmentRenderer.snippet.runs?e.transcriptSegmentRenderer.snippet.runs[0].text:""})})),x=activeTranscriptCodes.filter((function(e){return n<=e.startMs&&(-1===r||e.endMs<=r)})),w="",x)w+=x[k].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";return e.abrupt("return",w);case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Se=n(441),_e=n.n(Se);function Te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t){return"youtube"===e||"youtube"==t||"udemy"===e||"udemy"==t||"ted"===e||"ted"==t||"vimeo"===e||"vimeo"==t||"skillshare"===e||"skillshare"==t||"linkedin"===e||"linkedin"==t||"coursera"===e||"coursera"==t}function qe(e,t){return"youtube"===e||"youtube"==t?"youtube":"udemy"===e||"udemy"==t?"udemy":"ted"===e||"ted"==t?"ted":"vimeo"===e||"vimeo"==t?"vimeo":"skillshare"===e||"skillshare"==t?"skillshare":"linkedin"===e||"linkedin"==t?"linkedin":"coursera"===e||"coursera"==t?"coursera":"other"}function Re(){return Ie.apply(this,arguments)}function Ie(){return Ie=t(a().mark((function e(){var n,r,i,s,c,l,u,p,d,m,f,y,v,g,b,x,w,k,S,T,O,E=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.length>0&&void 0!==E[0]&&E[0],r=E.length>1&&void 0!==E[1]?E[1]:"",document.addEventListener?document.addEventListener("click",Le):document.attachEvent&&document.attachEvent("onclick",Le),P("/build/snipo.js"),"/install-integration"!==location.pathname){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,J({cmd:"notion-active-tab"});case 8:if((i=e.sent).status||n){e.next=11;break}return e.abrupt("return");case 11:if(!document.querySelector(".snipo-action-button")){e.next=14;break}return e.abrupt("return");case 14:s=navigator.platform.toUpperCase().indexOf("MAC")>=0,c={},l=Te(i.commands);try{for(l.s();!(u=l.n()).done;)(p=u.value).shortcut&&(c[p.name]=p.shortcut)}catch(e){l.e(e)}finally{l.f()}return e.next=20,z();case 20:if(d=e.sent){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,h(d);case 25:if(!(m=e.sent).provider){e.next=29;break}return alert("Please logout and use the Notion account to use the feature"),e.abrupt("return");case 29:m.email&&document.querySelector("html").setAttribute("snipo-email",m.email),f=m.buttons||[],y={},v=Te(f);try{for(v.s();!(g=v.n()).done;)b=g.value,y[b.name]=b}catch(e){v.e(e)}finally{v.f()}x=[{shortcut:"time"in c?c.time:"mod+shift+k",label:"Timestamp",name:"time",display:!0,visibleInSettings:!("time"in y)||y.time.visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path class="snipo-action-icon" d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42A8.962 8.962 0 0 0 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9a8.994 8.994 0 0 0 7.03-14.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7s7 3.13 7 7s-3.13 7-7 7z"/></svg>'},{shortcut:"screen"in c?c.screen:"mod+shift+,",label:"Screenshot",name:"screen",display:!0,visibleInSettings:!("screen"in y)||y.screen.visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><path class="snipo-action-icon" d="M3 12h10V4H3v8zm2-6h6v4H5V6zM2 6H1V2.5l.5-.5H5v1H2v3zm13-3.5V6h-1V3h-3V2h3.5l.5.5zM14 10h1v3.5l-.5.5H11v-1h3v-3zM2 13h3v1H1.5l-.5-.5V10h1v3z"/></svg>'},{shortcut:"transcript"in c?c.transcript:"mod+shift+h",label:"Transcript range",name:"transcript",display:Ee(r,i.activePlatform),visibleInSettings:!("transcript"in y)||y.transcript.visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path class="snipo-action-icon" d="M3 6q-.425 0-.712-.287Q2 5.425 2 5V2q0-.425.288-.713Q2.575 1 3 1h3q.425 0 .713.287Q7 1.575 7 2t-.287.712Q6.425 3 6 3H4v2q0 .425-.287.713Q3.425 6 3 6Zm18 0q-.425 0-.712-.287Q20 5.425 20 5V3h-2q-.425 0-.712-.288Q17 2.425 17 2t.288-.713Q17.575 1 18 1h3q.425 0 .712.287Q22 1.575 22 2v3q0 .425-.288.713Q21.425 6 21 6ZM3 23q-.425 0-.712-.288Q2 22.425 2 22v-3q0-.425.288-.712Q2.575 18 3 18t.713.288Q4 18.575 4 19v2h2q.425 0 .713.288Q7 21.575 7 22t-.287.712Q6.425 23 6 23Zm15 0q-.425 0-.712-.288Q17 22.425 17 22t.288-.712Q17.575 21 18 21h2v-2q0-.425.288-.712Q20.575 18 21 18t.712.288Q22 18.575 22 19v3q0 .425-.288.712Q21.425 23 21 23ZM7 18h10V6H7Zm0 2q-.825 0-1.412-.587Q5 18.825 5 18V6q0-.825.588-1.412Q6.175 4 7 4h10q.825 0 1.413.588Q19 5.175 19 6v12q0 .825-.587 1.413Q17.825 20 17 20Zm3-10h4q.425 0 .713-.288Q15 9.425 15 9t-.287-.713Q14.425 8 14 8h-4q-.425 0-.712.287Q9 8.575 9 9t.288.712Q9.575 10 10 10Zm0 3h4q.425 0 .713-.288Q15 12.425 15 12t-.287-.713Q14.425 11 14 11h-4q-.425 0-.712.287Q9 11.575 9 12t.288.712Q9.575 13 10 13Zm0 3h4q.425 0 .713-.288Q15 15.425 15 15t-.287-.713Q14.425 14 14 14h-4q-.425 0-.712.287Q9 14.575 9 15t.288.712Q9.575 16 10 16Zm-3 2V6v12Z"/></svg>',seconds:"transcript"in y&&y.transcript.seconds?y.transcript.seconds:30,beforeSeconds:"transcript"in y&&y.transcript.beforeSeconds?y.transcript.beforeSeconds:0,afterSeconds:"transcript"in y&&y.transcript.afterSeconds?y.transcript.afterSeconds:0,directionOfRange:"transcript"in y&&y.transcript.directionOfRange?y.transcript.directionOfRange:"Next"},{shortcut:"clip"in c?c.clip:"mod+shift+y",label:"Video clip",name:"clip",display:"youtube"===r||"youtube"==i.activePlatform,visibleInSettings:!("clip"in y)||y.clip.visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path class="snipo-action-icon" d="M8 7.752v5.497a.75.75 0 0 0 1.155.631l4.618-2.959a.5.5 0 0 0 0-.842L9.155 7.12A.75.75 0 0 0 8 7.752ZM5.25 3A3.25 3.25 0 0 0 2 6.25v9a3.25 3.25 0 0 0 3.25 3.25h10.5A3.25 3.25 0 0 0 19 15.25v-9A3.25 3.25 0 0 0 15.75 3H5.25ZM3.5 6.25c0-.966.784-1.75 1.75-1.75h10.5c.966 0 1.75.784 1.75 1.75v9A1.75 1.75 0 0 1 15.75 17H5.25a1.75 1.75 0 0 1-1.75-1.75v-9ZM5.01 19.5A3.247 3.247 0 0 0 7.75 21h8.5c2.9 0 5.25-2.35 5.25-5.25v-7A3.25 3.25 0 0 0 20 6.01v9.74a3.75 3.75 0 0 1-3.75 3.75H5.01Z"/></svg>'},{shortcut:"pause"in c?c.pause:"mod+shift+space",label:"Pause",name:"pause",display:!0,visibleInSettings:!("pause"in y)||y.pause.visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path class="snipo-action-icon" d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"/></svg>'},{shortcut:"back5s"in c?c.back5s:s?"mod+shift+8":"alt+shift+8",label:"Seek backward "+("back5s"in y&&y.back5s.seconds?y.back5s.seconds:5)+" sec in player",name:"back5s",display:!0,visibleInSettings:!("back5s"in y)||y.back5s.visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g class="snipo-action-icon"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M11.729 5.055a.5.5 0 0 0-.52.038L8.5 7.028V5.5a.5.5 0 0 0-.79-.407L5 7.028V5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0V8.972l2.71 1.935a.5.5 0 0 0 .79-.407V8.972l2.71 1.935A.5.5 0 0 0 12 10.5v-5a.5.5 0 0 0-.271-.445z"/></g></svg>',seconds:"back5s"in y&&y.back5s.seconds?y.back5s.seconds:5},{shortcut:"skip5s"in c?c.skip5s:s?"mod+shift+9":"alt+shift+9",label:"Seek forward "+("skip5s"in y&&y.skip5s.seconds?y.skip5s.seconds:5)+" sec in player",name:"skip5s",display:!0,visibleInSettings:!("skip5s"in y)||y.skip5s.visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g class="snipo-action-icon"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M4.271 5.055a.5.5 0 0 1 .52.038L7.5 7.028V5.5a.5.5 0 0 1 .79-.407L11 7.028V5.5a.5.5 0 0 1 1 0v5a.5.5 0 0 1-1 0V8.972l-2.71 1.935a.5.5 0 0 1-.79-.407V8.972l-2.71 1.935A.5.5 0 0 1 4 10.5v-5a.5.5 0 0 1 .271-.445z"/></g></svg>',seconds:"skip5s"in y&&y.skip5s.seconds?y.skip5s.seconds:5},{shortcut:"speed-dec"in c?c["speed-dec"]:s?"mod+shift+7":"alt+shift+7",label:"Slow down the video",name:"speed-dec",display:!0,visibleInSettings:!("speed-dec"in y)||y["speed-dec"].visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path class="snipo-action-icon" d="M12 16c1.66 0 3-1.34 3-3c0-1.12-.61-2.1-1.5-2.61L3.79 4.77l5.53 9.58c.5.98 1.51 1.65 2.68 1.65m0-13c-1.81 0-3.5.5-4.97 1.32l2.1 1.21C10 5.19 11 5 12 5c4.42 0 8 3.58 8 8c0 2.21-.89 4.21-2.34 5.65h-.01a.996.996 0 0 0 0 1.41c.39.39 1.03.39 1.42.01A9.969 9.969 0 0 0 22 13c0-5.5-4.5-10-10-10M2 13c0 2.76 1.12 5.26 2.93 7.07c.39.38 1.02.38 1.41-.01a.996.996 0 0 0 0-1.41A7.95 7.95 0 0 1 4 13c0-1 .19-2 .54-2.9L3.33 8C2.5 9.5 2 11.18 2 13Z"/></svg>'},{shortcut:"speed-inc"in c?c["speed-inc"]:s?"mod+shift+0":"alt+shift+0",label:"Speed up the video",name:"speed-inc",display:!0,visibleInSettings:!("speed-inc"in y)||y["speed-inc"].visible,svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path class="snipo-action-icon" d="M12 16a3 3 0 0 1-3-3c0-1.12.61-2.1 1.5-2.61l9.71-5.62l-5.53 9.58c-.5.98-1.51 1.65-2.68 1.65m0-13c1.81 0 3.5.5 4.97 1.32l-2.1 1.21C14 5.19 13 5 12 5a8 8 0 0 0-8 8c0 2.21.89 4.21 2.34 5.65h.01c.39.39.39 1.02 0 1.41c-.39.39-1.03.39-1.42.01A9.969 9.969 0 0 1 2 13A10 10 0 0 1 12 3m10 10c0 2.76-1.12 5.26-2.93 7.07c-.39.38-1.02.38-1.41-.01a.996.996 0 0 1 0-1.41A7.95 7.95 0 0 0 20 13c0-1-.19-2-.54-2.9L20.67 8C21.5 9.5 22 11.18 22 13Z"/></svg>'},{shortcut:"",label:"Settings",name:"settings",display:!0,visibleInSettings:!0,contentType:qe(r,i.activePlatform),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path class="snipo-action-icon" d="M19.14 12.94c.04-.3.06-.61.06-.94c0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6s-1.62 3.6-3.6 3.6z"/></svg>'}],w=56,k=new(_e())(document.documentElement),S=function(){var e=O[T];if(!0!==e.display)return"continue";var t=document.createElement("div");t.dataset.snipoActionName=e.name,e.seconds&&(t.dataset.seconds=e.seconds),e.beforeSeconds&&(t.dataset.beforeSeconds=e.beforeSeconds),e.afterSeconds&&(t.dataset.afterSeconds=e.afterSeconds),e.directionOfRange&&(t.dataset.directionOfRange=e.directionOfRange);var n="Ctrl";s&&(n="⌘"),t.innerHTML='<div class="snipo-action-button" style="display: none; position: fixed; inset: 0px; z-index: 999; pointer-events: none; overflow: hidden; display: none"><div data-overlay="true" style="pointer-events: auto; position: relative; z-index: 0;"><div><div class="snipo-action-button-label" style="position: fixed;right: 100px;top: '.concat(w-10,'px;pointer-events: none;"><div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-start; align-items: center;"><div style="position: relative; top: 100%; pointer-events: none;"><div style="display: flex; align-items: center; position: relative; flex-direction: column-reverse; transform-origin: 50% top; left: -33px; top: 6px;"><div style="border-radius: 3px; background: rgb(15, 15, 15); position: relative; max-width: calc(100vw - 24px); box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px; overflow: hidden; color: rgba(255, 255, 255, 0.9); padding: 4px 8px; font-size: 12px; line-height: 1.4; font-width: 500; white-space: nowrap;"><div style="text-align: center;"><div class="snipo-tooltip-label">').concat(e.label,'</div><span style="color: rgba(206, 205, 202, 0.6);">').concat(e.shortcut.replace("mod",n).replace("alt","Alt").replace("shift","Shift"),"</span></div></div></div></div></div></div></div></div></div>")+e.svg,t.style="z-index: 99999; position: absolute; top: ".concat(w,"px; right: 0; user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; align-items: center; justify-content: center; flex-shrink: 0; border-radius: 3px; height: 28px; width: 33px; padding: 0px; app-region: no-drag; margin-right: 2px;"),e.visibleInSettings||t.classList.add("snipo-action-off"),t.addEventListener("click",(function(){"settings"!==e.name?(chrome.storage.local.set({action:{cmd:e.name,seconds:parseInt(this.dataset.seconds),beforeSeconds:parseInt(this.dataset.beforeSeconds||0),afterSeconds:parseInt(this.dataset.afterSeconds||0),directionOfRange:this.dataset.directionOfRange}}),"clip"===e.name&&Pe()):Ae(e.contentType)})),document.querySelector("html").classList.add("snipo-installed"),document.querySelector("body").appendChild(t),t.addEventListener("mouseover",(function(){this.querySelector(".snipo-action-button").style.display="block"})),t.addEventListener("mouseout",(function(){this.querySelector(".snipo-action-button").style.display="none"})),e.visibleInSettings&&(w+=35),e.name in c||""===e.shortcut||k.bind(e.shortcut,(function(){var t=document.querySelector('[data-snipo-action-name="'.concat(e.name,'"]'));chrome.storage.local.set({action:{cmd:e.name,seconds:parseInt(t.dataset.seconds),beforeSeconds:parseInt(t.dataset.beforeSeconds),afterSeconds:parseInt(t.dataset.afterSeconds),directionOfRange:t.dataset.directionOfRange}}),"clip"===e.name&&Pe()}))},T=0,O=x;case 39:if(!(T<O.length)){e.next=46;break}if("continue"!==S()){e.next=43;break}return e.abrupt("continue",43);case 43:T++,e.next=39;break;case 46:window.addEventListener("message",function(){var e=t(a().mark((function e(t){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.origin.indexOf("chrome-extension")||-1!==t.origin.indexOf("moz-extension")||-1!==t.origin.indexOf("safari-web-extension")){e.next=2;break}return e.abrupt("return");case 2:if(!t.data||"change_button_visible"!==t.data.type){e.next=8;break}for(t.data.status?document.querySelector('[data-snipo-action-name="'.concat(t.data.name,'"]')).classList.remove("snipo-action-off"):document.querySelector('[data-snipo-action-name="'.concat(t.data.name,'"]')).classList.add("snipo-action-off"),n=56,r=document.querySelectorAll("[data-snipo-action-name]:not(.snipo-action-off)"),o=0;o<r.length;o++)r[o].style.top=n+"px",r[o].querySelector(".snipo-action-button-label").style.top=n-10+"px",n+=35;return e.abrupt("return");case 8:if(!t.data||"change_button_param"!==t.data.type){e.next=12;break}return document.querySelector('[data-snipo-action-name="'.concat(t.data.name,'"]')).dataset.seconds=t.data.seconds,t.data.directionOfRange&&(document.querySelector('[data-snipo-action-name="'.concat(t.data.name,'"]')).dataset.directionOfRange=t.data.directionOfRange,document.querySelector('[data-snipo-action-name="'.concat(t.data.name,'"]')).dataset.beforeSeconds=t.data.beforeSeconds,document.querySelector('[data-snipo-action-name="'.concat(t.data.name,'"]')).dataset.afterSeconds=t.data.afterSeconds),e.abrupt("return");case 12:if(!t.data||"open_url"!==t.data.type){e.next=16;break}return e.next=15,J({cmd:"open-link",url:t.data.url});case 15:return e.abrupt("return");case 16:if(!t.data||"close_iframe"!==t.data.type){e.next=21;break}return document.querySelector(".snipo-overlay").classList.remove("snipo-overlay-on"),document.querySelector("html").classList.remove("snipo-overlay-exist"),document.querySelector("#snipo-settings-modal").remove(),e.abrupt("return");case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),chrome.storage.onChanged.addListener(function(){var e=t(a().mark((function e(n,r){var i,s,c,l,u,p,d,m,h,f,y,v,g,b,x,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sync"!==r){e.next=2;break}return e.abrupt("return");case 2:if(!("notionAction"in n)||!("newValue"in n.notionAction)){e.next=8;break}return i=document.querySelector('[data-snipo-action-name="'.concat(n.notionAction.newValue,'"]')),chrome.storage.local.set({action:{cmd:n.notionAction.newValue,seconds:parseInt(i.dataset.seconds),beforeSeconds:parseInt(i.dataset.beforeSeconds),afterSeconds:parseInt(i.dataset.afterSeconds),directionOfRange:i.dataset.directionOfRange}}),"clip"===n.notionAction.newValue&&Pe(),chrome.storage.local.remove("notionAction"),e.abrupt("return");case 8:if(!("cmdRes"in n)||!("newValue"in n.cmdRes)){e.next=70;break}if(!("time"in n.cmdRes.newValue)){e.next=22;break}if("undefined"!=typeof ClipboardItem){e.next=13;break}return alert("To work Snipo in Firefox, you must go to about:config in Firefox (type in the address bar) and then set dom.events.asyncClipboard.clipboardItem to true by clicking on the toggle button on the right"),e.abrupt("return");case 13:c="text/plain",l=new Blob(["".concat(_(n.cmdRes.newValue.time))],{type:c}),u="text/html",d="",-1!==n.cmdRes.newValue.link.indexOf("https://vimeo.com/")&&(d+="#t=".concat(parseFloat(n.cmdRes.newValue.time).toFixed(0))),p=-1!==n.cmdRes.newValue.link.indexOf("?")?new Blob(['<a href="'.concat(n.cmdRes.newValue.link,"&amp;t=").concat(parseFloat(n.cmdRes.newValue.time).toFixed(0),"s&type=snipo").concat(d,'">').concat(_(n.cmdRes.newValue.time),"</a><span>&nbsp</span>")],{type:u}):new Blob(['<a href="'.concat(n.cmdRes.newValue.link,"?t=").concat(parseFloat(n.cmdRes.newValue.time).toFixed(0),"s&type=snipo").concat(d,'">').concat(_(n.cmdRes.newValue.time),"</a><span>&nbsp</span>")],{type:u}),"playlistId"in n.cmdRes.newValue&&"videoId"in n.cmdRes.newValue&&n.cmdRes.newValue.videoId&&n.cmdRes.newValue.playlistId&&(p=new Blob(['<a href="'.concat(n.cmdRes.newValue.link,"?list=").concat(n.cmdRes.newValue.playlistId,"&v=").concat(n.cmdRes.newValue.videoId,"&t=").concat(parseFloat(n.cmdRes.newValue.time).toFixed(0),'s&type=snipo">').concat(_(n.cmdRes.newValue.time),"</a><span>&nbsp</span>")],{type:u})),m=[new ClipboardItem((s={},o(s,c,l),o(s,u,p),s))],navigator.clipboard.write(m).then(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.execCommand("paste");case 1:case"end":return e.stop()}}),e)}))));case 22:if(!("screen"in n.cmdRes.newValue)){e.next=35;break}if("undefined"!=typeof ClipboardItem){e.next=26;break}return alert("To work Snipo in Firefox, you must go to about:config in Firefox (type in the address bar) and then set dom.events.asyncClipboard.clipboardItem to true by clicking on the toggle button on the right"),e.abrupt("return");case 26:return e.next=28,fetch(n.cmdRes.newValue.screen);case 28:return h=e.sent,e.next=31,h.blob();case 31:f=e.sent,"image/png",y=[new ClipboardItem(o({},"image/png",f))],navigator.clipboard.write(y).then((function(){document.execCommand("paste")}));case 35:if(!("transcriptText"in n.cmdRes.newValue)){e.next=45;break}if("undefined"!=typeof ClipboardItem){e.next=39;break}return alert("To work Snipo in Firefox, you must go to about:config in Firefox (type in the address bar) and then set dom.events.asyncClipboard.clipboardItem to true by clicking on the toggle button on the right"),e.abrupt("return");case 39:v="text/html",b="",-1!==n.cmdRes.newValue.link.indexOf("https://vimeo.com/")&&(b+="#t=".concat(parseFloat(n.cmdRes.newValue.startTime).toFixed(0))),g=-1!==n.cmdRes.newValue.link.indexOf("?")?new Blob(['<meta charset="utf-8"><p><a href="'.concat(n.cmdRes.newValue.link,"&amp;t=").concat(parseFloat(n.cmdRes.newValue.startTime).toFixed(0),"s&type=snipo").concat(b,'">').concat(_(n.cmdRes.newValue.startTime),"</a></p><p>").concat(n.cmdRes.newValue.transcriptText.charAt(0).toUpperCase()+n.cmdRes.newValue.transcriptText.slice(1),"</p><p>&nbsp</p>")],{type:v}):new Blob(['<meta charset="utf-8"><p><a href="'.concat(n.cmdRes.newValue.link,"?t=").concat(parseFloat(n.cmdRes.newValue.startTime).toFixed(0),"s&type=snipo").concat(b,'">').concat(_(n.cmdRes.newValue.startTime),"</a></p><p>").concat(n.cmdRes.newValue.transcriptText.charAt(0).toUpperCase()+n.cmdRes.newValue.transcriptText.slice(1),"</p><p>&nbsp</p>")],{type:v}),"playlistId"in n.cmdRes.newValue&&"videoId"in n.cmdRes.newValue&&n.cmdRes.newValue.videoId&&n.cmdRes.newValue.playlistId&&(g=new Blob(['<meta charset="utf-8"><p><a href="'.concat(n.cmdRes.newValue.link,"?list=").concat(n.cmdRes.newValue.playlistId,"&v=").concat(n.cmdRes.newValue.videoId,"&t=").concat(parseFloat(n.cmdRes.newValue.startTime).toFixed(0),'s&type=snipo">').concat(_(n.cmdRes.newValue.startTime),"</a></p><p>").concat(n.cmdRes.newValue.transcriptText.charAt(0).toUpperCase()+n.cmdRes.newValue.transcriptText.slice(1),"</p><p>&nbsp</p>")],{type:v})),navigator.clipboard.write([new ClipboardItem(o({},v,g))]).then(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.execCommand("paste");case 1:case"end":return e.stop()}}),e)}))));case 45:if(!("clipUrl"in n.cmdRes.newValue)){e.next=59;break}if(document.querySelector('[data-snipo-action-name="clip"]').classList.remove("snipo-clip-recording"),document.querySelector('[data-snipo-action-name="clip"]').querySelector(".snipo-tooltip-label").innerHTML="Video clip",document.querySelector('[data-snipo-action-name="clip"]').querySelector("svg").innerHTML='<path class="snipo-action-icon" d="M8 7.752v5.497a.75.75 0 0 0 1.155.631l4.618-2.959a.5.5 0 0 0 0-.842L9.155 7.12A.75.75 0 0 0 8 7.752ZM5.25 3A3.25 3.25 0 0 0 2 6.25v9a3.25 3.25 0 0 0 3.25 3.25h10.5A3.25 3.25 0 0 0 19 15.25v-9A3.25 3.25 0 0 0 15.75 3H5.25ZM3.5 6.25c0-.966.784-1.75 1.75-1.75h10.5c.966 0 1.75.784 1.75 1.75v9A1.75 1.75 0 0 1 15.75 17H5.25a1.75 1.75 0 0 1-1.75-1.75v-9ZM5.01 19.5A3.247 3.247 0 0 0 7.75 21h8.5c2.9 0 5.25-2.35 5.25-5.25v-7A3.25 3.25 0 0 0 20 6.01v9.74a3.75 3.75 0 0 1-3.75 3.75H5.01Z"/>',""!==n.cmdRes.newValue.clipUrl){e.next=52;break}return chrome.storage.local.remove("cmdRes"),e.abrupt("return");case 52:if("undefined"!=typeof ClipboardItem){e.next=56;break}return alert("To work Snipo in Firefox, you must go to about:config in Firefox (type in the address bar) and then set dom.events.asyncClipboard.clipboardItem to true by clicking on the toggle button on the right"),chrome.storage.local.remove("cmdRes"),e.abrupt("return");case 56:x="text/html",w=new Blob(['<meta charset="utf-8"><p><a href="'.concat(n.cmdRes.newValue.clipUrl,'"><a href="').concat(n.cmdRes.newValue.clipUrl,'">').concat(n.cmdRes.newValue.clipUrl,"</a></a></p>")],{type:x}),navigator.clipboard.write([new ClipboardItem(o({},x,w))]).then(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.execCommand("paste"),setTimeout((function(){document.querySelector(".notion-embed-menu>div>div>div>div:nth-child(2)").click()}),500);case 2:case"end":return e.stop()}}),e)}))));case 59:if(!("video_paused"in n.cmdRes.newValue)){e.next=68;break}if(!n.cmdRes.newValue.video_paused){e.next=65;break}return document.querySelector('[data-snipo-action-name="pause"]').classList.add("snipo-play"),document.querySelector('[data-snipo-action-name="pause"]').querySelector(".snipo-tooltip-label").innerHTML="Play",document.querySelector('[data-snipo-action-name="pause"]').querySelector("svg").innerHTML='<path class="snipo-action-icon" d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z"/><path class="snipo-action-icon" d="m719.4 499.1l-296.1-215A15.9 15.9 0 0 0 398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 0 0 0-25.8zm-257.6 134V390.9L628.5 512L461.8 633.1z"/>',e.abrupt("return");case 65:document.querySelector('[data-snipo-action-name="pause"]').classList.remove("snipo-play"),document.querySelector('[data-snipo-action-name="pause"]').querySelector(".snipo-tooltip-label").innerHTML="Pause",document.querySelector('[data-snipo-action-name="pause"]').querySelector("svg").innerHTML='<path class="snipo-action-icon" d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"/>';case 68:"alert"in n.cmdRes.newValue&&alert(n.cmdRes.newValue.alert),chrome.storage.local.remove("cmdRes");case 70:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 48:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Ae(e){if(!document.querySelector(".snipo-overlay")){var t=document.createElement("div");t.className="snipo-overlay",t.addEventListener("click",(function(){document.querySelector(".snipo-overlay").classList.remove("snipo-overlay-on"),document.querySelector("html").classList.remove("snipo-overlay-exist"),document.querySelector("#snipo-settings-modal").remove()}),!0),document.body.appendChild(t)}document.querySelector(".snipo-overlay").classList.add("snipo-overlay-on"),document.querySelector("html").classList.add("snipo-overlay-exist"),document.querySelector("#snipo-settings-modal")&&document.querySelector("#snipo-settings-modal").remove();var n=document.querySelector(".notion-body.dark")&&!0,r=chrome.runtime.getURL("/snipo-app/dist/settings.html?dark=".concat(n?"true":"false","&content-type=").concat(e,"#/settings/index")),a=document.createElement("iframe");a.id="snipo-settings-modal",a.src=r,document.body.appendChild(a)}function Pe(){if(!document.querySelector('[data-snipo-action-name="clip"]').classList.contains("snipo-clip-recording"))return document.querySelector('[data-snipo-action-name="clip"]').classList.add("snipo-clip-recording"),document.querySelector('[data-snipo-action-name="clip"]').querySelector(".snipo-tooltip-label").innerHTML="Stop recording",void(document.querySelector('[data-snipo-action-name="clip"]').querySelector("svg").innerHTML='<path fill="red" d="M12 22q-2.075 0-3.9-.788q-1.825-.787-3.175-2.137q-1.35-1.35-2.137-3.175Q2 14.075 2 12t.788-3.9q.787-1.825 2.137-3.175q1.35-1.35 3.175-2.138Q9.925 2 12 2t3.9.787q1.825.788 3.175 2.138q1.35 1.35 2.137 3.175Q22 9.925 22 12t-.788 3.9q-.787 1.825-2.137 3.175q-1.35 1.35-3.175 2.137Q14.075 22 12 22Zm0-10Zm0 8q3.325 0 5.663-2.337Q20 15.325 20 12t-2.337-5.663Q15.325 4 12 4T6.338 6.337Q4 8.675 4 12t2.338 5.663Q8.675 20 12 20Zm-3-4h6q.425 0 .713-.288Q16 15.425 16 15V9q0-.425-.287-.713Q15.425 8 15 8H9q-.425 0-.712.287Q8 8.575 8 9v6q0 .425.288.712Q8.575 16 9 16Z"/>');document.querySelector('[data-snipo-action-name="clip"]').classList.remove("snipo-clip-recording"),document.querySelector('[data-snipo-action-name="clip"]').querySelector(".snipo-tooltip-label").innerHTML="Video clip",document.querySelector('[data-snipo-action-name="clip"]').querySelector("svg").innerHTML='<path class="snipo-action-icon" d="M8 7.752v5.497a.75.75 0 0 0 1.155.631l4.618-2.959a.5.5 0 0 0 0-.842L9.155 7.12A.75.75 0 0 0 8 7.752ZM5.25 3A3.25 3.25 0 0 0 2 6.25v9a3.25 3.25 0 0 0 3.25 3.25h10.5A3.25 3.25 0 0 0 19 15.25v-9A3.25 3.25 0 0 0 15.75 3H5.25ZM3.5 6.25c0-.966.784-1.75 1.75-1.75h10.5c.966 0 1.75.784 1.75 1.75v9A1.75 1.75 0 0 1 15.75 17H5.25a1.75 1.75 0 0 1-1.75-1.75v-9ZM5.01 19.5A3.247 3.247 0 0 0 7.75 21h8.5c2.9 0 5.25-2.35 5.25-5.25v-7A3.25 3.25 0 0 0 20 6.01v9.74a3.75 3.75 0 0 1-3.75 3.75H5.01Z"/>'}function Le(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=t(a().mark((function e(t){var n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g,b,x,w,k,S,_,T,O,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("A"!==(r=t.target||t.srcElement).tagName){e.next=168;break}if(-1==(n=r.getAttribute("href")).indexOf("https://www.youtube.com/")){e.next=14;break}if(!(o=new URL(n)).searchParams.has("type")||"snipo"!==o.searchParams.get("type")){e.next=14;break}if(t.preventDefault(),t.isTrusted){e.next=13;break}return e.next=10,J({cmd:"open-course-platform",url:n.replace("&type=snipo",""),width:window.screen.availWidth,height:window.screen.availHeight});case 10:return Re(!0,"youtube"),app.analytics.track("open_youtube_from_notion"),e.abrupt("return");case 13:return e.abrupt("return");case 14:if(!(n.indexOf(".udemy.com")>-1)){e.next=25;break}if(!(i=new URL(n)).searchParams.has("type")||"snipo"!==i.searchParams.get("type")){e.next=25;break}if(t.preventDefault(),t.isTrusted){e.next=24;break}return e.next=21,J({cmd:"open-course-platform",url:n.replace("&type=snipo",""),width:window.screen.availWidth,height:window.screen.availHeight});case 21:return Re(!0,"udemy"),app.analytics.track("open_udemy_from_notion"),e.abrupt("return");case 24:return e.abrupt("return");case 25:if(-1==n.indexOf("https://www.linkedin.com/")){e.next=36;break}if(!(s=new URL(n)).searchParams.has("type")||"snipo"!==s.searchParams.get("type")){e.next=36;break}if(t.preventDefault(),t.isTrusted){e.next=35;break}return e.next=32,J({cmd:"open-course-platform",url:n.replace("&type=snipo",""),type:"linkedin",width:window.screen.availWidth,height:window.screen.availHeight});case 32:return Re(!0,"likedin"),app.analytics.track("open_linkedin_from_notion"),e.abrupt("return");case 35:return e.abrupt("return");case 36:if(-1==n.indexOf("https://www.ted.com/talks")){e.next=47;break}if(!(c=new URL(n)).searchParams.has("type")||"snipo"!==c.searchParams.get("type")){e.next=47;break}if(t.preventDefault(),t.isTrusted){e.next=46;break}return e.next=43,J({cmd:"open-course-platform",url:n.replace("?type=snipo","?").replace("&type=snipo",""),type:"ted",width:window.screen.availWidth,height:window.screen.availHeight});case 43:return Re(!0,"ted"),app.analytics.track("open_ted_from_notion"),e.abrupt("return");case 46:return e.abrupt("return");case 47:if(-1==n.indexOf("https://vimeo.com")){e.next=58;break}if(!(l=new URL(n)).searchParams.has("type")||"snipo"!==l.searchParams.get("type")){e.next=58;break}if(t.preventDefault(),t.isTrusted){e.next=57;break}return e.next=54,J({cmd:"open-course-platform",url:n.replace("?type=snipo","?").replace("&type=snipo",""),type:"ted",width:window.screen.availWidth,height:window.screen.availHeight});case 54:return Re(!0,"vimeo"),app.analytics.track("open_vimeo_from_notion"),e.abrupt("return");case 57:return e.abrupt("return");case 58:if(-1==n.indexOf("https://www.skillshare.com")){e.next=69;break}if(!(u=new URL(n)).searchParams.has("type")||"snipo"!==u.searchParams.get("type")){e.next=69;break}if(t.preventDefault(),t.isTrusted){e.next=68;break}return e.next=65,J({cmd:"open-course-platform",url:n.replace("?type=snipo","?").replace("&type=snipo",""),type:"skillshare",width:window.screen.availWidth,height:window.screen.availHeight});case 65:return Re(!0,"skillshare"),app.analytics.track("open_skillshare_from_notion"),e.abrupt("return");case 68:return e.abrupt("return");case 69:if(-1==n.indexOf("https://www.coursera.org")){e.next=80;break}if(!(p=new URL(n)).searchParams.has("type")||"snipo"!==p.searchParams.get("type")){e.next=80;break}if(t.preventDefault(),t.isTrusted){e.next=79;break}return e.next=76,J({cmd:"open-course-platform",url:n.replace("?type=snipo","?").replace("&type=snipo",""),type:"coursera",width:window.screen.availWidth,height:window.screen.availHeight});case 76:return Re(!0,"coursera"),app.analytics.track("open_coursera_from_notion"),e.abrupt("return");case 79:return e.abrupt("return");case 80:if(-1==n.indexOf("https://rumble.com")){e.next=91;break}if(!(d=new URL(n)).searchParams.has("type")||"snipo"!==d.searchParams.get("type")){e.next=91;break}if(t.preventDefault(),t.isTrusted){e.next=90;break}return e.next=87,J({cmd:"open-course-platform",url:n.replace("?type=snipo","?").replace("&type=snipo",""),type:"skillshare",width:window.screen.availWidth,height:window.screen.availHeight});case 87:return Re(!0,"rumble"),app.analytics.track("open_rumble_from_notion"),e.abrupt("return");case 90:return e.abrupt("return");case 91:if(-1==n.indexOf("https://www.bilibili.tv")&&-1==n.indexOf("https://www.bilibili.com")){e.next=102;break}if(!(m=new URL(n)).searchParams.has("type")||"snipo"!==m.searchParams.get("type")){e.next=102;break}if(t.preventDefault(),t.isTrusted){e.next=101;break}return e.next=98,J({cmd:"open-course-platform",url:n.replace("?type=snipo","?").replace("&type=snipo",""),type:"bilibili",width:window.screen.availWidth,height:window.screen.availHeight});case 98:return Re(!0,"bilibili"),app.analytics.track("open_bilibili_from_notion"),e.abrupt("return");case 101:return e.abrupt("return");case 102:if(0!==n.indexOf("https://oauth.snipo.io/notion/oauth/callback?error=access_denied")){e.next=105;break}return app.analytics.track("notion_auth_cancel"),e.abrupt("return");case 105:if(0!==n.indexOf("https://oauth.snipo.io/notion/oauth/callback")){e.next=167;break}if(h=document.querySelector("html").dataset.snipo){e.next=112;break}return alert("The page is not selected! Support email: hello@snipo.io"),t.preventDefault(),app.analytics.track("notion_auth_page_is_not_selected"),e.abrupt("return");case 112:if(f=JSON.parse(h),0!==(y=f.blockIdsForBot).length){e.next=116;break}return e.abrupt("return");case 116:v=document.querySelectorAll(".check"),g=0,b=0;case 119:if(!(b<v.length)){e.next=126;break}if(""!=v[b].parentNode.parentNode.parentNode.parentNode.style.marginLeft){e.next=122;break}return e.abrupt("continue",123);case 122:g++;case 123:b++,e.next=119;break;case 126:if(1==g){e.next=131;break}return alert("You should allow access only one page"),t.preventDefault(),app.analytics.track("notion_auth_page_one_page"),e.abrupt("return");case 131:return t.preventDefault(),x=JSON.parse(document.querySelector("html").dataset.snipo),w=x.spaceId||x.spaceIds[0],e.next=136,fetch("https://www.notion.so/api/v3/getUserSharedPagesInSpace",{headers:{"cache-control":"no-cache","content-type":"application/json","notion-audit-log-platform":"web","notion-client-version":"23.10.26.72",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"},referrer:"https://www.notion.so/",referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify({includeDeleted:!1,spaceId:w}),method:"POST",mode:"cors",credentials:"include"});case 136:return k=e.sent,e.next=139,k.json();case 139:S=e.sent,_="",T=Te(y),e.prev=142,T.s();case 144:if((O=T.n()).done){e.next=151;break}if(E=O.value,!S.recordMap.block[E]||"page"!==S.recordMap.block[E].value.value.type||!0!==S.recordMap.block[E].value.value.alive){e.next=149;break}return _=E,e.abrupt("break",151);case 149:e.next=144;break;case 151:e.next=156;break;case 153:e.prev=153,e.t0=e.catch(142),T.e(e.t0);case 156:return e.prev=156,T.f(),e.finish(156);case 159:if(""!==_){e.next=164;break}return alert("You set access to the database, but Snipo needs a page. You should set access to the page or create a new one. "),t.preventDefault(),app.analytics.track("notion_auth_page_one_page"),e.abrupt("return");case 164:return location.href=n+"&page-id="+_,app.analytics.track("notion_auth_page_redirect"),e.abrupt("return");case 167:0===n.indexOf("https://snipo.io/")&&(t.isTrusted&&window.open(n),t.preventDefault());case 168:case"end":return e.stop()}}),e,null,[[142,153,156,159]])})))).apply(this,arguments)}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(){return De.apply(this,arguments)}function De(){return(De=t(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URL(location.href).searchParams,n=k("access-token"),!t.has("notion-auth-token")||n){e.next=15;break}return e.next=5,G({notion_auth_token:t.get("notion-auth-token")});case 5:return e.next=7,N("first_open");case 7:return r=e.sent,e.next=10,V("first_open");case 10:return r.first_open?chrome.runtime.sendMessage(Me(Me({},JSON.parse(r.first_open)),{},{reopen:!0}),(function(e){"error"in e&&("payment"!==e.error?alert(e.error):chrome.runtime.sendMessage({cmd:"close-active-tab"},(function(e){"error"in e&&("payment"!==e.error&&alert(e.error),app.analytics.track("notion_auth_error",{type:"notion",error:e.error})),window.close()})),app.analytics.track("notion_auth_error",{type:"notion",error:e.error}))})):chrome.runtime.sendMessage({cmd:"close-active-tab"},(function(e){"error"in e&&("payment"!==e.error&&alert(e.error),app.analytics.track("notion_auth_error",{type:"notion",error:e.error})),window.close()})),app.analytics.track("notion_auth_redirect"),e.abrupt("return");case 15:if(!n||"/loader"!==location.pathname){e.next=28;break}return e.next=18,G({auth_token:n});case 18:return e.next=20,N("first_open");case 20:return o=e.sent,e.next=23,V("first_open");case 23:return o.first_open?chrome.runtime.sendMessage(Me(Me({},JSON.parse(o.first_open)),{},{reopen:!0}),(function(e){"error"in e&&("payment"!==e.error?alert(e.error):chrome.runtime.sendMessage({cmd:"close-active-tab"},(function(e){"error"in e&&("payment"!==e.error&&alert(e.error),app.analytics.track("notion_auth_error",{type:"notion",error:e.error})),C("access-token","",{expires:-1}),window.close()})),app.analytics.track("notion_auth_error",{type:"notion",error:e.error}))})):chrome.runtime.sendMessage({cmd:"close-active-tab"},(function(e){"error"in e&&("payment"!==e.error&&alert(e.error),app.analytics.track("notion_auth_error",{type:"notion",error:e.error})),C("access-token","",{expires:-1}),window.close()})),app.analytics.track("notion_auth_redirect"),e.abrupt("return");case 28:"/loader"===location.pathname&&alert("Logging in to Snipo requires that cookies are enabled in your browser");case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(){return Be.apply(this,arguments)}function Be(){return Be=t(a().mark((function e(){var n,r,o,i,s,c,l,p,d,m,h,f,y,v,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this).classList.contains("snipo-loading")){e.next=3;break}return e.abrupt("return");case 3:if(n.classList.add("snipo-loading"),r=document.querySelector('[role="main"] .snipo-open-notion').classList.contains("snipo-reload-playlist"),document.querySelector('[role="main"] .snipo-open-notion').classList.remove("snipo-reload-playlist"),n.querySelector(".ytd-item-section-renderer").style.display="flex",n.querySelector(".snipo-open-notion-svg")&&n.querySelector(".snipo-open-notion-svg").classList.remove("snipo-open-notion-svg"),n.querySelector("svg").style.display="none",o=window.location.href.match(/watch\?/),i=window.location.href.match(/playlist\?/),o||i){e.next=13;break}return e.abrupt("return");case 13:if(s=new URL(location.href).searchParams,c=s.get("list")||"",l=Ze(c),p=s.get("v")||"",d={id:l?c:"",title:"",videos:[]},m={id:p,title:"",channelId:"",channelTitle:"",publishedDateText:"",viewCountText:"",lengthSeconds:"",charters:[]},!o||l){e.next=32;break}if(!R()){e.next=27;break}return document.querySelector("html").setAttribute("snipo-video-data",JSON.stringify({ytcfg,videoId:p})),document.querySelector("html").setAttribute("snipo-fetch-options","get_video_data"),h=function(e){e.forEach(function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(["snipo-video-response"].includes(t.attributeName)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ze(p,JSON.parse(document.querySelector("html").getAttribute("snipo-video-response")));case 4:m=e.sent,chrome.runtime.sendMessage({videoData:m,playlistData:d,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:r,type:"youtube"},(function(e){"error"in e&&alert(e.error),n.querySelector(".ytd-item-section-renderer").style.display="none",n.querySelector("svg").style.display="block",n.classList.remove("snipo-loading")})),app.analytics.track("open_notion"),f.disconnect();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},(f=new MutationObserver(h)).observe(document.querySelector("html"),{attributes:!0}),e.abrupt("return");case 27:return e.next=29,ze(p);case 29:m=e.sent,e.next=52;break;case 32:if(!o||!l){e.next=48;break}if(!R()){e.next=40;break}return document.querySelector("html").setAttribute("snipo-playlist-data",JSON.stringify({browseId:"VL"+c,videoId:p,ytcfg})),document.querySelector("html").setAttribute("snipo-fetch-options","get_playlist_data"),y=function(e){e.forEach(function(){var e=t(a().mark((function e(t){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(["snipo-playlist-response"].includes(t.attributeName)){e.next=2;break}return e.abrupt("return");case 2:return o=JSON.parse(document.querySelector("html").getAttribute("snipo-playlist-response")),e.next=5,Ge(c,o.playlistData);case 5:return d=e.sent,e.next=8,ze(p,o.videoData);case 8:m=e.sent,delete d.continuation,chrome.runtime.sendMessage({videoData:m,playlistData:d,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:r,type:"youtube"},(function(e){"error"in e&&alert(e.error),n.querySelector(".ytd-item-section-renderer").style.display="none",n.querySelector("svg").style.display="block",n.classList.remove("snipo-loading")})),app.analytics.track("open_notion"),v.disconnect();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},(v=new MutationObserver(y)).observe(document.querySelector("html"),{attributes:!0}),e.abrupt("return");case 40:return e.next=42,ze(p);case 42:return m=e.sent,e.next=45,Ge(c);case 45:d=e.sent,e.next=52;break;case 48:if(!i&&!l){e.next=52;break}return e.next=51,Ge(c);case 51:d=e.sent;case 52:g=d.continuation,delete d.continuation,chrome.runtime.sendMessage({videoData:m,playlistData:d,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:r,type:"youtube"},function(){var e=t(a().mark((function e(t){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"error"in t&&alert(t.error),n.querySelector(".ytd-item-section-renderer").style.display="none",n.querySelector("svg").style.display="block",n.classList.remove("snipo-loading"),r=0;case 5:if(!g||R()){e.next=15;break}return e.next=8,Je(g,d);case 8:return o=e.sent,e.next=11,u(o.playlistData,m,"youtube",r);case 11:g=o.continuation,r++,e.next=5;break;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),app.analytics.track("open_notion");case 56:case"end":return e.stop()}}),e,this)}))),Be.apply(this,arguments)}function Ze(e){return 0===e.indexOf("WL")||0===e.indexOf("PL")}function ze(e){return Fe.apply(this,arguments)}function Fe(){return Fe=t(a().mark((function e(t){var n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g,b,x,w,k,S,T,O,E,q,R,I,A,P,L,C,j,M,N,D,V,U,H,B,Z,z,F,G,W,J,Q,X,Y,K,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,pe,de,me,he,fe,ye,ve,ge,be,xe,we,ke,Se,_e,Te,Oe,Ee,qe,Re,Ie,Ae,Pe,Le,Ce,je,Me,Ne,De,Ue,He=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie=He.length>1&&void 0!==He[1]?He[1]:{},se="",document.querySelector('[role="main"] video')&&(se=parseInt(document.querySelector('[role="main"] video').duration||"")+""),ce={id:t,title:"",channelId:"",channelTitle:"",publishedDateText:"",viewCountText:"",charters:[],lengthSeconds:se},0!==Object.keys(ie).length){e.next=16;break}return e.next=7,le(t);case 7:return pe=e.sent,e.next=10,pe.json();case 10:ie=e.sent,activeTranscriptCodes=[],activeTranscriptApiParams="",activeCreateBackstagePostParams="",de=Ve((null===(ue=ie)||void 0===ue?void 0:ue.engagementPanels)||[]);try{for(de.s();!(me=de.n()).done;)"engagement-panel-searchable-transcript"==(null==(ye=me.value)||null===(he=ye.engagementPanelSectionListRenderer)||void 0===he?void 0:he.panelIdentifier)&&(activeTranscriptApiParams=null==ye||null===(ve=ye.engagementPanelSectionListRenderer)||void 0===ve||null===(ge=ve.content)||void 0===ge||null===(be=ge.continuationItemRenderer)||void 0===be||null===(xe=be.continuationEndpoint)||void 0===xe||null===(we=xe.saveButton)||void 0===we?void 0:we.params),"engagement-panel-clip-create"==(null==ye||null===(fe=ye.engagementPanelSectionListRenderer)||void 0===fe?void 0:fe.panelIdentifier)&&(activeCreateBackstagePostParams=null==ye||null===(ke=ye.engagementPanelSectionListRenderer)||void 0===ke||null===(Se=ke.content)||void 0===Se||null===(_e=Se.clipSectionRenderer)||void 0===_e||null===(Te=_e.contents[0])||void 0===Te||null===(Oe=Te.clipCreationRenderer)||void 0===Oe||null===(Ee=Oe.saveButton)||void 0===Ee||null===(qe=Ee.buttonRenderer)||void 0===qe||null===(Re=qe.command)||void 0===Re||null===(Ie=Re.createBackstagePostEndpoint)||void 0===Ie?void 0:Ie.createBackstagePostParams)}catch(e){de.e(e)}finally{de.f()}case 16:Ae=(null===(n=ie)||void 0===n||null===(r=n.playerOverlays)||void 0===r||null===(o=r.playerOverlayRenderer)||void 0===o||null===(i=o.decoratedPlayerBarRenderer)||void 0===i||null===(s=i.decoratedPlayerBarRenderer)||void 0===s||null===(c=s.playerBar)||void 0===c||null===(l=c.multiMarkersPlayerBarRenderer)||void 0===l?void 0:l.markersMap)||[],ce.title=(null===(u=ie)||void 0===u||null===(p=u.contents)||void 0===p||null===(d=p.twoColumnWatchNextResults)||void 0===d||null===(m=d.results)||void 0===m||null===(h=m.results)||void 0===h||null===(f=h.contents[0])||void 0===f||null===(y=f.videoPrimaryInfoRenderer)||void 0===y||null===(v=y.title)||void 0===v||null===(g=v.runs[0])||void 0===g?void 0:g.text)||document.title,ce.channelId=(null===(b=ie)||void 0===b||null===(x=b.contents)||void 0===x||null===(w=x.twoColumnWatchNextResults)||void 0===w||null===(k=w.results)||void 0===k||null===(S=k.results)||void 0===S||null===(T=S.contents[1])||void 0===T||null===(O=T.videoSecondaryInfoRenderer)||void 0===O||null===(E=O.owner)||void 0===E||null===(q=E.videoOwnerRenderer)||void 0===q||null===(R=q.navigationEndpoint)||void 0===R||null===(I=R.browseEndpoint)||void 0===I?void 0:I.browseId)||"",ce.channelTitle=(null===(A=ie)||void 0===A||null===(P=A.contents)||void 0===P||null===(L=P.twoColumnWatchNextResults)||void 0===L||null===(C=L.results)||void 0===C||null===(j=C.results)||void 0===j||null===(M=j.contents[1])||void 0===M||null===(N=M.videoSecondaryInfoRenderer)||void 0===N||null===(D=N.owner)||void 0===D||null===(V=D.videoOwnerRenderer)||void 0===V||null===(U=V.title)||void 0===U||null===(H=U.runs[0])||void 0===H?void 0:H.text)||"",ce.publishedDateText=(null===(B=ie)||void 0===B||null===(Z=B.contents)||void 0===Z||null===(z=Z.twoColumnWatchNextResults)||void 0===z||null===(F=z.results)||void 0===F||null===(G=F.results)||void 0===G||null===(W=G.contents[0])||void 0===W||null===(J=W.videoPrimaryInfoRenderer)||void 0===J||null===(Q=J.dateText)||void 0===Q?void 0:Q.simpleText)||"",ce.viewCountText=(null===(X=ie)||void 0===X||null===(Y=X.contents)||void 0===Y||null===(K=Y.twoColumnWatchNextResults)||void 0===K||null===($=K.results)||void 0===$||null===(ee=$.results)||void 0===ee||null===(te=ee.contents[0])||void 0===te||null===(ne=te.videoPrimaryInfoRenderer)||void 0===ne||null===(re=ne.viewCount)||void 0===re||null===(ae=re.videoViewCountRenderer)||void 0===ae||null===(oe=ae.shortViewCount)||void 0===oe?void 0:oe.simpleText)||"",e.t0=a().keys(Ae);case 23:if((e.t1=e.t0()).done){e.next=32;break}if(Pe=e.t1.value,"DESCRIPTION_CHAPTERS"===Ae[Pe].key||"AUTO_CHAPTERS"===Ae[Pe].key){e.next=27;break}return e.abrupt("continue",23);case 27:Le=Ve(Ae[Pe].value.chapters);try{for(Le.s();!(Ce=Le.n()).done;)Ue=Ce.value,ce.charters.push({title:(null==Ue||null===(je=Ue.chapterRenderer)||void 0===je||null===(Me=je.title)||void 0===Me?void 0:Me.simpleText)||"",durationFormat:_(((null==Ue||null===(Ne=Ue.chapterRenderer)||void 0===Ne?void 0:Ne.timeRangeStartMillis)||0)/1e3),durationSec:((null==Ue||null===(De=Ue.chapterRenderer)||void 0===De?void 0:De.timeRangeStartMillis)||0)/1e3+""})}catch(e){Le.e(e)}finally{Le.f()}return e.abrupt("break",32);case 32:return e.abrupt("return",ce);case 33:case"end":return e.stop()}}),e)}))),Fe.apply(this,arguments)}function Ge(e){return We.apply(this,arguments)}function We(){return We=t(a().mark((function e(t){var n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g,b,x,w,k,S,_,T,O,E,q,R,I=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=I.length>1&&void 0!==I[1]?I[1]:{},f={id:t,title:"",videos:[],lengthSeconds:0},0!==Object.keys(h).length){e.next=9;break}return e.next=5,se("VL"+t,"");case 5:return y=e.sent,e.next=8,be(y);case 8:h=e.sent;case 9:return 0===(v=(null===(n=h)||void 0===n||null===(r=n.contents)||void 0===r||null===(o=r.twoColumnBrowseResultsRenderer)||void 0===o||null===(i=o.tabs[0])||void 0===i||null===(s=i.tabRenderer)||void 0===s||null===(c=s.content)||void 0===c||null===(l=c.sectionListRenderer)||void 0===l||null===(u=l.contents[0])||void 0===u||null===(p=u.itemSectionRenderer)||void 0===p||null===(d=p.contents[0])||void 0===d||null===(m=d.playlistVideoListRenderer)||void 0===m?void 0:m.contents)||[]).length&&(v=(null===(g=h)||void 0===g||null===(b=g.contents)||void 0===b||null===(x=b.twoColumnBrowseResultsRenderer)||void 0===x||null===(w=x.tabs[0])||void 0===w||null===(k=w.tabRenderer)||void 0===k||null===(S=k.content)||void 0===S||null===(_=S.sectionListRenderer)||void 0===_||null===(T=_.contents[1])||void 0===T||null===(O=T.itemSectionRenderer)||void 0===O||null===(E=O.contents[0])||void 0===E||null===(q=E.playlistVideoListRenderer)||void 0===q?void 0:q.contents)||[]),R=new Set,v.forEach((function(e){var t;if("continuationItemRenderer"in e&&(f.continuation=e.continuationItemRenderer.continuationEndpoint.continuationCommand.token),"playlistVideoRenderer"in e){var n,r,a,o,i,s,c,l,u,p,d,m,h,y=(null==e||null===(t=e.playlistVideoRenderer)||void 0===t?void 0:t.videoId)||"";if(!R.has(y))f.videos.push({id:y,title:(null==e||null===(n=e.playlistVideoRenderer)||void 0===n||null===(r=n.title)||void 0===r||null===(a=r.runs[0])||void 0===a?void 0:a.text)||"",lengthSeconds:(null==e||null===(o=e.playlistVideoRenderer)||void 0===o?void 0:o.lengthSeconds)||"0",channelTitle:(null==e||null===(i=e.playlistVideoRenderer)||void 0===i||null===(s=i.shortBylineText)||void 0===s||null===(c=s.runs[0])||void 0===c?void 0:c.text)||"",channelId:null==e||null===(l=e.playlistVideoRenderer)||void 0===l||null===(u=l.shortBylineText)||void 0===u||null===(p=u.runs[0])||void 0===p||null===(d=p.navigationEndpoint)||void 0===d||null===(m=d.browseEndpoint)||void 0===m?void 0:m.browseId,publishedDateText:"",viewCountText:"",charters:[]}),R.add(y),f.lengthSeconds+=parseInt((null==e||null===(h=e.playlistVideoRenderer)||void 0===h?void 0:h.lengthSeconds)||"0")}})),f.lengthSeconds=f.lengthSeconds+"",f.title=h.header.playlistHeaderRenderer.title.simpleText,e.abrupt("return",f);case 16:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}function Je(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=t(a().mark((function e(t,n){var r,o,i,s,c,l,u,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.videos=[],n.lengthSeconds=parseInt(n.lengthSeconds),r=5,o=new Set,i=100;case 5:if(!(""!=t&&r>0)){e.next=18;break}return r--,e.next=9,se("VL"+n.id,"",ytcfg.INNERTUBE_CONTEXT_HL,t);case 9:return l=e.sent,e.next=12,be(l);case 12:u=e.sent,p=(null==u||null===(s=u.onResponseReceivedActions[0])||void 0===s||null===(c=s.appendContinuationItemsAction)||void 0===c?void 0:c.continuationItems)||[],t="",p.forEach((function(e){var r,a;if("continuationItemRenderer"in e)t=e.continuationItemRenderer.continuationEndpoint.continuationCommand.token;else if("playlistVideoRenderer"in e){var s,c,l,u,p,d,m,h,f,y,v,g,b,x,w=(null==e||null===(r=e.playlistVideoRenderer)||void 0===r?void 0:r.videoId)||"";if(null!=e&&null!==(a=e.playlistVideoRenderer)&&void 0!==a&&a.isPlayable)if(!o.has(w))n.videos.push({id:(null==e||null===(s=e.playlistVideoRenderer)||void 0===s?void 0:s.videoId)||"",title:(null==e||null===(c=e.playlistVideoRenderer)||void 0===c||null===(l=c.title)||void 0===l||null===(u=l.runs[0])||void 0===u?void 0:u.text)||"",lengthSeconds:(null==e||null===(p=e.playlistVideoRenderer)||void 0===p?void 0:p.lengthSeconds)||"0",channelTitle:(null==e||null===(d=e.playlistVideoRenderer)||void 0===d||null===(m=d.shortBylineText)||void 0===m||null===(h=m.runs[0])||void 0===h?void 0:h.text)||"",channelId:null==e||null===(f=e.playlistVideoRenderer)||void 0===f||null===(y=f.shortBylineText)||void 0===y||null===(v=y.runs[0])||void 0===v||null===(g=v.navigationEndpoint)||void 0===g||null===(b=g.browseEndpoint)||void 0===b?void 0:b.browseId,publishedDateText:"",viewCountText:"",charters:[],index:i}),i++,o.add(w),n.lengthSeconds+=parseInt((null==e||null===(x=e.playlistVideoRenderer)||void 0===x?void 0:x.lengthSeconds)||"0")}})),e.next=5;break;case 18:return n.lengthSeconds=n.lengthSeconds+"",e.abrupt("return",{playlistData:n,continuation:t});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ke(){return $e.apply(this,arguments)}function $e(){return $e=t(a().mark((function e(){var n,r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){e.forEach(t(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(),setTimeout((function(){for(var e=document.querySelectorAll(".snipo-join-patreon"),t=0;t<e.length;t++)e[t].remove();document.querySelector(".snipo-join-patreon-top")&&document.querySelector(".snipo-join-patreon-top").remove(),document.querySelector('[role="main"] #upload-info .ytd-channel-name.ytd-channel-name.complex-string a[href="/@SnipoHQ"]')&&(document.querySelector('[role="main"] #sponsor-button').innerHTML='<div class="snipo-join-patreon style-scope ytd-video-owner-renderer" button-renderer="" button-next="">\x3c!--css-build:shady--\x3e<button class="yt-spec-button-shape-next yt-spec-button-shape-next--outline yt-spec-button-shape-next--mono yt-spec-button-shape-next--size-m " aria-label="Join this channel" style=""><div class="cbox yt-spec-button-shape-next__button-text-content"><span class="yt-core-attributed-string yt-core-attributed-string--white-space-no-wrap" role="text">Join</span></div><yt-touch-feedback-shape style="border-radius: inherit;"><div class="yt-spec-touch-feedback-shape yt-spec-touch-feedback-shape--touch-response" aria-hidden="true"><div class="yt-spec-touch-feedback-shape__stroke" style=""></div><div class="yt-spec-touch-feedback-shape__fill" style=""></div></div></yt-touch-feedback-shape></button><tp-yt-paper-tooltip fit-to-visible-bounds="" offset="8" disable-upgrade=""> </tp-yt-paper-tooltip></div>')}),1e3),e.next=4,J({cmd:"notion-is-open"});case 4:if(e.sent.status){e.next=7;break}return e.abrupt("return");case 7:return t=new URL(location.href).searchParams,n=t.get("list")||"",r=t.get("v")||"",e.next=12,N(["active_playlist","active_playlist_video"]);case 12:o=e.sent,n===o.active_playlist&&r!=o.active_playlist_video&&(document.querySelector('[role="main"] .snipo-open-notion').classList.add("snipo-reload-playlist"),document.querySelector('[role="main"] .snipo-open-notion').click());case 14:case"end":return e.stop()}}),e)}))))},new MutationObserver(n).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),R()&&(r=function(e){e.forEach(function(){var e=t(a().mark((function e(t){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(["snipo-transcript-response","snipo-clip-response"].includes(t.attributeName)){e.next=2;break}return e.abrupt("return");case 2:if("snipo-clip-response"!=t.attributeName){e.next=8;break}return chrome.storage.local.set({cmdRes:JSON.parse(document.querySelector("html").getAttribute("snipo-clip-response"))}),n=new URL(location.href).searchParams,e.next=7,c({time:parseFloat(document.documentElement.querySelector('[role="main"] video').currentTime).toFixed(0),action:"clip",contentId:n.get("v")||""});case 7:return e.abrupt("return");case 8:return chrome.storage.local.set({cmdRes:JSON.parse(document.querySelector("html").getAttribute("snipo-transcript-response"))}),r=document.documentElement.querySelector('[role="main"] video').currentTime,o=new URL(location.href).searchParams,e.next=13,c({time:parseFloat(r).toFixed(0),action:"transcript",contentId:o.get("v")||""});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},new MutationObserver(r).observe(document.querySelector("html"),{attributes:!0})),S("click",".snipo-open-notion",He),S("click",".snipo-join-patreon",function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),t.preventDefault(),e.next=4,J({cmd:"open-premium-popup"});case 4:app.analytics.track("open_join_premium");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ve(),ge(),setTimeout((function(){document.querySelector('[role="main"] #upload-info .ytd-channel-name.ytd-channel-name.complex-string a[href="/@SnipoHQ"]')&&(document.querySelector('[role="main"] #sponsor-button').innerHTML='<div class="snipo-join-patreon style-scope ytd-video-owner-renderer" button-renderer="" button-next="">\x3c!--css-build:shady--\x3e<button class="yt-spec-button-shape-next yt-spec-button-shape-next--outline yt-spec-button-shape-next--mono yt-spec-button-shape-next--size-m " aria-label="Join this channel" style=""><div class="cbox yt-spec-button-shape-next__button-text-content"><span class="yt-core-attributed-string yt-core-attributed-string--white-space-no-wrap" role="text">Join</span></div><yt-touch-feedback-shape style="border-radius: inherit;"><div class="yt-spec-touch-feedback-shape yt-spec-touch-feedback-shape--touch-response" aria-hidden="true"><div class="yt-spec-touch-feedback-shape__stroke" style=""></div><div class="yt-spec-touch-feedback-shape__fill" style=""></div></div></yt-touch-feedback-shape></button><tp-yt-paper-tooltip fit-to-visible-bounds="" offset="8" disable-upgrade=""> </tp-yt-paper-tooltip></div>')}),1e3),o=new URL(location.href).searchParams,i=o.get("v")||"",(s=document.createElement("div")).classList.add("snipo-join-patreon","snipo-join-patreon-top","ytp-paid-content-overlay"),s.style="animation: moveToRight 2s ease-in-out; animation-delay: 0ms;",s.innerHTML='<style> @keyframes moveToRight { 0% { transform: translateX(-300px); } 100% { transform: translateX(initial); } } </style> <a style="border-left: 4px solid red" class="ytp-paid-content-overlay-link" target="_blank" href="#"><div class="ytp-paid-content-overlay-icon"><svg fill="none" height="100%" viewBox="0 0 24 24" width="100%"><path fill="currentColor" d="M7.5 5.6L5 7l1.4-2.5L5 2l2.5 1.4L10 2L8.6 4.5L10 7L7.5 5.6m12 9.8L22 14l-1.4 2.5L22 19l-2.5-1.4L17 19l1.4-2.5L17 14l2.5 1.4M22 2l-1.4 2.5L22 7l-2.5-1.4L17 7l1.4-2.5L17 2l2.5 1.4L22 2m-8.66 10.78l2.44-2.44l-2.12-2.12l-2.44 2.44l2.12 2.12m1.03-5.49l2.34 2.34c.39.37.39 1.02 0 1.41L5.04 22.71c-.39.39-1.04.39-1.41 0l-2.34-2.34c-.39-.37-.39-1.02 0-1.41L12.96 7.29c.39-.39 1.04-.39 1.41 0Z"></path></svg></div><div class="ytp-paid-content-overlay-text">Unlock Premium with 25% discount✨</div></a>',"ZOfqrTtkdiU"===i&&setTimeout((function(){"ZOfqrTtkdiU"===(new URL(location.href).searchParams.get("v")||"")&&(document.querySelector('[role="main"] .ytp-spinner').parentNode.insertBefore(s,document.querySelector('[role="main"] .ytp-storyboard-framepreview')),setTimeout((function(){document.querySelector('[role="main"] .snipo-join-patreon-top')&&document.querySelector('[role="main"] .snipo-join-patreon-top').remove()}),1e4))}),5e4),chrome.storage.onChanged.addListener(function(){var e=t(a().mark((function e(t,n){var r,o,i,s,l,u,p,m,h,f,y,v,g,b,x,w,k,S,_,T,O,E,q,I,A,P,L,C,j,M,N,D,V,U,H,B,Z,F,G,W,Q,K,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,de,he,ye,ve,ge,be,xe,we;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sync"!==n){e.next=2;break}return e.abrupt("return");case 2:if(!("action"in t)||!("newValue"in t.action)){e.next=165;break}return chrome.storage.local.remove("action"),e.next=6,J({cmd:"youtube-active-tab"});case 6:if(e.sent.status){e.next=9;break}return e.abrupt("return");case 9:if("time"!=t.action.newValue.cmd){e.next=21;break}if(!document.documentElement.querySelector('[role="main"] video')){e.next=20;break}return r=document.documentElement.querySelector('[role="main"] video').currentTime,(o=new URL(location.href)).searchParams.delete("t"),o.hash="",chrome.storage.local.set({cmdRes:{link:o.href,time:document.documentElement.querySelector('[role="main"] video').currentTime}}),i=parseFloat(r).toFixed(0),s=new URL(location.href).searchParams,e.next=20,c({time:i,action:"time",contentId:s.get("v")||""});case 20:app.analytics.track("notion_action_time");case 21:if("screen"!=t.action.newValue.cmd){e.next=29;break}if(et(),!document.documentElement.querySelector('[role="main"] video')){e.next=28;break}return l=parseFloat(document.documentElement.querySelector('[role="main"] video').currentTime).toFixed(0),u=new URL(location.href).searchParams,e.next=28,c({time:l,action:"screen",contentId:u.get("v")||""});case 28:app.analytics.track("notion_action_screen");case 29:if("transcript"!=t.action.newValue.cmd){e.next=82;break}if(!document.documentElement.querySelector('[role="main"] video')){e.next=81;break}if(p=document.documentElement.querySelector('[role="main"] video').currentTime,m=Math.floor(p),h=1e3*(m-1),f=1e3*(m+(t.action.newValue.seconds||30)),"Last"===t.action.newValue.directionOfRange&&(h=1e3*(m-(t.action.newValue.seconds||30)),f=1e3*m),"Between"===t.action.newValue.directionOfRange&&(h=1e3*(m-t.action.newValue.beforeSeconds),f=1e3*(m+t.action.newValue.afterSeconds)),activeTranscriptApiParams||document.querySelector("html").getAttribute("snipo-active-transcript-api")){e.next=53;break}if(R()){e.next=50;break}return y=new URL(location.href).searchParams,e.next=42,le(y.get("v")||"");case 42:return v=e.sent,e.next=45,v.json();case 45:g=e.sent,activeTranscriptCodes=[],activeTranscriptApiParams="",b=Xe((null==g?void 0:g.engagementPanels)||[]);try{for(b.s();!(x=b.n()).done;)"engagement-panel-searchable-transcript"==(null==(k=x.value)||null===(w=k.engagementPanelSectionListRenderer)||void 0===w?void 0:w.panelIdentifier)&&(activeTranscriptApiParams=null==k||null===(S=k.engagementPanelSectionListRenderer)||void 0===S||null===(_=S.content)||void 0===_||null===(T=_.continuationItemRenderer)||void 0===T||null===(O=T.continuationEndpoint)||void 0===O||null===(E=O.getTranscriptEndpoint)||void 0===E?void 0:E.params)}catch(e){b.e(e)}finally{b.f()}case 50:if(activeTranscriptApiParams||document.querySelector("html").getAttribute("snipo-active-transcript-api")){e.next=53;break}return chrome.storage.local.set({cmdRes:{alert:"YouTube Transcript is not available for the video!"}}),e.abrupt("return");case 53:if(0!==activeTranscriptCodes.length){e.next=67;break}if(!R()){e.next=58;break}return document.querySelector("html").setAttribute("snipo-video-transcript",JSON.stringify({ytcfg})),document.querySelector("html").setAttribute("snipo-fetch-options","get_transcript"),e.abrupt("return");case 58:return e.next=60,pe();case 60:return q=e.sent,e.next=63,q.json();case 63:I=e.sent,A=I.actions[0].updateEngagementPanelAction.content.transcriptRenderer.content.transcriptSearchPanelRenderer.body.transcriptSegmentListRenderer.initialSegments,activeTranscriptCodes=[],A.forEach((function(e){"transcriptSegmentRenderer"in e&&activeTranscriptCodes.push({startMs:e.transcriptSegmentRenderer.startMs,endMs:e.transcriptSegmentRenderer.endMs,startTimeText:e.transcriptSegmentRenderer.startTimeText.simpleText,text:e.transcriptSegmentRenderer.snippet.runs?e.transcriptSegmentRenderer.snippet.runs[0].text:""})}));case 67:for(j in P=activeTranscriptCodes.filter((function(e){return h<=e.startMs&&e.endMs<=f})),L=0,C="",P)0===L&&(L=P[j].startMs),C+=P[j].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";if(""!==C.trim()){e.next=74;break}return alert("The transcript is not available for the part"),e.abrupt("return");case 74:return(M=new URL(location.href)).searchParams.delete("t"),M.hash="",chrome.storage.local.set({cmdRes:{transcriptText:C,link:M.href,startTime:L/1e3}}),N=new URL(location.href).searchParams,e.next=81,c({time:parseFloat(p).toFixed(0),action:"transcript",contentId:N.get("v")||""});case 81:app.analytics.track("notion_transcript");case 82:if("clip"!=t.action.newValue.cmd){e.next=159;break}return e.next=85,z();case 85:if(D=e.sent){e.next=89;break}return chrome.storage.local.set({cmdRes:{clipUrl:""}}),e.abrupt("return");case 89:return e.next=91,d(D);case 91:if(V=e.sent,V.payment&&("active"===V.payment.status||"free"===V.payment.status||new Date(V.payment.nextBillDate)>=new Date)||!1){e.next=98;break}return e.next=96,J({cmd:"open-premium-popup"});case 96:return chrome.storage.local.set({cmdRes:{clipUrl:""}}),e.abrupt("return");case 98:if(null==timerRecordIndicator){e.next=126;break}if(document.documentElement.querySelector('[role="main"] .ytp-chrome-bottom').style.visibility="visible",U=1e3*parseInt(document.querySelector(".snipo-record-time").dataset.time),clearTimeout(timerRecordIndicator),document.querySelector(".snipo-recording").remove(),timerRecordIndicator=null,!R()){e.next=108;break}return document.querySelector("html").setAttribute("snipo-video-clip",JSON.stringify({ytcfg,startRangeRecord,durationSec:U})),document.querySelector("html").setAttribute("snipo-fetch-options","snipo_video_clip"),e.abrupt("return");case 108:return e.next=110,me(startRangeRecord,U);case 110:return H=e.sent,e.next=113,H.json();case 113:return B=e.sent,e.next=116,fe(B.actions[0].shareEntityServiceEndpoint.serializedShareEntity);case 116:return Z=e.sent,e.next=119,Z.json();case 119:return F=e.sent,(G=new URL(location.href)).searchParams.delete("t"),G.hash="",chrome.storage.local.set({cmdRes:{clipUrl:F.actions[0].openPopupAction.popup.unifiedSharePanelRenderer.contents[0].thirdPartyNetworkSection.copyLinkContainer.copyLinkRenderer.shortUrl,link:G.href,startTime:document.documentElement.querySelector('[role="main"] video').currentTime}}),startRangeRecord=0,e.abrupt("return");case 126:if(!document.documentElement.querySelector('[role="main"] video')){e.next=158;break}if(document.documentElement.querySelector('[role="main"] .ytp-chrome-bottom').style.visibility="hidden",(W=document.documentElement.querySelector('[role="main"] video')).playbackRate=1,W.play(),Q=W.currentTime,K=Math.floor(Q),startRangeRecord=1e3*K,timerRecordIndicator=Y(W),activeCreateBackstagePostParams||document.querySelector("html").getAttribute("snipo-active-backstage-api")){e.next=155;break}if(R()){e.next=146;break}return e.next=139,le("ytSLVs-Gxrk");case 139:return $=e.sent,e.next=142,$.json();case 142:ee=e.sent,activeCreateBackstagePostParams="",te=Xe((null==ee?void 0:ee.engagementPanels)||[]);try{for(te.s();!(ne=te.n()).done;)"engagement-panel-clip-create"==(null==(ae=ne.value)||null===(re=ae.engagementPanelSectionListRenderer)||void 0===re?void 0:re.panelIdentifier)&&(activeCreateBackstagePostParams=null==ae||null===(oe=ae.engagementPanelSectionListRenderer)||void 0===oe||null===(ie=oe.content)||void 0===ie||null===(se=ie.clipSectionRenderer)||void 0===se||null===(ce=se.contents[0])||void 0===ce||null===(ue=ce.clipCreationRenderer)||void 0===ue||null===(de=ue.saveButton)||void 0===de||null===(he=de.buttonRenderer)||void 0===he||null===(ye=he.command)||void 0===ye||null===(ve=ye.createBackstagePostEndpoint)||void 0===ve?void 0:ve.createBackstagePostParams)}catch(e){te.e(e)}finally{te.f()}case 146:if(activeCreateBackstagePostParams||document.querySelector("html").getAttribute("snipo-active-backstage-api")){e.next=155;break}return document.documentElement.querySelector('[role="main"] .ytp-chrome-bottom').style.visibility="visible",clearTimeout(timerRecordIndicator),timerRecordIndicator=null,document.querySelector(".snipo-recording")&&document.querySelector(".snipo-recording").remove(),startRangeRecord=0,chrome.storage.local.set({cmdRes:{alert:"The video is not supporting YouTube Clips!"}}),chrome.storage.local.set({cmdRes:{clipUrl:""}}),e.abrupt("return");case 155:return ge=new URL(location.href).searchParams,e.next=158,c({time:parseFloat(document.documentElement.querySelector('[role="main"] video').currentTime).toFixed(0),action:"clip",contentId:ge.get("v")||""});case 158:app.analytics.track("notion_clip");case 159:"pause"==t.action.newValue.cmd&&((be=document.documentElement.querySelector('[role="main"] video')).currentTime>0&&!be.paused&&!be.ended&&be.readyState>2?(be.pause(),app.analytics.track("notion_action_pause")):(be.play(),app.analytics.track("notion_action_play"))),"skip5s"==t.action.newValue.cmd&&(document.documentElement.querySelector('[role="main"] video').currentTime+=t.action.newValue.seconds||5,app.analytics.track("notion_action_skip")),"back5s"==t.action.newValue.cmd&&(document.documentElement.querySelector('[role="main"] video').currentTime-=t.action.newValue.seconds||5,app.analytics.track("notion_action_back")),"speed-inc"==t.action.newValue.cmd&&((xe=document.documentElement.querySelector('[role="main"] video')).playbackRate+=.25,X(xe),app.analytics.track("notion_action_speed_inc")),"speed-dec"==t.action.newValue.cmd&&((we=document.documentElement.querySelector('[role="main"] video')).playbackRate-=.25,X(we),app.analytics.track("notion_action_speed_dec")),"to_time"==t.action.newValue.cmd&&(document.documentElement.querySelector('[role="main"] video').currentTime=t.action.newValue.t,app.analytics.track("notion_action_speed_to_time"));case 165:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 16:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function et(){var e=document.querySelector('[role="main"] .video-stream'),t=e.currentTime,n=Math.floor(t/60);(t=Math.floor(t-60*n),n>60)&&(n-=60*Math.floor(n/60));var r=document.createElement("canvas");r.width=e.videoWidth,r.height=e.videoHeight,r.getContext("2d").drawImage(e,0,0,r.width,r.height),chrome.storage.local.set({cmdRes:{screen:r.toDataURL()}})}function tt(){return nt.apply(this,arguments)}function nt(){return(nt=t(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="promo_rating",e.next=3,H(["install_date",t,"notion_auth_token","auth_token"]);case 3:if(n=e.sent,r="install_date",!((n.notion_auth_token||n.auth_token)&&!n[t]&&!k("snipo"+t)&&n[r]<(new Date).getTime()-2592e5&&n[r]>(new Date).getTime()-6048e5)){e.next=11;break}return(o=document.createElement("div")).classList.add("snipo-promo","on"),o.innerHTML=rt(A()),e.next=11,j(t,o,5);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rt=function(e){return"".concat(at(e),'<div class="snipo-rate-extension-label-general"><span>').concat("Thank you for using our extension",'!</span></div><form>\n\t<div class="snipo-rate-extension-label"><span>').concat("Rate our extension",':</span></div>\n\t\t<div class="snipo-stars">\n        <input type="radio" name="star" class="snipo-star-1 snipo-promo-link" data-rating="1" id="snipo-star-1" />\n        <label class="snipo-star-1" for="snipo-star-1">1</label>\n        <input type="radio" name="star" class="snipo-star-2 snipo-promo-link" data-rating="2" id="snipo-star-2" />\n        <label class="snipo-star-2" for="snipo-star-2">2</label>\n        <input type="radio" name="star" class="snipo-star-3 snipo-promo-link" data-rating="3" id="snipo-star-3" />\n        <label class="snipo-star-3" for="snipo-star-3">3</label>\n        <input type="radio" name="star" class="snipo-star-4 snipo-promo-link" data-rating="4" id="snipo-star-4" />\n        <label class="snipo-star-4" for="snipo-star-4">4</label>\n        <input type="radio" name="star" class="snipo-star-5 snipo-promo-link" data-rating="5" data-href="').concat(e,'" id="snipo-star-5" />\n        <label class="snipo-star-5" for="snipo-star-5">5</label>\n        <span></span>\n    </div>\n</form></p>\n    </div>')},at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(ot(),'\n\t\t<div class="snipo-promo-header"><div class="title style-scope ytd-guide-entry-renderer" id="label" style="white-space: normal;">').concat(t,'\n\t\t\t<div class="snipo-promo-body"><img class="snipo-promo-img" src="').concat(chrome.runtime.getURL("/icon/chat.png"),'"></div>\n\t\t\t\t<a href="').concat(e,'" target="_blank">Snipo: Video Notes from YouTube to Notion</a><br>')};function ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<span class="snipo-close-popup '.concat(e,'"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope yt-icon" style="pointer-events: none;display: block;width: 24px;height: 24px;opacity: 0.6;fill: var(--yt-spec-text-primary);"><g class="style-scope yt-icon"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" class="style-scope yt-icon"></path></g></svg></span>')}function it(){return st.apply(this,arguments)}function st(){return(st=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="upd2",e.next=3,H(["install_date",t]);case 3:if(n=e.sent,r="install_date",!n[t]&&!k("snipo"+t)&&n[r]<(new Date).getTime()-12096e5&&n[r]>(new Date).getTime()-18144e5&&((o=document.createElement("div")).classList.add("snipo-promo","on"),o.innerHTML=ut("https://bit.ly/42TR03Z","Video Clips and Customizable Settings by Snipo 🚀","Watch a tutorial about the features💬"),j(t,o,2)),!n[t="upd3"]&&!k("snipo"+t)&&!n[t]&&n[r]<(new Date).getTime()-18144e5&&n[r]<(new Date).getTime()-24192e5&&((i=document.createElement("div")).classList.add("snipo-promo","on"),i.innerHTML=ut("https://bit.ly/3oawXPl","Introducing AI FlashCards instant learning from every site and video by Snipo🌟","Level Up Your Knowledge💡"),j(t,i,2)),!n[t="upd4"]&&!k("snipo"+t)&&!n[t]&&n[r]<(new Date).getTime()-24192e5&&((s=document.createElement("div")).classList.add("snipo-promo","on"),s.innerHTML=ut("https://bit.ly/3Dz2RsS","INTRODUCING 9 Integrations for Snipo 🚀","See what's new now!"),j(t,s,2)),ct()){e.next=12;break}return e.abrupt("return");case 12:if(!k("snipo"+(t="cm23"))){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,z();case 17:if(c=e.sent){e.next=21;break}return C("snipo"+t,1,{expires:31536e3,path:"/"}),e.abrupt("return");case 21:return e.next=23,d(c);case 23:if(l=e.sent,!(l.payment&&("active"===l.payment.status||"free"===l.payment.status||new Date(l.payment.nextBillDate)>=new Date)||!1)){e.next=28;break}return C("snipo"+t,1,{expires:31536e3,path:"/"}),e.abrupt("return");case 28:!n[t]&&!k("snipo"+t)&&!n[t]&&n[r]<(new Date).getTime()-6048e5&&((u=document.createElement("div")).classList.add("snipo-promo","on"),u.innerHTML=ut("BF","⏰ <strong>CYBER MONDAY</strong> on Snipo <strong>50% OFF</strong>","<strong>Get 6 months of Snipo free</strong> 🏷"),j(t,u,2));case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){var e=new Date;return 10===e.getMonth()&&27==e.getDate()&&2023===e.getFullYear()}function lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<span class="snipo-close-popup '.concat(e,'"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope yt-icon" style="pointer-events: none;display: block;width: 24px;height: 24px;opacity: 0.6;fill: var(--yt-spec-text-primary);"><g class="style-scope yt-icon"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" class="style-scope yt-icon"></path></g></svg></span>')}var ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Introducing YouTube Deck by PocketTube 🚀",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Watch a video about new features";return"".concat(lt(),'\n\t<div class="snipo-promo-header snipo-promo-link snipo-promo-link-clickable" data-href="').concat(e,'"><div class="title style-scope ytd-guide-entry-renderer" id="label" style="white-space: normal;">\n\t\t<br>\n\t\t<span><span style="margin-left: 8px;font-size: 16px;">').concat(t,'</span></span> <br><br>\n\t\t\t<span class="snipo-promo-button">\n\t\t\t\t<span style="vertical-align: middle; margin-left: 8px; ').concat(n?"font-size: medium; font-weight: 500;":"",'">').concat(n,"</span>\n\t\t\t</span>\n</div>\t\t")};function pt(){return dt.apply(this,arguments)}function dt(){return(dt=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this).classList.contains("snipo-loading")){e.next=3;break}return e.abrupt("return");case 3:if(t.classList.add("snipo-loading"),n=document.querySelector(".snipo-open-notion").classList.contains("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),t.querySelector(".ytd-item-section-renderer").style.display="flex",t.querySelector(".cource-snipo-notes").style.display="none",r=document.querySelector(".ud-component--course-taking--app[data-module-args]")){e.next=11;break}return e.abrupt("return");case 11:return o=JSON.parse(r.getAttribute("data-module-args")),e.next=14,fetch("https://"+location.host+"/api-2.0/courses/"+o.courseId+"/subscriber-curriculum-items/?page_size=1000&fields[lecture]=title,object_index,is_published,sort_order,created,asset,supplementary_assets,is_free&fields[quiz]=title,object_index,is_published,sort_order,type&fields[practice]=title,object_index,is_published,sort_order&fields[chapter]=title,object_index,is_published,sort_order&fields[asset]=title,filename,asset_type,status,time_estimation,is_external&caching_intent=True",{referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 14:return i=e.sent,e.next=17,i.json();case 17:if(s=e.sent,c={id:location.pathname.split("/").slice(2,3)[0]+"",title:document.querySelector('[name="title"]').getAttribute("content"),url:location.protocol+"//"+location.host+location.pathname.split("/").slice(0,-1).join("/"),coverURL:document.querySelector('[property="og:image"]').getAttribute("content"),videos:[],lengthSeconds:0},l="",u={},s.results.forEach((function(e){var t,n;"chapter"!==e._class?(c.videos.push({id:location.pathname.split("/").slice(2,4).join("/")+"/"+e._class+"/"+e.id,title:("lecture"===e._class?(null==e?void 0:e.object_index)+". ":"")+e.title,lengthSeconds:(null==e||null===(t=e.asset)||void 0===t?void 0:t.time_estimation)+""||"0",chapterTitle:l,url:location.protocol+"//"+location.host+location.pathname.split("/").slice(0,-1).join("/")+"/"+e.id}),c.lengthSeconds+=parseInt((null==e||null===(n=e.asset)||void 0===n?void 0:n.time_estimation)+""||"0"),u[e.id]=("lecture"===e._class?(null==e?void 0:e.object_index)+". ":"")+e.title):l=e.title})),c.lengthSeconds=c.lengthSeconds+"",(p=location.pathname.split("/").slice(-1)[0])in u){e.next=28;break}return alert("Snipo: the current lecture is not found"),app.analytics.track("lecture_not_found",{type:"udemy"}),e.abrupt("return");case 28:d={url:location.protocol+"//"+location.host+location.pathname,id:location.pathname.split("/").slice(2,6).join("/"),title:u[p]},chrome.runtime.sendMessage({videoData:d,playlistData:c,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:n,type:"udemy"},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),t.querySelector(".ytd-item-section-renderer").style.display="none",t.querySelector(".cource-snipo-notes").style.display="block",t.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:"udemy"});case 31:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var mt=n(277);function ht(e){chrome.storage.onChanged.addListener(function(){var n=t(a().mark((function t(n,r){var o,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("sync"!==r){t.next=2;break}return t.abrupt("return");case 2:if(!("action"in n)||!("newValue"in n.action)){t.next=64;break}return chrome.storage.local.remove("action"),t.next=6,J({cmd:"youtube-active-tab"});case 6:if(t.sent.status){t.next=9;break}return t.abrupt("return");case 9:if(o=document.documentElement.querySelector("video")){t.next=12;break}return t.abrupt("return");case 12:if(i=o.currentTime,"time"!=n.action.newValue.cmd){t.next=17;break}return t.next=16,e.timeHandler(i,e.integration);case 16:case 20:return t.abrupt("return");case 17:if("screen"!=n.action.newValue.cmd){t.next=21;break}return t.next=20,e.screenHandler(i,o,e.integration);case 21:if("pause"!=n.action.newValue.cmd){t.next=37;break}if(-1===location.host.indexOf(".udemy.com")){t.next=30;break}if(!document.querySelector('[data-purpose="play-button"]')){t.next=27;break}return document.querySelector('[data-purpose="play-button"]').click(),app.analytics.track("notion_action_pause"),t.abrupt("return");case 27:return document.querySelector('[data-purpose="pause-button"]').click(),app.analytics.track("notion_action_play"),t.abrupt("return");case 30:if(!ft(o)){t.next=34;break}return o.pause(),app.analytics.track("notion_action_pause"),t.abrupt("return");case 34:return o.play(),app.analytics.track("notion_action_play"),t.abrupt("return");case 37:if("skip5s"!=n.action.newValue.cmd){t.next=41;break}return o.currentTime+=n.action.newValue.seconds||5,app.analytics.track("notion_action_skip"),t.abrupt("return");case 41:if("back5s"!=n.action.newValue.cmd){t.next=45;break}return o.currentTime-=n.action.newValue.seconds||5,app.analytics.track("notion_action_back"),t.abrupt("return");case 45:if("speed-inc"!=n.action.newValue.cmd){t.next=50;break}return o.playbackRate+=.25,X(o),app.analytics.track("notion_action_speed_inc"),t.abrupt("return");case 50:if("speed-dec"!=n.action.newValue.cmd){t.next=55;break}return o.playbackRate-=.25,X(o),app.analytics.track("notion_action_speed_dec"),t.abrupt("return");case 55:if("to_time"!=n.action.newValue.cmd){t.next=59;break}return o.currentTime=n.action.newValue.t,app.analytics.track("notion_action_speed_to_time"),t.abrupt("return");case 59:if("transcript"!=n.action.newValue.cmd){t.next=64;break}return t.next=62,e.transciptHandler(i,n,e.integration);case 62:return app.analytics.track("notion_transcript"),t.abrupt("return");case 64:case"end":return t.stop()}}),t)})));return function(e,t){return n.apply(this,arguments)}}())}function ft(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}function yt(e,n,r){return function(){var o=t(a().mark((function t(o,i){var s,c,l,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e(),c=n(),l=r(),app.analytics.track("notion_action_time"),(u=new URL(location.href)).searchParams.delete("t"),u.searchParams.delete("autoplay"),u.searchParams.delete("list"),u.searchParams.delete("v"),u.hash="",chrome.storage.local.set({cmdRes:{link:u.href,time:o,playlistId:c,videoId:l}}),t.next=13,g({time:parseFloat(o).toFixed(0),contentId:s,action:"time"},i);case 13:case"end":return t.stop()}}),t)})));return function(e,t){return o.apply(this,arguments)}}()}function vt(e){return function(){var n=t(a().mark((function t(n,r,o){var i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e(),window.scrollTo(0,0),t.next=4,T(200);case 4:return chrome.runtime.sendMessage({cmd:"capture-tab"},(function(e){"error"in e&&alert(e.error);var t=e.image,n=window.devicePixelRatio,a=r.getBoundingClientRect(),o=a.width,i=a.height,s=document.createElement("canvas");s.width=Math.ceil(o*n),s.height=Math.ceil(i*n);var c=s.getContext("2d"),l=new Image,u=a.left,p=a.top;l.onload=function(){c.drawImage(l,Math.ceil(u*n),Math.ceil(p*n),Math.ceil(o*n),Math.ceil(i*n),0,0,Math.ceil(o*n),Math.ceil(i*n)),chrome.storage.local.set({cmdRes:{screen:s.toDataURL()}})},l.src=t})),t.next=7,g({time:parseFloat(n).toFixed(0),contentId:i,action:"screen"},o);case 7:app.analytics.track("notion_action_screen");case 8:case"end":return t.stop()}}),t)})));return function(e,t,r){return n.apply(this,arguments)}}()}function gt(e){return function(){var n=t(a().mark((function t(n,r,o){var i,s,c,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e(),s=Math.floor(n/60),n=Math.floor(n-60*s),s>60&&(c=Math.floor(s/60),s-=60*c),(l=document.createElement("canvas")).width=r.videoWidth,l.height=r.videoHeight,l.getContext("2d").drawImage(r,0,0,l.width,l.height),chrome.storage.local.set({cmdRes:{screen:l.toDataURL()}}),t.next=11,g({time:parseFloat(n).toFixed(0),action:"screen",contentId:i},o);case 11:app.analytics.track("notion_action_screen");case 12:case"end":return t.stop()}}),t)})));return function(e,t,r){return n.apply(this,arguments)}}()}function bt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(){return{videos:document.querySelectorAll("video"),integration:"udemy",timeHandler:yt((function(){return location.pathname.split("/").slice(-4).join("/")}),(function(){return location.pathname.split("/").slice(2,3)[0]+""}),(function(){return location.pathname.split("/").slice(-1)[0]})),screenHandler:Ot,transciptHandler:Rt}}function _t(){return Tt.apply(this,arguments)}function Tt(){return(Tt=t(a().mark((function e(){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=St(),location.hash&&0===location.hash.indexOf("#snipo-offset=")&&C("snipo-offset",location.hash.replace("#snipo-offset=",""),{expires:31536e3,path:"/"}),r="",new MutationObserver((function(e){e.forEach(t(a().mark((function e(){var t,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(location.pathname===r){e.next=16;break}return e.next=3,J({cmd:"notion-is-open"});case 3:if(e.sent.status){e.next=6;break}return e.abrupt("return");case 6:if(document.querySelector(".ud-component--course-taking--app[data-module-args]")&&-1!==location.pathname.indexOf("/course")){e.next=9;break}return e.abrupt("return");case 9:return t=location.pathname.split("/").slice(2,3)[0]+"",n=location.pathname.split("/").slice(-1)[0],e.next=13,N(["active_playlist","active_playlist_video"]);case 13:o=e.sent,t===o.active_playlist&&n!=o.active_playlist_video&&(document.querySelector(".snipo-open-notion").classList.add("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").click()),r=location.pathname;case 16:case"end":return e.stop()}}),e)}))))})).observe(document.querySelector("body"),{childList:!0}),S("click",".snipo-open-notion",pt),(o=document.createElement("div")).innerHTML='<div data-index="0"><div class="ud-nav-button-container" style=" flex: 1 1 auto; "><h2><button type="button" id="tabs--1-tab-0" aria-selected="false" role="tab" class="ud-btn ud-btn-large ud-btn-ghost ud-heading-md ud-nav-button" tabindex="-1" style="border: 0; background: 0 0; padding: 0.8rem 0.4rem; outline-offset: -0.4rem!important; color: var(--tabs-nav-color-default); position: relative; width: 100%; "><svg style="display: none; width: 20px;height: 20px;" aria-label="Loading" role="img" focusable="false" class="ytd-item-section-renderer ud-icon udlite-icon ud-icon-xxlarge udlite-icon-xxlarge ud-loader udlite-loader"><use xlink:href="#icon-loading-spinner"></use></svg><svg class="cource-snipo-notes" xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 22 22" focusable="false" class="style-scope yt-icon" style="floar:right; pointer-events: none;display: inline;width: 20px;height: 20px;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg><span style="margin-left: 10px;">Snipo notes</span></button></h2></div></div>',o.classList.add("snipo-open-notion"),!R()){e.next=12;break}return e.next=12,T(100);case 12:if(-1!==location.pathname.indexOf("/course")){e.next=14;break}return e.abrupt("return");case 14:document.querySelector('[data-purpose="scroll-port"]')?(document.querySelector('[data-purpose="scroll-port"]').appendChild(o),ne(n.videos)):setTimeout((function(){document.querySelector('[data-purpose="scroll-port"]')&&(document.querySelector('[data-purpose="scroll-port"]').appendChild(o),ne(n.videos))}),1e3),ht(kt({},n));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t,n){return Et.apply(this,arguments)}function Et(){return(Et=t(a().mark((function e(t,n,r){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!0,!(n.mediaKeys instanceof MediaKeys))try{qt(n),o=!1}catch(e){console.log(e)}if(!o){e.next=7;break}return window.scrollTo(0,0),e.next=6,T(200);case 6:chrome.runtime.sendMessage({cmd:"capture-tab"},(function(e){"error"in e&&alert(e.error);var t=e.image,r=window.devicePixelRatio,a=n.getBoundingClientRect(),o=a.width,i=a.height,s=document.createElement("canvas");s.crossOrigin="anonymous";var c,l=a.left;if(document.querySelector("header")?(c=55,document.querySelectorAll('[class^="app--row-content"]').length&&(c=document.querySelectorAll('[class^="app--row-content"]')[0].getBoundingClientRect().height)):(c=44,document.querySelectorAll('[class^="curriculum-item-view--mobile-header-bar"]').length&&(c=document.querySelectorAll('[class^="curriculum-item-view--mobile-header-bar"]')[0].getBoundingClientRect().height)),a.height>n.videoHeight){var u=(a.height-n.videoHeight)*r;c+=u/2,i-=u}var p=parseInt(k("snipo-offset")||0);(p>0||p<0)&&(c+=p,i-=2*p),s.width=Math.ceil(o*r),s.height=Math.ceil(i*r);var d=s.getContext("2d"),m=new Image;m.onload=function(){d.drawImage(m,Math.ceil(l*r),Math.ceil(c*r),Math.ceil(o*r),Math.ceil(i*r),0,0,Math.ceil(o*r),Math.ceil(i*r)),chrome.storage.local.set({cmdRes:{screen:s.toDataURL()}})},m.src=t}));case 7:return e.next=9,g({time:parseFloat(t).toFixed(0),action:"screen",contentId:location.pathname.split("/").slice(-4).join("/")},r);case 9:app.analytics.track("notion_action_screen");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e){var t=e.currentTime,n=Math.floor(t/60);(t=Math.floor(t-60*n),n>60)&&(n-=60*Math.floor(n/60));var r=document.createElement("canvas");r.crossOrigin="anonymous",r.width=e.videoWidth,r.height=e.videoHeight,r.getContext("2d").drawImage(e,0,0,r.width,r.height),chrome.storage.local.set({cmdRes:{screen:r.toDataURL()}})}function Rt(e,t,n){return It.apply(this,arguments)}function It(){return(It=t(a().mark((function e(t,n,r){var o,i,s,c,l,u,p,d,m,h,f,y,v,b,x,w,k,S,_,T,O,E,q,R,I;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=new URL(location.href)).searchParams.delete("t"),o.searchParams.delete("list"),o.searchParams.delete("v"),o.hash="",i=parseInt(parseFloat(t).toFixed(0)),s=i-1,c=i+(n.action.newValue.seconds||30),"Last"===n.action.newValue.directionOfRange&&(s=i-(n.action.newValue.seconds||30),c=i),"Between"===n.action.newValue.directionOfRange&&(s=i-n.action.newValue.beforeSeconds,c=i+n.action.newValue.afterSeconds),l=document.querySelector(".ud-component--course-taking--app[data-module-args]")){e.next=13;break}return e.abrupt("return");case 13:return u=location.pathname.split("/").slice(2,3)[0]+"",p=location.pathname.split("/").slice(-1)[0],d=JSON.parse(l.getAttribute("data-module-args")),e.next=18,fetch("https://"+location.host+"/api-2.0/users/me/subscribed-courses/"+d.courseId+"/lectures/"+p+"/?fields[lecture]=asset,description,download_url,is_free,last_watched_second&fields[asset]=asset_type,length,media_license_token,course_is_drmed,media_sources,captions,thumbnail_sprite,slides,slide_urls,download_urls,external_url",{referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 18:return m=e.sent,e.next=21,m.json();case 21:if(h=e.sent,activeTranscriptCodes=[],0!=h.asset.captions.length){e.next=26;break}return chrome.storage.local.set({cmdRes:{alert:"Udemy Transcript is not available for the video!"}}),e.abrupt("return");case 26:f=bt(h.asset.captions),e.prev=27,f.s();case 29:if((y=f.n()).done){e.next=45;break}if("en_US"==(v=y.value).locale_id){e.next=33;break}return e.abrupt("continue",43);case 33:return e.next=35,fetch(v.url);case 35:return b=e.sent,e.next=38,b.text();case 38:return x=e.sent,w=new mt.WebVTTParser,k=w.parse(x,"metadata"),activeTranscriptCodes=k.cues,e.abrupt("break",45);case 43:e.next=29;break;case 45:e.next=50;break;case 47:e.prev=47,e.t0=e.catch(27),f.e(e.t0);case 50:return e.prev=50,f.f(),e.finish(50);case 53:if(0!=activeTranscriptCodes.length){e.next=63;break}return e.next=56,fetch(h.asset.captions[0].url);case 56:return S=e.sent,e.next=59,S.text();case 59:_=e.sent,T=new mt.WebVTTParser,O=T.parse(_,"metadata"),activeTranscriptCodes=O.cues;case 63:for(I in E=activeTranscriptCodes.filter((function(e){return s<=e.startTime&&e.endTime<=c})),q=0,R="",E)0===q&&(q=E[I].startTime),R+=E[I].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";if(""!==R.trim()){e.next=70;break}return alert("The transcript is not available for the part"),e.abrupt("return");case 70:return chrome.storage.local.set({cmdRes:{transcriptText:R,link:o.href,startTime:q,playlistId:u,videoId:p}}),e.next=73,g({time:i.toString(),action:"transcript",contentId:location.pathname.split("/").slice(-4).join("/")},r);case 73:app.analytics.track("notion_transcript");case 74:case"end":return e.stop()}}),e,null,[[27,47,50,53]])})))).apply(this,arguments)}function At(){return Pt.apply(this,arguments)}function Pt(){return(Pt=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g,b,x;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.documentElement.querySelector("video")){e.next=2;break}return e.abrupt("return");case 2:if((t=new URL(location.href)).searchParams.delete("t"),t.searchParams.delete("list"),t.searchParams.delete("v"),t.hash="",n=document.querySelector(".ud-component--course-taking--app[data-module-args]")){e.next=10;break}return e.abrupt("return");case 10:return r=location.pathname.split("/").slice(-1)[0],o=JSON.parse(n.getAttribute("data-module-args")),e.next=14,fetch("https://"+location.host+"/api-2.0/users/me/subscribed-courses/"+o.courseId+"/lectures/"+r+"/?fields[lecture]=asset,description,download_url,is_free,last_watched_second&fields[asset]=asset_type,length,media_license_token,course_is_drmed,media_sources,captions,thumbnail_sprite,slides,slide_urls,download_urls,external_url",{referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 14:return i=e.sent,e.next=17,i.json();case 17:if(s=e.sent,activeTranscriptCodes=[],0!=s.asset.captions.length){e.next=22;break}return chrome.storage.local.set({cmdRes:{alert:"Udemy Transcript is not available for the video!"}}),e.abrupt("return");case 22:c=bt(s.asset.captions),e.prev=23,c.s();case 25:if((l=c.n()).done){e.next=41;break}if("en_US"==(u=l.value).locale_id){e.next=29;break}return e.abrupt("continue",39);case 29:return e.next=31,fetch(u.url);case 31:return p=e.sent,e.next=34,p.text();case 34:return d=e.sent,m=new mt.WebVTTParser,h=m.parse(d,"metadata"),activeTranscriptCodes=h.cues,e.abrupt("break",41);case 39:e.next=25;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(23),c.e(e.t0);case 46:return e.prev=46,c.f(),e.finish(46);case 49:if(0!=activeTranscriptCodes.length){e.next=59;break}return e.next=52,fetch(s.asset.captions[0].url);case 52:return f=e.sent,e.next=55,f.text();case 55:y=e.sent,v=new mt.WebVTTParser,g=v.parse(y,"metadata"),activeTranscriptCodes=g.cues;case 59:for(x in b="",activeTranscriptCodes)b+=activeTranscriptCodes[x].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";return e.abrupt("return",b);case 62:case"end":return e.stop()}}),e,null,[[23,43,46,49]])})))).apply(this,arguments)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(){return Mt.apply(this,arguments)}function Mt(){return(Mt=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this).classList.contains("snipo-loading")){e.next=3;break}return e.abrupt("return");case 3:if(t.classList.add("snipo-loading"),n=document.querySelector(".snipo-open-notion").classList.contains("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),t.querySelector(".ytd-item-section-renderer").style.display="flex",t.querySelector(".cource-snipo-notes").style.display="none",0===location.pathname.indexOf("/learning")){e.next=10;break}return e.abrupt("return");case 10:if(r=location.pathname.split("/").slice(-2,-1)[0],o={},i="",r in activeCodesData){e.next=30;break}return e.next=16,fetch("https://www.linkedin.com"+location.pathname);case 16:return s=e.sent,e.next=19,s.text();case 19:return i=e.sent,c=Nt(i),e.next=23,fetch("https://www.linkedin.com"+c.request,{method:c.method,headers:Ct(Ct({},c.headers),{},{accept:"application/vnd.linkedin.normalized+json+2.1","csrf-token":Dt("JSESSIONID").replaceAll('"',"")})});case 23:return l=e.sent,e.next=26,l.json();case 26:o=e.sent,activeCodesData[r]=o,e.next=31;break;case 30:o=activeCodesData[r];case 31:try{-1!==(u=i.indexOf("{&quot;data&quot;:{&quot;paging&quot;:{&quot;count&quot;:10,&quot;start&quot;:0,&quot;links&quot;:[]},&quot;*elements&quot;:[&quot;urn:li:learningApiCourse"))&&(p=i.substring(u),d=p.substring(0,p.indexOf("</code>")).trim(),m=new DOMParser,h=m.parseFromString(d,"text/html"),o=JSON.parse(h.body.textContent)),console.log(o)}catch(e){console.log(e)}f={id:r,title:document.querySelector(".classroom-nav__title").textContent.trim("\n"),url:location.protocol+"//"+location.host+location.pathname.split("/").join("/"),coverURL:document.querySelector('[property="og:image"]').getAttribute("content"),videos:[],lengthSeconds:"0"},y={url:location.protocol+"//"+location.host+location.pathname,id:location.pathname.split("/").slice(-2).join("/"),title:document.querySelector('[property="og:title"]').getAttribute("content")},-1!==location.pathname.indexOf("/quiz/")&&(y.id=location.pathname.split("/").slice(-3).join("/")),v={},g=[],o.included.forEach((function(e){var t;if(v[e.cachingKey]=e,"com.linkedin.learning.api.deco.content.Course"===e.$type)return"contentsDerived"in e&&e.contentsDerived.forEach((function(e){g.push(e["*section"])})),"contents"in e&&e.contents.forEach((function(e){g.push(e["*section"])})),f.id=(null==e?void 0:e.slug)+"",""===f.id&&(r=f.id),f.title=(null==e?void 0:e.title)+"",f.url="/learning/"+f.id,void(f.lengthSeconds=(null==e||null===(t=e.duration)||void 0===t?void 0:t.duration)+""||"0")})),g.forEach((function(e){var t=v[e].title;"items"in v[e]&&v[e].items.forEach((function(e){var n,a=e.contentV2["*video"];if(a||(a=e.contentV2["*assessment"]),a){var o=v[a];"QUIZ"!==o.entityType?f.videos.push({id:r+"/"+o.slug,title:o.title,lengthSeconds:(null==o||null===(n=o.duration)||void 0===n?void 0:n.duration)+""||"0",chapterTitle:t,url:location.protocol+"//"+location.host+location.pathname.split("/").slice(0,-1).join("/")+"/"+o.slug}):f.videos.push({id:r+"/quiz/"+a,title:o.title,lengthSeconds:"0",chapterTitle:t,url:location.protocol+"//"+location.host+location.pathname.split("/").slice(0,-1).join("/")+"/quiz/"+a})}})),"*items"in v[e]&&v[e]["*items"].forEach((function(e){var n,a=v[e.replace("urn:li:learningApiTocItem:","")];"QUIZ"!==a.entityType?f.videos.push({id:r+"/"+a.slug,title:a.title,lengthSeconds:(null==a||null===(n=a.duration)||void 0===n?void 0:n.duration)+""||"0",chapterTitle:t,url:location.protocol+"//"+location.host+location.pathname.split("/").slice(0,-1).join("/")+"/"+a.slug}):f.videos.push({id:r+"/quiz/"+e,title:a.title,lengthSeconds:"0",chapterTitle:t,url:location.protocol+"//"+location.host+location.pathname.split("/").slice(0,-1).join("/")+"/quiz/"+e})}))})),console.log(f),chrome.runtime.sendMessage({videoData:y,playlistData:f,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:n,type:"linkedin"},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),t.querySelector(".ytd-item-section-renderer").style.display="none",t.querySelector(".cource-snipo-notes").style.display="block",t.classList.remove("snipo-loading"),document.querySelector(".classroom-layout__sidebar--showing")&&document.querySelector(".classroom-layout__sidebar--showing").classList.remove("classroom-layout__sidebar--showing")})),app.analytics.track("open_notion",{type:"linkedin"});case 42:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Nt(e){var t=e.indexOf("/learning-api/videos");if(-1!=t){var n=e.substring(t-12);return JSON.parse(n.substring(0,n.indexOf("</code>")).trim())}return function(e){var t=e.indexOf("/learning-api/graphql?includeWebMetadata\\u003Dtrue\\u0026variables\\u003D(courseSlug:"+location.pathname.split("/").slice(-2,-1)[0]+")");-1==t&&-1==(t=e.indexOf("/learning-api/graphql?includeWebMetadata\\u003Dtrue\\u0026variables\\u003D(slug:"+location.pathname.split("/").slice(-2,-1)[0]+")"))&&(t=e.indexOf("/learning-api/graphql?includeWebMetadata\\u003Dtrue\\u0026variables\\u003D(courseSlug:"+location.pathname.split("/").slice(-2,-1)[0]));-1==t&&app.analytics.track("empty_response",{type:"linkedin"});var n=e.substring(t-12),r=JSON.parse(n.substring(0,n.indexOf("</code>")).trim());return r.headers["x-restli-protocol-version"]="2.0.0",r}(e)}function Dt(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(){return{container:document.querySelector(".classroom-layout__workspace-tab-container"),videos:document.querySelectorAll("video"),integration:"linkedin",icon:'<div data-index="0"><div class="udlite-nav-button-container" style=" flex: 1 1 auto; "><h2><button type="button" id="tabs--1-tab-0" aria-selected="false" role="tab" tabindex="-1" style=" padding: var(--hue-web-dimension-spacing-small) var(--hue-web-dimension-spacing-medium); white-space: nowrap; min-height: var(--hue-web-dimension-tab-minimum-height-small); font-size: var(--hue-web-font-size-small); margin-left: var(--hue-web-dimension-spacing-2xlarge); cursor: pointer; display: -webkit-box; display: -ms-flexbox; display: flex; position: relative; -webkit-box-align: center; -ms-flex-align: center; align-items: center; -webkit-box-sizing: border-box; box-sizing: border-box; border: none; text-align: left; background: var(--hue-web-color-container-tertiary); font-weight: var(--hue-web-font-weight-bold); color: var(--hue-web-color-label); "><div style="display: none; height: 24px;" class="loader ytd-item-section-renderer"><div class="a11y-text" role="status">Loading</div><div class="_progress-indicator_11arhg _circular_11arhg _indeterminate_11arhg _xlarge_11arhg" role="progressbar" style="width: 20px; height: 20px;"> <svg class="_shape_11arhg" height="100%" width="100%"><circle class="_fill_11arhg" stroke-dasharray="13.50884841043611em 13.50884841043611em" stroke-width="2" cx="50%" cy="50%" stroke-dashoffset="9.186016919096556em" r="0.9em"></circle></svg></div></div><svg class="cource-snipo-notes" xmlns="http://www.w3.org/2000/svg" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 26 26" focusable="false" class="style-scope yt-icon" style="floar:right; pointer-events: none;display: inline;width: 24px;height: 24px;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg><span style="margin-left: 10px;">Snipo notes</span></button></h2></div></div>',playlistUpdateVideoHandler:(e=t(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({cmd:"notion-is-open"});case 2:if(e.sent.status){e.next=5;break}return e.abrupt("return");case 5:if(0===location.pathname.indexOf("/learning")){e.next=7;break}return e.abrupt("return");case 7:return t=location.pathname.split("/").slice(-2,-1)[0],n=location.pathname.split("/").slice(-1)[0],e.next=11,N(["active_playlist","active_playlist_video"]);case 11:r=e.sent,t===r.active_playlist&&n!=r.active_playlist_video&&(document.querySelector(".snipo-open-notion").classList.add("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").click());case 13:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){return location.pathname.split("/").slice(-2).join("/")}),(function(){return location.pathname.split("/").slice(-2,-1)[0]}),(function(){return location.pathname.split("/").slice(-1)[0]})),screenHandler:vt((function(){return location.pathname.split("/").slice(-2).join("/")})),transciptHandler:zt};var e}function Bt(){return Zt.apply(this,arguments)}function Zt(){return(Zt=t(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ht(),r=function(e){e.forEach(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(document.querySelector(".classroom-layout__workspace-tab-container"),n.icon),ne(n.videos),e.next=4,n.playlistUpdateVideoHandler();case 4:case"end":return e.stop()}}),e)}))))},!R()){e.next=5;break}return e.next=5,T(1e3);case 5:new MutationObserver(r).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),S("click",".snipo-open-notion",jt),te(n.container,n.icon),ne(n.videos),ht(Ut({},n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t,n){return Ft.apply(this,arguments)}function Ft(){return(Ft=t(a().mark((function e(t,n,r){var o,i,s,c,l,u,p,d,m,h,f,y,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new URL(location.href)).searchParams.delete("t"),o.searchParams.delete("list"),o.searchParams.delete("v"),o.hash="",i=parseInt(parseFloat(t).toFixed(0)),s=1e3*(i-1),c=1e3*(i+(n.action.newValue.seconds||30)),"Last"===n.action.newValue.directionOfRange&&(s=1e3*(i-(n.action.newValue.seconds||30)),c=1e3*i),"Between"===n.action.newValue.directionOfRange&&(s=1e3*(i-n.action.newValue.beforeSeconds),c=1e3*(i+n.action.newValue.afterSeconds)),e.next=12,fetch("https://www.linkedin.com"+location.pathname);case 12:if(200===(l=e.sent).status){e.next=16;break}return chrome.storage.local.set({cmdRes:{alert:"Linkedin Transcript is not available for the video!"}}),e.abrupt("return");case 16:return e.t0=Jt,e.next=19,l.text();case 19:return e.t1=e.sent,u=(0,e.t0)(e.t1),e.next=23,fetch("https://www.linkedin.com"+u.request,{method:u.method,headers:Ut(Ut({},u.headers),{},{accept:"application/vnd.linkedin.normalized+json+2.1","csrf-token":Qt("JSESSIONID").replaceAll('"',"")})});case 23:if(200===(p=e.sent).status){e.next=27;break}return chrome.storage.local.set({cmdRes:{alert:"Linkedin Transcript is not available for the video!"}}),e.abrupt("return");case 27:return e.next=29,p.json();case 29:for(v in d=e.sent,m="",h=[],f=!1,d.included.forEach((function(e){Object.keys(e.transcriptsDerived||{}).length>=1&&"com.linkedin.learning.api.deco.content.Transcript"===e.transcriptsDerived.$type&&e.transcriptsDerived.lines.forEach((function(e){s<=e.transcriptStartAt&&!f?(h.push({startTime:e.transcriptStartAt,text:e.caption.trim()+" "}),f=!0):e.transcriptStartAt<=c&&f&&h.push({startTime:e.transcriptStartAt,text:e.caption.trim()+" "})})),"com.linkedin.learning.api.deco.content.Transcript"===e.$type&&e.lines.forEach((function(e){s<=e.transcriptStartAt&&!f?(h.push({startTime:e.transcriptStartAt,text:e.caption.trim()+" "}),f=!0):e.transcriptStartAt<=c&&f&&h.push({startTime:e.transcriptStartAt,text:e.caption.trim()+" "})}))})),y=0,h)0===y&&(y=h[v].startTime),m+=h[v].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";if(""!==m.trim()){e.next=39;break}return alert("The transcript is not available for the part"),e.abrupt("return");case 39:return chrome.storage.local.set({cmdRes:{transcriptText:m,link:o.href,startTime:y/1e3}}),e.next=42,g({time:i.toString(),action:"transcript",contentId:location.pathname.split("/").slice(1)[1]},r);case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(){return Wt.apply(this,arguments)}function Wt(){return(Wt=t(a().mark((function e(){var t,n,r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.linkedin.com"+location.pathname);case 2:if(200===(t=e.sent).status){e.next=6;break}return chrome.storage.local.set({cmdRes:{alert:"Linkedin Transcript is not available for the video!"}}),e.abrupt("return");case 6:return e.t0=Jt,e.next=9,t.text();case 9:return e.t1=e.sent,n=(0,e.t0)(e.t1),e.next=13,fetch("https://www.linkedin.com"+n.request,{method:n.method,headers:Ut(Ut({},n.headers),{},{accept:"application/vnd.linkedin.normalized+json+2.1","csrf-token":Qt("JSESSIONID").replaceAll('"',"")})});case 13:if(200===(r=e.sent).status){e.next=17;break}return chrome.storage.local.set({cmdRes:{alert:"Linkedin Transcript is not available for the video!"}}),e.abrupt("return");case 17:return e.next=19,r.json();case 19:return o=e.sent,i="",o.included.forEach((function(e){Object.keys(e.transcriptsDerived||{}).length>=1&&"com.linkedin.learning.api.deco.content.Transcript"===e.transcriptsDerived.$type&&e.transcriptsDerived.lines.forEach((function(e){i+=e.caption.replaceAll("\n\n"," ").replaceAll("\n"," ")+" "})),"com.linkedin.learning.api.deco.content.Transcript"===e.$type&&e.lines.forEach((function(e){i+=e.caption.replaceAll("\n\n"," ").replaceAll("\n"," ")+" "}))})),e.abrupt("return",i);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e){var t=e.indexOf("/learning-api/videos");if(-1!=t){var n=e.substring(t-12);return JSON.parse(n.substring(0,n.indexOf("</code>")).trim())}return function(e){var t=e.indexOf("/learning-api/graphql?includeWebMetadata\\u003Dtrue&variables\\u003D(slug"),n=e.substring(t-12),r=JSON.parse(n.substring(0,n.indexOf("</code>")).trim());return r.headers["x-restli-protocol-version"]="2.0.0",r}(e)}function Qt(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function Xt(){return Yt.apply(this,arguments)}function Yt(){return(Yt=t(a().mark((function e(){var t,n,r,o,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="skillshare",!(n=this).classList.contains("snipo-loading")){e.next=4;break}return e.abrupt("return");case 4:if(n.classList.add("snipo-loading"),r=document.querySelector(".snipo-open-notion").classList.contains("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),n.querySelector(".ytd-item-section-renderer").style.display="flex",n.querySelector(".cource-snipo-notes").style.display="none",-1!==location.pathname.indexOf("/classes/")){e.next=11;break}return e.abrupt("return");case 11:o=JSON.parse(document.querySelector("html").dataset.snipoSessions),i={id:o.id.split("/").slice(-1)[0],title:document.title,url:o.url,coverURL:o.cover,videos:[],lengthSeconds:0},s={},document.querySelector(".session-item.active [data-rank]").dataset||(n.querySelector(".ytd-item-section-renderer").style.display="none",n.querySelector(".cource-snipo-notes").style.display="block",n.classList.remove("snipo-loading")),c=document.querySelector(".session-item.active [data-rank]").dataset.rank,o.sessions.forEach((function(e){e.rank+=1,c===e.rank.toString()&&(s.id=o.id.split("/").slice(-1)[0]+"/"+e.rank,s.url=o.url+"/projects",s.title=e.title),i.videos.push({id:o.id.split("/").slice(-1)[0]+"/"+e.rank,title:e.title,lengthSeconds:(null==e?void 0:e.videoLengthSeconds)+""||"0",url:o.url+"/projects"}),i.lengthSeconds+=parseInt((null==e?void 0:e.videoLengthSeconds)+""||"0")})),i.lengthSeconds=i.lengthSeconds+"",chrome.runtime.sendMessage({videoData:s,playlistData:i,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:r,type:t},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),n.querySelector(".ytd-item-section-renderer").style.display="none",n.querySelector(".cource-snipo-notes").style.display="block",n.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:t});case 20:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Kt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return $t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $t(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nn(){return{container:document.querySelector(".title"),videos:document.querySelectorAll("video"),integration:"skillshare",icon:'<button type="button" id="tabs--1-tab-0" aria-selected="false" role="tab" tabindex="-1" style=" width: 40px; height: 40px; float: right; cursor: pointer; ">'.concat("<style> @keyframes Spinner_module_dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0 } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px } to { stroke-dasharray: 89,200; stroke-dashoffset: -135px } } @keyframes Spinner_module_rotate { to { transform: rotate(1turn) } } </style>").concat('<svg style="cursor: pointer; pointer-events: none; width: 24px; color: #01adef; height: 24px; background: transparent; transition: opacity .1s,transform .25s cubic-bezier(.17,.88,.32,1.28); display: none;" class="ytd-item-section-renderer" data-spinner="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle data-spinner-trace="true" cx="24" cy="24" r="22" stroke="#002333" style="    stroke-width: 4px; background: transparent;    stroke-opacity: 20%; "></circle><circle data-spinner-circle="true" cx="24" cy="24" r="22" stroke="#002333" style=" transform-origin: 50% 50%; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; animation: Spinner_module_rotate 2s linear .25s infinite, Spinner_module_dash 1.5s ease-in-out .25s infinite;     stroke-width: 4px; background: transparent;"></circle></svg>','<svg class="cource-snipo-notes" xmlns="http://www.w3.org/2000/svg" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 26 26" focusable="false" style="floar:right;pointer-events: none;display: inline;width: 24px;height: 24px;margin: 6px 0;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg></button>'),playlistUpdateVideoHandler:(e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({cmd:"notion-is-open"});case 2:if(e.sent.status){e.next=5;break}return e.abrupt("return");case 5:if(-1!==location.pathname.indexOf("/classes/")){e.next=7;break}return e.abrupt("return");case 7:document.querySelector(".snipo-open-notion").classList.add("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").click();case 9:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){var e=JSON.parse(document.querySelector("html").dataset.snipoSessions),t=document.querySelector(".session-item.active [data-rank]").dataset.rank;return e.id.split("/").slice(-1)[0]+"/"+t}),(function(){return JSON.parse(document.querySelector("html").dataset.snipoSessions).id.split("/").slice(-1)[0]}),(function(){return document.querySelector(".session-item.active [data-rank]").dataset.rank})),screenHandler:gt((function(){var e=JSON.parse(document.querySelector("html").dataset.snipoSessions),t=document.querySelector(".session-item.active [data-rank]").dataset.rank;return e.id.split("/").slice(-1)[0]+"/"+t})),transciptHandler:sn};var e}function rn(){return an.apply(this,arguments)}function an(){return an=t(a().mark((function e(){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P("/build/skillshare.js"),n=nn(),r=function(e){e.forEach(function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t.target.style.opacity){e.next=5;break}return on(n.container,n.icon),ne(n.videos),e.next=5,n.playlistUpdateVideoHandler();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},!R()){e.next=6;break}return e.next=6,T(1e3);case 6:if(new MutationObserver(r).observe(document.querySelector(".video-player-module"),{attributes:!0}),S("click",".snipo-open-notion",Xt),on(n.container,n.icon),ne(n.videos),ht(tn({},n)),!(o=new URL(location.href)).searchParams.get("t")&&!o.searchParams.get("v")){e.next=20;break}return e.next=15,T(1e3);case 15:return document.querySelector('.session-item [data-rank="'+o.searchParams.get("v").split("/").slice(-1)[0]+'"]').click(),e.next=18,T(1e3);case 18:document.querySelector("video").play(),document.querySelector("video").currentTime=o.searchParams.get("t").replace("s","");case 20:case"end":return e.stop()}}),e)}))),an.apply(this,arguments)}function on(e,t){var n=document.createElement("div");if(n.innerHTML=t,n.classList.add("snipo-open-notion"),n.style="float: right; cursor: pointer;",e){for(var r=document.querySelectorAll(".snipo-open-notion"),a=0;a<r.length;a++)r[a].remove();e.appendChild(n)}}function sn(e,t,n){return cn.apply(this,arguments)}function cn(){return(cn=t(a().mark((function e(t,n,r){var o,i,s,c,l,u,p,d,m,h,f,y,v,b,x,w,k,S;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=new URL(location.href)).searchParams.delete("t"),i.searchParams.delete("list"),i.searchParams.delete("v"),i.hash="",s=parseInt(parseFloat(t).toFixed(0)),c=s-1,l=s+(n.action.newValue.seconds||30),"Last"===n.action.newValue.directionOfRange&&(c=s-(n.action.newValue.seconds||30),l=s),"Between"===n.action.newValue.directionOfRange&&(c=s-n.action.newValue.beforeSeconds,l=s+n.action.newValue.afterSeconds),u=JSON.parse(document.querySelector("html").dataset.snipoSessions)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,fetch("https://www.skillshare.com/".concat(u.id,"/transcripts?format=json"),{headers:{accept:"application/json, text/javascript, */*; q=0.01"},referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 15:if(200===(p=e.sent).status){e.next=19;break}return chrome.storage.local.set({cmdRes:{alert:"Skillshare Transcript is not available for the video!"}}),e.abrupt("return");case 19:return e.next=21,p.json();case 21:if(0!=(d=e.sent).transcriptCuesArray){e.next=25;break}return chrome.storage.local.set({cmdRes:{alert:"Skillshare Transcript is not available for the video!"}}),e.abrupt("return");case 25:m=document.querySelector(".session-item.active [data-rank]").dataset.rank,h="",u.sessions.forEach((function(e){m!==(e.rank+1).toString()||(h=e.id)})),f=[],y=Kt((null===(o=d.transcriptCuesArray[h])||void 0===o?void 0:o.content)||[]);try{for(y.s();!(v=y.n()).done;)b=v.value,f.push({startTime:b.start,endTime:b.end,text:b.text})}catch(e){y.e(e)}finally{y.f()}for(S in x=f.filter((function(e){return c<=e.startTime&&e.endTime<=l})),w=0,k="",x)0===w&&(w=x[S].startTime),k+=x[S].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";if(""!==k.trim()){e.next=38;break}return alert("The transcript is not available for the part"),e.abrupt("return");case 38:return chrome.storage.local.set({cmdRes:{transcriptText:k,link:i.href,startTime:w}}),e.next=41,g({time:s.toString(),action:"transcript",contentId:u.id.split("/").slice(-1)[0]+"/"+m},r);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ln(){return un.apply(this,arguments)}function un(){return(un=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d,m,h,f,y,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.documentElement.querySelector("video")){e.next=2;break}return e.abrupt("return");case 2:if((n=new URL(location.href)).searchParams.delete("t"),n.searchParams.delete("list"),n.searchParams.delete("v"),n.hash="",r=0,o=-1,i=JSON.parse(document.querySelector("html").dataset.snipoSessions)){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,fetch("https://www.skillshare.com/".concat(i.id,"/transcripts?format=json"),{headers:{accept:"application/json, text/javascript, */*; q=0.01"},referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 14:if(200===(s=e.sent).status){e.next=18;break}return chrome.storage.local.set({cmdRes:{alert:"Skillshare Transcript is not available for the video!"}}),e.abrupt("return");case 18:return e.next=20,s.json();case 20:if(0!=(c=e.sent).transcriptCuesArray){e.next=24;break}return chrome.storage.local.set({cmdRes:{alert:"Skillshare Transcript is not available for the video!"}}),e.abrupt("return");case 24:l=document.querySelector(".session-item.active [data-rank]").dataset.rank,u="",i.sessions.forEach((function(e){l!==(e.rank+1).toString()||(u=e.id)})),p=[],d=Kt((null===(t=c.transcriptCuesArray[u])||void 0===t?void 0:t.content)||[]);try{for(d.s();!(m=d.n()).done;)h=m.value,p.push({startTime:h.start,endTime:h.end,text:h.text})}catch(e){d.e(e)}finally{d.f()}for(v in f=p.filter((function(e){return r<=e.startTime&&(-1===o||e.endMs<=o)})),y="",f)y+=f[v].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";return e.abrupt("return",y);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mn(){return hn.apply(this,arguments)}function hn(){return(hn=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="vimeo",n=!1,!(r=this).classList.contains("snipo-loading")){e.next=5;break}return e.abrupt("return");case 5:if(r.classList.add("snipo-loading"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),r.querySelector(".ytd-item-section-renderer").style.display="flex",r.querySelector(".cource-snipo-notes").style.display="none",o=document.querySelector(".player").id){e.next=16;break}if(document.querySelector('article[tabindex="-1"] a')){e.next=15;break}return alert("Snipo: the current video is not detected. Support email: hello@snipo.io"),app.analytics.track("lecture_not_found",{type:t}),e.abrupt("return");case 15:o=document.querySelector('article[tabindex="-1"] a').getAttribute("href").replace("https://vimeo.com/","").replace("https://www.vimeo.com/","");case 16:return e.next=18,fetch("https://player.vimeo.com/video/".concat(o,"/config"),{headers:{"x-requested-with":"XMLHttpRequest"},referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 18:return i=e.sent,e.next=21,i.json();case 21:if(s=e.sent,c={id:"",title:"",videos:[]},l={id:s.video.id.toString(),title:s.video.title,url:location.protocol+"//"+location.host+"/"+s.video.id,lengthSeconds:s.video.duration.toString(),channelId:s.video.owner.url,channelTitle:s.video.owner.name,coverURL:s.video.thumbs.base,charters:[]},s.embed&&s.embed.chapters&&s.embed.chapters.length>0){u=pn(s.embed.chapters);try{for(u.s();!(p=u.n()).done;)d=p.value,l.charters.push({title:d.title||"",durationFormat:_(d.timecode||0),durationSec:d.timecode||0})}catch(e){u.e(e)}finally{u.f()}l.charters.sort((function(e,t){return parseFloat(e.durationSec)-parseFloat(t.durationSec)})),l.charters.map((function(e){return e.durationSec=e.durationSec+"",e}))}chrome.runtime.sendMessage({videoData:l,playlistData:c,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:n,type:t},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),r.querySelector(".ytd-item-section-renderer").style.display="none",r.querySelector(".cource-snipo-notes").style.display="block",r.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:t});case 27:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(){return{container:document.querySelector(".clip_info-subline--watch"),videos:document.querySelectorAll("video"),integration:"vimeo",icon:"".concat("<style> @keyframes Spinner_module_dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0 } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px } to { stroke-dasharray: 89,200; stroke-dashoffset: -135px } } @keyframes Spinner_module_rotate { to { transform: rotate(1turn) } } </style>",'<button format="primary" style="cursor:pointer; display: inline-flex; position: relative; outline: 0px; margin: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: 700; border-width: 0.0625rem; border-style: solid; transition: all 0.1s ease-in-out 0s; text-align: center; vertical-align: middle; letter-spacing: 0.1px; -webkit-box-align: center; align-items: center; -webkit-box-pack: center; justify-content: center; -webkit-font-smoothing: antialiased; text-rendering: optimizelegibility; min-width: 4.25rem; min-height: 2rem; padding: 0px 0.625rem; font-size: 0.875rem; line-height: 2.14286; width: auto; border-radius: 0.1875rem; background-color: rgb(0, 173, 239); border-color: rgb(0, 173, 239); color: rgb(255, 255, 255); margin-left: 20px; "><span style=" display: inline-flex; width: 100%; -webkit-box-align: center; align-items: center; -webkit-box-pack: center; justify-content: center; }"><span style=" display: inline-flex; -webkit-box-align: center; align-items: center; margin-right: 0.25rem; "><svg style="cursor: pointer; pointer-events: none; width: 24px; color: #01adef; height: 24px; background: transparent; transition: opacity .1s,transform .25s cubic-bezier(.17,.88,.32,1.28); display: none;" class="ytd-item-section-renderer" data-spinner="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle data-spinner-trace="true" cx="24" cy="24" r="22" stroke="white" style="    stroke-width: 4px; background: transparent;    stroke-opacity: 20%; "></circle><circle data-spinner-circle="true" cx="24" cy="24" r="22" stroke="white" style=" transform-origin: 50% 50%; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; animation: Spinner_module_rotate__8e25942d 2s linear .25s infinite, Spinner_module_dash__8e25942d 1.5s ease-in-out .25s infinite;     stroke-width: 4px; background: transparent;"></circle></svg><svg class="cource-snipo-notes" xmlns="http://www.w3.org/2000/svg" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 26 26" focusable="false" style="cursor:pointer;floar:right;pointer-events: none;display: inline;width: 24px;height: 24px;display: block;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg></span>Snipo Notes</span></button>'),playlistUpdateVideoHandler:(e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){return location.pathname.split("/").slice(1)[0]}),(function(){return""}),(function(){return""})),screenHandler:gt((function(){return location.pathname.split("/").slice(1)[0]})),transciptHandler:xn};var e}function gn(){return bn.apply(this,arguments)}function bn(){return(bn=t(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=vn(),r=function(e){e.forEach(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(n.container,n.icon),ne(n.videos),e.next=4,n.playlistUpdateVideoHandler();case 4:case"end":return e.stop()}}),e)}))))},!R()){e.next=5;break}return e.next=5,T(1e3);case 5:new MutationObserver(r).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),S("click",".snipo-open-notion",mn),te(n.container,n.icon),ne(n.videos),ht(yn({},n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e,t,n){return wn.apply(this,arguments)}function wn(){return(wn=t(a().mark((function e(t,n,r){var o,i,s,c,l,u,p,d,m,h,f,y,v,b;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new URL(location.href)).searchParams.delete("t"),o.searchParams.delete("list"),o.searchParams.delete("v"),o.hash="",i=parseInt(parseFloat(t).toFixed(0)),s=i-1,c=i+(n.action.newValue.seconds||30),"Last"===n.action.newValue.directionOfRange&&(s=i-(n.action.newValue.seconds||30),c=i),"Between"===n.action.newValue.directionOfRange&&(s=i-n.action.newValue.beforeSeconds,c=i+n.action.newValue.afterSeconds),e.next=12,fetch("https://player.vimeo.com/video/".concat(location.pathname.split("/").slice(1)[0],"/config"),{referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 12:if(200===(l=e.sent).status){e.next=16;break}return chrome.storage.local.set({cmdRes:{alert:"Vimeo Transcript is not available for the video!"}}),e.abrupt("return");case 16:return e.next=18,l.json();case 18:if("text_tracks"in(u=e.sent).request){e.next=22;break}return chrome.storage.local.set({cmdRes:{alert:"Vimeo Transcript is not available for the video!"}}),e.abrupt("return");case 22:return e.next=24,fetch("https://vimeo.com"+u.request.text_tracks[0].url);case 24:return p=e.sent,e.next=27,p.text();case 27:for(b in d=e.sent,m=new mt.WebVTTParser,h=m.parse(d,"metadata"),activeTranscriptCodes=h.cues,f=activeTranscriptCodes.filter((function(e){return s<=e.startTime&&e.endTime<=c})),y=0,v="",f)0===y&&(y=f[b].startTime),v+=f[b].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";if(""!==v.trim()){e.next=38;break}return alert("The transcript is not available for the part"),e.abrupt("return");case 38:return chrome.storage.local.set({cmdRes:{transcriptText:v,link:o.href,startTime:y}}),e.next=41,g({time:i.toString(),action:"transcript",contentId:location.pathname.split("/").slice(1)[0]},r);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kn(){return Sn.apply(this,arguments)}function Sn(){return(Sn=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.documentElement.querySelector("video")){e.next=2;break}return e.abrupt("return");case 2:return(t=new URL(location.href)).searchParams.delete("t"),t.searchParams.delete("list"),t.searchParams.delete("v"),t.hash="",n=0,r=-1,e.next=11,fetch("https://player.vimeo.com/video/".concat(location.pathname.split("/").slice(1)[0],"/config"),{referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 11:if(200===(o=e.sent).status){e.next=15;break}return chrome.storage.local.set({cmdRes:{alert:"Vimeo Transcript is not available for the video!"}}),e.abrupt("return");case 15:return e.next=17,o.json();case 17:if("text_tracks"in(i=e.sent).request){e.next=21;break}return chrome.storage.local.set({cmdRes:{alert:"Vimeo Transcript is not available for the video!"}}),e.abrupt("return");case 21:return e.next=23,fetch("https://vimeo.com"+i.request.text_tracks[0].url);case 23:return s=e.sent,e.next=26,s.text();case 26:for(m in c=e.sent,l=new mt.WebVTTParser,u=l.parse(c,"metadata"),activeTranscriptCodes=u.cues,p=activeTranscriptCodes.filter((function(e){return n<=e.startTime&&(-1===r||e.endMs<=r)})),d="",p)d+=p[m].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";return e.abrupt("return",d);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(){return Tn.apply(this,arguments)}function Tn(){return(Tn=t(a().mark((function e(){var t,n,r,o,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="ted",n=!1,r=0!==location.pathname.indexOf("/talks"),!(o=this).classList.contains("snipo-loading")){e.next=6;break}return e.abrupt("return");case 6:if(o.classList.add("snipo-loading"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),o.querySelector(".ytd-item-section-renderer").style.display="block",o.querySelector(".cource-snipo-notes").style.display="none",!r){e.next=12;break}return e.abrupt("return");case 12:i={id:"",title:"",videos:[]},s="";try{s=JSON.parse(document.querySelector('[type="application/ld+json"]').textContent).thumbnailUrl}catch(e){console.log(e)}c={id:location.pathname.split("/").slice(2,3)[0],title:document.querySelector("title").innerText,url:location.protocol+"//"+location.host+location.pathname,lengthSeconds:document.querySelector('[type="range"][max]').getAttribute("max"),channelId:document.querySelector('a[href^="/speakers"]').getAttribute("href"),channelTitle:document.querySelector('[name="author"]').getAttribute("content"),coverURL:s},chrome.runtime.sendMessage({videoData:c,playlistData:i,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:n,type:t},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),o.querySelector(".ytd-item-section-renderer").style.display="none",o.querySelector(".cource-snipo-notes").style.display="block",o.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:t});case 18:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function On(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function In(){return{container:document.querySelector(".relative.mb-4.flex.items-center.gap-3"),videos:document.querySelectorAll("video"),integration:"ted",icon:'<button class="rounded-sm bg-gray-300 text-sm font-medium hover:z-0 md:bg-transparent md:hover:bg-gray-300" type="button"><div class="py-3 relative rounded-sm inline-flex items-center select-none transition-colors duration-1000 justify-center min-w-button px-4 min-h-button-sm text-blue-500 bg-transparent hover:bg-gray-300"><div class="transition-opacity duration-300 inline-flex items-center opacity-100">'.concat('<div class="ytd-item-section-renderer z-30 pr-3" style="display:none"><div class="animate-spin select-none h-4 w-4"><div class="z-1 absolute h-full w-full rounded-full border-[4px] border-solid opacity-50" style="border-color: #4d93ff;"></div><div class="z-2 absolute h-full w-full rounded-full border-[4px] border-solid border-transparent" style="border-left-color:white"></div></div></div>').concat('<svg class="cource-snipo-notes mr-3 h-4 w-4 flex-shrink-0 origin-left scale-125 transform" xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 22 22" focusable="false" style="floar:right;pointer-events: none;display: inline;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg>',"Snipo Notes</div></div></button>"),playlistUpdateVideoHandler:(e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){return location.pathname.split("/").slice(1)[1]}),(function(){return""}),(function(){return""})),screenHandler:gt((function(){return location.pathname.split("/").slice(1)[1]})),transciptHandler:Ln};var e}function An(){return Pn.apply(this,arguments)}function Pn(){return(Pn=t(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=In(),r=function(e){e.forEach(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(n.container,n.icon),ne(n.videos),e.next=4,n.playlistUpdateVideoHandler();case 4:case"end":return e.stop()}}),e)}))))},!R()){e.next=5;break}return e.next=5,T(1e3);case 5:new MutationObserver(r).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),S("click",".snipo-open-notion",_n),te(n.container,n.icon),ne(n.videos),ht(Rn({},n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(e,t,n){return Cn.apply(this,arguments)}function Cn(){return(Cn=t(a().mark((function e(t,n,r){var o,i,s,c,l,u,p,d,m,h,f,y,v,b,x,w,k,S,_,T,O,E,q,R,I,A;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((d=new URL(location.href)).searchParams.delete("t"),d.searchParams.delete("list"),d.searchParams.delete("v"),d.hash="",m=parseInt(parseFloat(t).toFixed(0)),h=1e3*(m-1),f=1e3*(m+(n.action.newValue.seconds||30)),"Last"===n.action.newValue.directionOfRange&&(h=1e3*(m-(n.action.newValue.seconds||30)),f=1e3*m),"Between"===n.action.newValue.directionOfRange&&(h=1e3*(m-n.action.newValue.beforeSeconds),f=1e3*(m+n.action.newValue.afterSeconds)),y=document.querySelector('[type="application/json"]')){e.next=13;break}return e.abrupt("return");case 13:return v=JSON.parse(y.textContent),e.next=16,fetch("https://www.ted.com/_next/data/".concat(v.buildId,"/talks/").concat(location.pathname.split("/").slice(1)[1],".json?t=10s&slug=").concat(location.pathname.split("/").slice(1)[1]),{referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 16:if(200===(b=e.sent).status){e.next=20;break}return chrome.storage.local.set({cmdRes:{alert:"Ted Transcript is not available for the video!"}}),e.abrupt("return");case 20:return e.next=22,b.json();case 22:if(0!=(null==(x=e.sent)||null===(o=x.pageProps)||void 0===o||null===(i=o.transcriptData)||void 0===i||null===(s=i.translation)||void 0===s||null===(c=s.paragraphs)||void 0===c?void 0:c.length)){e.next=26;break}return chrome.storage.local.set({cmdRes:{alert:"Ted Transcript is not available for the video!"}}),e.abrupt("return");case 26:w=[],k=!1,S=On((null==x||null===(l=x.pageProps)||void 0===l||null===(u=l.transcriptData)||void 0===u||null===(p=u.translation)||void 0===p?void 0:p.paragraphs)||[]);try{for(S.s();!(_=S.n()).done;){T=_.value,O=On(T.cues);try{for(O.s();!(E=O.n()).done;)q=E.value,h<=q.time&&!k?(w.push({startTime:q.time,text:q.text}),k=!0):q.time<=f&&k&&w.push({startTime:q.time,text:q.text})}catch(e){O.e(e)}finally{O.f()}}}catch(e){S.e(e)}finally{S.f()}for(A in R=0,I="",w)0===R&&(R=w[A].startTime),I+=w[A].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";if(""!==I.trim()){e.next=36;break}return alert("The transcript is not available for the part"),e.abrupt("return");case 36:return chrome.storage.local.set({cmdRes:{transcriptText:I,link:d.href,startTime:R/1e3}}),e.next=39,g({time:m.toString(),action:"transcript",contentId:location.pathname.split("/").slice(1)[1]},r);case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jn(){return Mn.apply(this,arguments)}function Mn(){return(Mn=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g,b,x,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.documentElement.querySelector("video")){e.next=2;break}return e.abrupt("return");case 2:if(l=document.querySelector('[type="application/json"]')){e.next=5;break}return e.abrupt("return");case 5:return u=JSON.parse(l.textContent),e.next=8,fetch("https://www.ted.com/_next/data/".concat(u.buildId,"/talks/").concat(location.pathname.split("/").slice(1)[1],".json?t=10s&slug=").concat(location.pathname.split("/").slice(1)[1]),{referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 8:if(200===(p=e.sent).status){e.next=12;break}return chrome.storage.local.set({cmdRes:{alert:"Ted Transcript is not available for the video!"}}),e.abrupt("return");case 12:return e.next=14,p.json();case 14:if(0!=(null==(d=e.sent)||null===(t=d.pageProps)||void 0===t||null===(n=t.transcriptData)||void 0===n||null===(r=n.translation)||void 0===r||null===(o=r.paragraphs)||void 0===o?void 0:o.length)){e.next=18;break}return chrome.storage.local.set({cmdRes:{alert:"Ted Transcript is not available for the video!"}}),e.abrupt("return");case 18:m=[],h=On((null==d||null===(i=d.pageProps)||void 0===i||null===(s=i.transcriptData)||void 0===s||null===(c=s.translation)||void 0===c?void 0:c.paragraphs)||[]);try{for(h.s();!(f=h.n()).done;){y=f.value,v=On(y.cues);try{for(v.s();!(g=v.n()).done;)b=g.value,m.push({startTime:b.time,text:b.text})}catch(e){v.e(e)}finally{v.f()}}}catch(e){h.e(e)}finally{h.f()}for(w in x="",m)x+=m[w].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";return e.abrupt("return",x);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(){return Dn.apply(this,arguments)}function Dn(){return(Dn=t(a().mark((function e(){var t,n,r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="bilibili",n=!1,!(r=this).classList.contains("snipo-loading")){e.next=5;break}return e.abrupt("return");case 5:r.classList.add("snipo-loading"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),r.querySelector(".ytd-item-section-renderer").style.display="flex",r.querySelector(".cource-snipo-notes").style.display="none",o={id:"",title:"",videos:[]},i={id:location.pathname,title:document.querySelector("title").innerText,url:location.protocol+"//"+location.host+location.pathname,lengthSeconds:K(document.querySelector(".player-mobile-control-text.player-mobile-control-text--mini.player-mobile-time-total-text").innerText),channelId:document.querySelector('a[href*="/space/"]').getAttribute("href"),channelTitle:document.querySelector('a[href*="/space/"].bstar-meta-up-follow__nickName').innerText,coverURL:document.querySelector('[property="og:image"]').getAttribute("content")},chrome.runtime.sendMessage({videoData:i,playlistData:o,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:n,type:t},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),r.querySelector(".ytd-item-section-renderer").style.display="none",r.querySelector(".cource-snipo-notes").style.display="block",r.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:t});case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(){return{container:document.querySelector(".interactive__actions"),videos:document.querySelectorAll("video"),integration:"bilibili",icon:"".concat("<style> @keyframes Spinner_module_dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0 } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px } to { stroke-dasharray: 89,200; stroke-dashoffset: -135px } } @keyframes Spinner_module_rotate { to { transform: rotate(1turn) } } </style>").concat('<svg style="margin-right: 8px; cursor: pointer; pointer-events: none; width: 20px; color: #01adef; height: 20px; background: transparent; transition: opacity .1s,transform .25s cubic-bezier(.17,.88,.32,1.28); display: none;" class="ytd-item-section-renderer" data-spinner="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle data-spinner-trace="true" cx="24" cy="24" r="22" stroke="#002333" style="    stroke-width: 4px; background: transparent;    stroke-opacity: 20%; "></circle><circle data-spinner-circle="true" cx="24" cy="24" r="22" stroke="#002333" style=" transform-origin: 50% 50%; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; animation: Spinner_module_rotate 2s linear .25s infinite, Spinner_module_dash 1.5s ease-in-out .25s infinite;     stroke-width: 4px; background: transparent;"></circle></svg>').concat('<svg class="cource-snipo-notes media-icon-share" xmlns="http://www.w3.org/2000/svg" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 26 26" focusable="false" style="floar:right;pointer-events: none;display: inline;"><path fill="#4d93ff" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg>','<span style="padding: 0 8px; display: grid; line-height: 40px; grid-template-columns: 1fr auto; column-gap: 4px; align-items: center; font-size: 12px;">Snipo Notes</span>'),playlistUpdateVideoHandler:(e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){return location.pathname}),(function(){return""}),(function(){return""})),screenHandler:vt((function(){return location.pathname})),transciptHandler:function(){}};var e}function Bn(){return Zn.apply(this,arguments)}function Zn(){return(Zn=t(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Hn(),r=function(e){e.forEach(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(n.container,n.icon),ne(n.videos),e.next=4,n.playlistUpdateVideoHandler();case 4:case"end":return e.stop()}}),e)}))))},!R()){e.next=5;break}return e.next=5,T(1e3);case 5:new MutationObserver(r).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),S("click",".snipo-open-notion",Nn),zn(n.container,n.icon),ne(n.videos),ht(Un({},n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zn(e,t){var n=document.createElement("button");if(n.innerHTML=t,n.classList.add("snipo-open-notion"),n.style="height: 100%; display: flex; align-items: center;margin-left: 8px;margin-left: 8px;",e){for(var r=document.querySelectorAll(".snipo-open-notion"),a=0;a<r.length;a++)r[a].remove();e.insertBefore(n,e.querySelector(".bstar-danmaku-bar"))}}function Fn(){return Gn.apply(this,arguments)}function Gn(){return(Gn=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="bilibili",n=!1,!(r=this).classList.contains("snipo-loading")){e.next=5;break}return e.abrupt("return");case 5:if(0===location.pathname.indexOf("/video/BV")||0===location.pathname.indexOf("/cheese/play")){e.next=7;break}return e.abrupt("return");case 7:if(r.classList.add("snipo-loading"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),r.querySelector(".ytd-item-section-renderer").style.display="flex",r.querySelector(".video-snipo-icon").style.display="none",o={id:"",title:"",videos:[],url:"",coverURL:"",lengthSeconds:0},i="",document.querySelector('[itemprop="author"]')&&(i=document.querySelector('[itemprop="author"]').getAttribute("content")),document.querySelector("p.uname")&&(i=document.querySelector("p.uname").textContent),0!==document.querySelectorAll("#multi_page .list-box li").length)for(o.id=location.pathname,o.url=location.protocol+"//"+location.host+location.pathname,"/"!==o.id.charAt(o.id.length-1)&&(o.id+="/"),o.title=document.querySelectorAll("#multi_page .list-box li .part")[0].textContent,s=0;s<document.querySelectorAll("#multi_page .list-box li").length;s++)o.videos.push({id:document.querySelectorAll("#multi_page .list-box li a")[s].href.replace("https://www.bilibili.com",""),title:document.querySelectorAll("#multi_page .list-box li .part")[s].textContent,lengthSeconds:K(document.querySelectorAll("#multi_page .list-box li .duration")[s].textContent)+""||"0",url:document.querySelectorAll("#multi_page .list-box li a")[s].href,chapterTitle:i}),o.lengthSeconds+=parseInt(K(document.querySelectorAll("#multi_page .list-box li .duration")[s].textContent)+""||"0");o.lengthSeconds=o.lengthSeconds+"",c=new URL(location.href).searchParams,"/"!==(l=location.pathname).charAt(l.length-1)&&(l+="/"),null!==c.get("p")?(l=l.slice(0,-1),l+="?p="+c.get("p")):0!==document.querySelectorAll("#multi_page .list-box li").length&&(l=l.slice(0,-1),l+="?p=1"),u={id:l,title:document.querySelector("title").innerText,url:location.protocol+"//"+location.host+location.pathname,lengthSeconds:K(document.querySelector(".bpx-player-ctrl-time-duration").innerText),channelId:document.querySelector(".up-avatar, .publisher-pic-card img").getAttribute("href"),channelTitle:i},document.querySelector('[property="og:image"]')&&(0===(p=document.querySelector('[property="og:image"]').getAttribute("content").split("@")[0]).indexOf("//")&&(p="https:"+p),u.coverURL=p,o.coverURL=p),chrome.runtime.sendMessage({videoData:u,playlistData:o,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:n,type:t},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),r.querySelector(".ytd-item-section-renderer").style.display="none",r.querySelector(".video-snipo-icon").style.display="block",r.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:t});case 25:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qn(){return{container:document.querySelector(".video-toolbar-left"),videos:document.querySelectorAll("video"),integration:"bilibili",icon:'<div class="video-share-wrap video-toolbar-left-item">'.concat("<style> @keyframes Spinner_module_dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0 } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px } to { stroke-dasharray: 89,200; stroke-dashoffset: -135px } } @keyframes Spinner_module_rotate { to { transform: rotate(1turn) } } </style>").concat('<svg style="margin-right: 8px; cursor: pointer; pointer-events: none; width: 20px; color: #01adef; height: 20px; background: transparent; transition: opacity .1s,transform .25s cubic-bezier(.17,.88,.32,1.28); display: none;" class="ytd-item-section-renderer video-toolbar-item-icon" data-spinner="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle data-spinner-trace="true" cx="24" cy="24" r="22" stroke="#002333" style="    stroke-width: 4px; background: transparent;    stroke-opacity: 20%; "></circle><circle data-spinner-circle="true" cx="24" cy="24" r="22" stroke="#002333" style=" transform-origin: 50% 50%; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; animation: Spinner_module_rotate 2s linear .25s infinite, Spinner_module_dash 1.5s ease-in-out .25s infinite;     stroke-width: 4px; background: transparent;"></circle></svg>','<span> <div id="share-btn-outer" class="video-share van-popover__reference" style=" display: flex; align-items: center; "><svg class="video-snipo-icon video-toolbar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" height="28" width="28"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg><div class="video-share-info video-toolbar-item-text" style=" position: relative; width: 90px; height: 28px; line-height: 28px; overflow: hidden; text-overflow: ellipsis; word-break: break-word; white-space: nowrap; "><span class=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Snipo Notes</font></font></font></font></span></div></div></span></div>'),playlistUpdateVideoHandler:(e=t(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn(document.querySelector(".video-toolbar-left"),'<div class="video-share-wrap video-toolbar-left-item">'.concat("<style> @keyframes Spinner_module_dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0 } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px } to { stroke-dasharray: 89,200; stroke-dashoffset: -135px } } @keyframes Spinner_module_rotate { to { transform: rotate(1turn) } } </style>").concat('<svg style="margin-right: 8px; cursor: pointer; pointer-events: none; width: 20px; color: #01adef; height: 20px; background: transparent; transition: opacity .1s,transform .25s cubic-bezier(.17,.88,.32,1.28); display: none;" class="ytd-item-section-renderer video-toolbar-item-icon" data-spinner="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle data-spinner-trace="true" cx="24" cy="24" r="22" stroke="#002333" style="    stroke-width: 4px; background: transparent;    stroke-opacity: 20%; "></circle><circle data-spinner-circle="true" cx="24" cy="24" r="22" stroke="#002333" style=" transform-origin: 50% 50%; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; animation: Spinner_module_rotate 2s linear .25s infinite, Spinner_module_dash 1.5s ease-in-out .25s infinite;     stroke-width: 4px; background: transparent;"></circle></svg>','<span> <div id="share-btn-outer" class="video-share van-popover__reference" style=" display: flex; align-items: center; "><svg class="video-snipo-icon video-toolbar-item-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" height="28" width="28"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg><div class="video-share-info video-toolbar-item-text" style=" position: relative; width: 90px; height: 28px; line-height: 28px; overflow: hidden; text-overflow: ellipsis; word-break: break-word; white-space: nowrap; "><span class=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Snipo Notes</font></font></font></font></span></div></div></span></div>')),e.next=3,J({cmd:"notion-is-open"});case 3:if(e.sent.status){e.next=6;break}return e.abrupt("return");case 6:if(-1!==location.pathname.indexOf("/video/")){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,N(["active_playlist","active_playlist_video"]);case 10:if(t=e.sent,"/"!==(n=location.pathname).charAt(n.length-1)&&(n+="/"),r=new URL(location.href).searchParams,"/"!==(o=location.pathname).charAt(o.length-1)&&(o+="/"),null!==r.get("p")?(o=o.slice(0,-1),o+="?p="+r.get("p")):0!==document.querySelectorAll("#multi_page .list-box li").length&&(o=o.slice(0,-1),o+="?p=1"),0!==document.querySelectorAll("#multi_page .list-box li").length){e.next=19;break}return e.abrupt("return");case 19:n===t.active_playlist&&o!=t.active_playlist_video&&(document.querySelector(".snipo-open-notion").classList.add("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").click());case 20:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){return location.pathname}),(function(){return""}),(function(){return""})),screenHandler:vt((function(){return location.pathname})),transciptHandler:function(){}};var e}function Xn(){return Yn.apply(this,arguments)}function Yn(){return(Yn=t(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Qn(),r=function(e){e.forEach(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(1e3);case 2:return Kn(n.container,n.icon),ne(n.videos),e.next=6,n.playlistUpdateVideoHandler();case 6:case"end":return e.stop()}}),e)}))))},!R()){e.next=5;break}return e.next=5,T(1e3);case 5:return new MutationObserver(r).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),S("click",".snipo-open-notion",Fn),e.next=9,T(1e3);case 9:Kn(n.container,n.icon),ne(n.videos),ht(Jn({},n));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kn(e,t){var n=document.createElement("div");if(n.innerHTML=t,n.classList.add("snipo-open-notion"),e){for(var r=document.querySelectorAll(".snipo-open-notion"),a=0;a<r.length;a++)r[a].remove();if(0!==location.pathname.indexOf("/video/BV")&&0!==location.pathname.indexOf("/cheese/play"))return;e.appendChild(n)}if(document.querySelector(".layout-l.flex-align-center")){n.innerHTML="<div>".concat("<style> @keyframes Spinner_module_dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0 } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px } to { stroke-dasharray: 89,200; stroke-dashoffset: -135px } } @keyframes Spinner_module_rotate { to { transform: rotate(1turn) } } </style>",'<span> \n\t\t<div style=" display: flex; align-items: center; ">').concat('<svg style="margin-right: 8px; cursor: pointer; pointer-events: none; width: 20px; color: #01adef; height: 20px; background: transparent; transition: opacity .1s,transform .25s cubic-bezier(.17,.88,.32,1.28); display: none;" class="ytd-item-section-renderer video-toolbar-item-icon" data-spinner="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle data-spinner-trace="true" cx="24" cy="24" r="22" stroke="#002333" style="    stroke-width: 4px; background: transparent;    stroke-opacity: 20%; "></circle><circle data-spinner-circle="true" cx="24" cy="24" r="22" stroke="#002333" style=" transform-origin: 50% 50%; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; animation: Spinner_module_rotate 2s linear .25s infinite, Spinner_module_dash 1.5s ease-in-out .25s infinite;     stroke-width: 4px; background: transparent;"></circle></svg>','<svg class="video-snipo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" height="28" width="28"><path fill="#61666d" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg><div class="video-share-info video-toolbar-item-text" style=" position: relative; width: 90px; height: 28px; line-height: 28px; overflow: hidden; text-overflow: ellipsis; word-break: break-word; white-space: nowrap; "><p style="cursor:pointer; white-space: nowrap;color: #505050;font-size: 13px;line-height: 18px;display: inline-block;margin-left: 6px;font-weight: 500;transition: color .5s ease-in-out;">Snipo Notes</p></div></div></span></div>');for(var o=document.querySelectorAll(".snipo-open-notion"),i=0;i<o.length;i++)o[i].remove();if(0!==location.pathname.indexOf("/video/BV")&&0!==location.pathname.indexOf("/cheese/play"))return;document.querySelector(".layout-l.flex-align-center").appendChild(n)}}function $n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tr(){return nr.apply(this,arguments)}function nr(){return(nr=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d,m,h,f,y,v,g,b,x,w,k,S,_,T,O,E,q,R,I,A;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="coursera",!(n=this).classList.contains("snipo-loading")){e.next=4;break}return e.abrupt("return");case 4:if(n.classList.add("snipo-loading"),r=document.querySelector(".snipo-open-notion").classList.contains("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),n.querySelector(".ytd-item-section-renderer").style.display="inline",n.querySelector(".cource-snipo-notes").style.display="none",0===location.pathname.indexOf("/learn/")){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,fetch("https://www.coursera.org/api/onDemandCourseMaterials.v2/?q=slug&slug=".concat(location.pathname.split("/")[2],"&includes=name%2Cmodules%2Clessons%2CpassableItemGroups%2CpassableItemGroupChoices%2CpassableLessonElements%2Citems%2Ctracks%2CgradePolicy%2CgradingParameters%2CembeddedContentMapping&fields=moduleIds%2ConDemandCourseMaterialModules.v1(name%2Cslug%2Cdescription%2CtimeCommitment%2ClessonIds%2Coptional%2ClearningObjectives)%2ConDemandCourseMaterialLessons.v1(name%2Cslug%2CtimeCommitment%2CelementIds%2Coptional%2CtrackId)%2ConDemandCourseMaterialPassableItemGroups.v1(requiredPassedCount%2CpassableItemGroupChoiceIds%2CtrackId)%2ConDemandCourseMaterialPassableItemGroupChoices.v1(name%2Cdescription%2CitemIds)%2ConDemandCourseMaterialPassableLessonElements.v1(gradingWeight%2CisRequiredForPassing)%2ConDemandCourseMaterialItems.v2(name%2Cslug%2CtimeCommitment%2CcontentSummary%2CisLocked%2ClockableByItem%2CitemLockedReasonCode%2CtrackId%2ClockedStatus%2CitemLockSummary)%2ConDemandCourseMaterialTracks.v1(passablesCount)%2ConDemandGradingParameters.v1(gradedAssignmentGroups)%2CcontentAtomRelations.v1(embeddedContentSourceCourseId%2CsubContainerId)&showLockedItems=true"),{headers:{accept:"*/*","accept-language":"en","x-coursera-application":"ondemand","x-coursera-version":"151ac06f00409d5d1dd439edd1a502f6268081eb","x-requested-with":"XMLHttpRequest"},referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 13:return o=e.sent,e.next=16,o.json();case 16:return i=e.sent,activeTranscriptApiParams=i.elements[0].id,e.next=20,fetch("https://www.coursera.org/api/onDemandCourses.v1/?q=slug&slug=".concat(location.pathname.split("/")[2],"&brandingImage%2Cid%2Cname%2CoverridePartnerLogos%2CpartnerIds&includes=partnerIds"),{headers:{accept:"*/*","accept-language":"en","x-coursera-application":"ondemand","x-coursera-version":"151ac06f00409d5d1dd439edd1a502f6268081eb","x-requested-with":"XMLHttpRequest"},referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"});case 20:return s=e.sent,e.next=23,s.json();case 23:c=e.sent,activeTranscriptApiParams=i.elements[0].id,l={elements:[],courseCoverUrl:"https://s3.amazonaws.com/coursera_assets/meta_images/generated/XDP/XDP~COURSE!~".concat(location.pathname.split("/")[2],"/XDP~COURSE!~").concat(location.pathname.split("/")[2],".jpeg"),courseTitle:document.querySelector(".cds-breadcrumbs-listItem").textContent,courseID:location.pathname.split("/")[2]},u={id:l.courseID,title:c.elements[0].name,url:"https://www.coursera.org/learn/"+location.pathname.split("/")[2],coverURL:l.courseCoverUrl,videos:[],lengthSeconds:0},p={},d={},m=$n(i.linked["onDemandCourseMaterialLessons.v1"]);try{for(m.s();!(h=m.n()).done;)f=h.value,d[f.id]=f}catch(e){m.e(e)}finally{m.f()}y={},v=$n(i.linked["onDemandCourseMaterialItems.v2"]);try{for(v.s();!(g=v.n()).done;)b=g.value,y[b.id]=b}catch(e){v.e(e)}finally{v.f()}x=$n(i.linked["onDemandCourseMaterialModules.v1"]),e.prev=35,x.s();case 37:if((w=x.n()).done){e.next=81;break}k=w.value,S=k.name,_=$n(k.lessonIds),e.prev=41,_.s();case 43:if((T=_.n()).done){e.next=71;break}if((O=T.value)in d){e.next=47;break}return e.abrupt("break",71);case 47:E=$n(d[O].itemIds),e.prev=48,E.s();case 50:if((q=E.n()).done){e.next=61;break}if((R=q.value)in y){e.next=54;break}return e.abrupt("break",61);case 54:I=y[R],A="https://www.coursera.org/learn/"+location.pathname.split("/")[2]+"/"+I.contentSummary.typeName.replace("ungraded","").replace("graded","").toLowerCase()+"/"+I.id+"/"+I.slug,u.videos.push({id:location.pathname.split("/")[2]+"/"+I.contentSummary.typeName.replace("ungraded","").replace("graded","").toLowerCase()+"/"+I.id+"/"+I.slug,title:I.name,lengthSeconds:I.timeCommitment/1e3+""||"0",sequential:d[O].name,chapter:S,url:A}),u.lengthSeconds+=parseInt(I.timeCommitment/1e3+""||"0"),I.id+"/"+I.slug===location.pathname.split("/").slice(-2).join("/")&&(p={id:location.pathname.split("/")[2]+"/"+I.contentSummary.typeName.replace("ungraded","").replace("graded","").toLowerCase()+"/"+I.id+"/"+I.slug,title:I.name,lengthSeconds:I.timeCommitment/1e3+""||"0",sequential:d[O].name,chapter:S,url:A});case 59:e.next=50;break;case 61:e.next=66;break;case 63:e.prev=63,e.t0=e.catch(48),E.e(e.t0);case 66:return e.prev=66,E.f(),e.finish(66);case 69:e.next=43;break;case 71:e.next=76;break;case 73:e.prev=73,e.t1=e.catch(41),_.e(e.t1);case 76:return e.prev=76,_.f(),e.finish(76);case 79:e.next=37;break;case 81:e.next=86;break;case 83:e.prev=83,e.t2=e.catch(35),x.e(e.t2);case 86:return e.prev=86,x.f(),e.finish(86);case 89:u.lengthSeconds=u.lengthSeconds+"",chrome.runtime.sendMessage({videoData:p,playlistData:u,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:r,type:t},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),n.querySelector(".ytd-item-section-renderer").style.display="none",n.querySelector(".cource-snipo-notes").style.display="inline",n.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:t});case 92:case"end":return e.stop()}}),e,this,[[35,83,86,89],[41,73,76,79],[48,63,66,69]])})))).apply(this,arguments)}function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function or(){return{container:function(){return document.querySelector(".rc-PreviousAndNextItem")},videos:document.querySelectorAll("video"),integration:"coursera",icon:'<div style="display: inline-flex;">'.concat("<style> @keyframes Spinner_module_dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0 } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35px } to { stroke-dasharray: 89,200; stroke-dashoffset: -135px } } @keyframes Spinner_module_rotate { to { transform: rotate(1turn) } } </style>").concat('<svg style="margin-right: 8px; cursor: pointer; pointer-events: none; width: 20px; color: #01adef; height: 20px; background: transparent; transition: opacity .1s,transform .25s cubic-bezier(.17,.88,.32,1.28); display: none;" class="ytd-item-section-renderer" data-spinner="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle data-spinner-trace="true" cx="24" cy="24" r="22" stroke="#002333" style="    stroke-width: 4px; background: transparent;    stroke-opacity: 20%; "></circle><circle data-spinner-circle="true" cx="24" cy="24" r="22" stroke="#002333" style=" transform-origin: 50% 50%; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; animation: Spinner_module_rotate 2s linear .25s infinite, Spinner_module_dash 1.5s ease-in-out .25s infinite;     stroke-width: 4px; background: transparent;"></circle></svg>','<svg class="cource-snipo-notes" xmlns="http://www.w3.org/2000/svg" width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 26 26" focusable="false" style="pointer-events: none;display: inline;width: 20px;height: 20px;margin-right: 8px;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg>Snipo Notes</div>'),playlistUpdateVideoHandler:(e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({cmd:"notion-is-open"});case 2:if(e.sent.status){e.next=5;break}return e.abrupt("return");case 5:if(-1!==location.pathname.indexOf("/learn/")){e.next=7;break}return e.abrupt("return");case 7:document.querySelector(".snipo-open-notion").classList.add("snipo-reload-playlist"),document.querySelector(".snipo-open-notion").click();case 9:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){return location.pathname.split("/").slice(-4).join("/")}),(function(){return location.pathname.split("/")[2]}),(function(){return location.pathname.split("/").slice(-3).join("/")})),screenHandler:gt((function(){return location.pathname.split("/").slice(-4).join("/")})),transciptHandler:lr};var e}function ir(){return sr.apply(this,arguments)}function sr(){return(sr=t(a().mark((function e(){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=or(),r=function(e){e.forEach(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cr(n.container(),n.icon),e.next=3,n.playlistUpdateVideoHandler();case 3:return e.next=5,T(2e3);case 5:document.querySelector("video")&&document.querySelector("video").dataset.snipoInit&&delete document.querySelector("video").dataset.snipoInit,ne(n.videos);case 7:case"end":return e.stop()}}),e)}))))},!R()){e.next=5;break}return e.next=5,T(1e3);case 5:if(new MutationObserver(r).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),S("click",".snipo-open-notion",tr),cr(n.container(),n.icon),ht(ar({},n)),!(o=new URL(location.href)).searchParams.get("t")&&!o.searchParams.get("v")){e.next=18;break}return e.next=13,T(1e3);case 13:return document.querySelector('.session-item [data-rank="'+o.searchParams.get("v").split("/").slice(-1)[0]+'"]').click(),e.next=16,T(1e3);case 16:document.querySelector("video").play(),document.querySelector("video").currentTime=o.searchParams.get("t").replace("s","");case 18:return e.next=20,T(2e3);case 20:ne(n.videos);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t){var n=document.createElement("div");if(n.innerHTML=t,n.classList.add("snipo-open-notion"),n.style="display: inline-flex; vertical-align: middle; cursor: pointer;color: var(--cds-color-interactive-primary);font: var(--cds-typography-title4);height: 36px;padding: var(--cds-spacing-100);margin: 0px var(--cds-spacing-100);",e){for(var r=document.querySelectorAll(".snipo-open-notion"),a=0;a<r.length;a++)r[a].remove();e.insertBefore(n,e.querySelector("a"))}}function lr(e,t,n){return ur.apply(this,arguments)}function ur(){return(ur=t(a().mark((function e(t,n,r){var o,i,s,c,l,u,p,d,m,h,f,y,v,b,x,w,k,S;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new URL(location.href)).searchParams.delete("t"),o.searchParams.delete("list"),o.searchParams.delete("v"),o.hash="",i=parseInt(parseFloat(t).toFixed(0)),s=i-1,c=i+(n.action.newValue.seconds||30),"Last"===n.action.newValue.directionOfRange&&(s=i-(n.action.newValue.seconds||30),c=i),"Between"===n.action.newValue.directionOfRange&&(s=i-n.action.newValue.beforeSeconds,c=i+n.action.newValue.afterSeconds),e.next=12,fetch("https://www.coursera.org/api/onDemandLectureVideos.v1/".concat(JSON.parse(document.querySelector(".cds-breadcrumbs-listItem a").dataset.clickValue).course_id,"~").concat(location.pathname.split("/").slice(-2,-1)[0],"?includes=video&fields=onDemandVideos.v1(sources%2Csubtitles%2CsubtitlesVtt%2CsubtitlesTxt%2CsubtitlesAssetTags)"));case 12:if(200===(l=e.sent).status){e.next=16;break}return chrome.storage.local.set({cmdRes:{alert:"Coursera Transcript is not available for the video!"}}),e.abrupt("return");case 16:return e.next=18,l.json();case 18:return u=e.sent,e.next=21,fetch(null==u?void 0:u.linked["onDemandVideos.v1"][0].subtitlesVtt.en);case 21:return p=e.sent,e.next=24,p.text();case 24:if(d=e.sent,m=new mt.WebVTTParser,h=m.parse(d,"metadata"),activeTranscriptCodes=h.cues,0!=activeTranscriptCodes.length){e.next=38;break}return e.next=31,fetch(u.asset.captions[0].url);case 31:return f=e.sent,e.next=34,f.text();case 34:y=e.sent,v=new mt.WebVTTParser,b=v.parse(y,"metadata"),activeTranscriptCodes=b.cues;case 38:for(S in x=activeTranscriptCodes.filter((function(e){return s<=e.startTime&&e.endTime<=c})),w=0,k="",x)0===w&&(w=x[S].startTime),k+=x[S].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";if(""!==k.trim()){e.next=45;break}return alert("The transcript is not available for the part"),e.abrupt("return");case 45:return chrome.storage.local.set({cmdRes:{transcriptText:k,link:o.href,startTime:w,playlistId:location.pathname.split("/")[2],videoId:location.pathname.split("/").slice(-3).join("/")}}),e.next=48,g({time:i.toString(),action:"transcript",contentId:location.pathname.split("/").slice(-4).join("/")},r);case 48:app.analytics.track("notion_transcript");case 49:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(){return dr.apply(this,arguments)}function dr(){return(dr=t(a().mark((function e(){var t,n,r,o,i,s,c,l,u,p,d,m,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.documentElement.querySelector("video")){e.next=2;break}return e.abrupt("return");case 2:return(t=new URL(location.href)).searchParams.delete("t"),t.searchParams.delete("list"),t.searchParams.delete("v"),t.hash="",e.next=9,fetch("https://www.coursera.org/api/onDemandLectureVideos.v1/".concat(JSON.parse(document.querySelector(".cds-breadcrumbs-listItem a").dataset.clickValue).course_id,"~").concat(location.pathname.split("/").slice(-2,-1)[0],"?includes=video&fields=onDemandVideos.v1(sources%2Csubtitles%2CsubtitlesVtt%2CsubtitlesTxt%2CsubtitlesAssetTags)"));case 9:if(200===(n=e.sent).status){e.next=13;break}return chrome.storage.local.set({cmdRes:{alert:"Coursera Transcript is not available for the video!"}}),e.abrupt("return");case 13:return e.next=15,n.json();case 15:return r=e.sent,e.next=18,fetch(null==r?void 0:r.linked["onDemandVideos.v1"][0].subtitlesVtt.en);case 18:return o=e.sent,e.next=21,o.text();case 21:if(i=e.sent,s=new mt.WebVTTParser,c=s.parse(i,"metadata"),activeTranscriptCodes=c.cues,0!=activeTranscriptCodes.length){e.next=35;break}return e.next=28,fetch(r.asset.captions[0].url);case 28:return l=e.sent,e.next=31,l.text();case 31:u=e.sent,p=new mt.WebVTTParser,d=p.parse(u,"metadata"),activeTranscriptCodes=d.cues;case 35:for(h in m="",activeTranscriptCodes)m+=activeTranscriptCodes[h].text.replaceAll("\n\n"," ").replaceAll("\n"," ")+" ";return e.abrupt("return",m);case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mr(){return hr.apply(this,arguments)}function hr(){return(hr=t(a().mark((function e(){var t,n,r,o,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="rumble",n=!1,!(r=this).classList.contains("snipo-loading")){e.next=5;break}return e.abrupt("return");case 5:r.classList.add("snipo-loading"),document.querySelector(".snipo-open-notion").classList.remove("snipo-reload-playlist"),r.querySelector(".ytd-item-section-renderer").style.display="flex",r.querySelector(".cource-snipo-notes").style.display="none",o={id:"",title:"",videos:[]},i="";try{s=JSON.parse(document.querySelector('[type="application/ld+json"]').textContent)[0].duration,i=parseInt(s.slice(8,10))+60*parseInt(s.slice(5,7))+60*parseInt(s.slice(2,4))*60+""}catch(e){console.log(e)}c={id:location.pathname,title:document.querySelector("title").innerText,url:location.protocol+"//"+location.host+location.pathname,lengthSeconds:i,channelId:document.querySelector('a[href^="/c/"]').getAttribute("href"),channelTitle:document.querySelector('a[href^="/c/"] .media-heading-name').innerText,coverURL:document.querySelector('[property="og:image"]').getAttribute("content")},chrome.runtime.sendMessage({videoData:c,playlistData:o,cmd:"open-notion-page",width:window.screen.availWidth,height:window.screen.availHeight,autoReload:n,type:t},(function(e){"error"in e&&"payment"!==e.error&&alert(e.error),r.querySelector(".ytd-item-section-renderer").style.display="none",r.querySelector(".cource-snipo-notes").style.display="block",r.classList.remove("snipo-loading")})),app.analytics.track("open_notion",{type:t});case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vr(){return{container:document.querySelector(".media-by-actions-container"),videos:document.querySelectorAll("video"),integration:"rumble",icon:"".concat('<div class="ytd-item-section-renderer loading-spinner" style="display: none; width: 4px; height: 4px; "></div>').concat('<svg class="cource-snipo-notes media-icon-share" xmlns="http://www.w3.org/2000/svg" width="16" height="16" preserveAspectRatio="xMidYMid meet" viewBox="0 0 22 22" focusable="false" style="floar:right;pointer-events: none;display: inline;"><path fill="currentColor" d="M5.25 3A2.25 2.25 0 0 0 3 5.25v13.499a2.25 2.25 0 0 0 2.25 2.25h5.914l.356-1.424l.02-.076H5.25a.75.75 0 0 1-.75-.75v-13.5a.75.75 0 0 1 .75-.75h13.499a.75.75 0 0 1 .75.75v5.983c.478-.19.993-.264 1.5-.22V5.25A2.25 2.25 0 0 0 18.748 3h-13.5Zm10.104 11.999h-4.105a.75.75 0 1 0 0 1.5h2.605l1.5-1.5Zm-6.605-6.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm2.5-.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5Zm0 3.75a.75.75 0 1 0 0 1.5h5.5a.75.75 0 1 0 0-1.5h-5.5ZM7.75 13a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm1 2.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm10.35-3.08l-5.902 5.901a2.685 2.685 0 0 0-.707 1.248l-.457 1.83c-.2.797.522 1.518 1.318 1.319l1.83-.458a2.685 2.685 0 0 0 1.248-.706l5.9-5.904a2.286 2.286 0 0 0-3.233-3.232Z"></path></svg>',"Snipo Notes"),playlistUpdateVideoHandler:(e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),timeHandler:yt((function(){return location.pathname}),(function(){return""}),(function(){return""})),screenHandler:vt((function(){return location.pathname})),transciptHandler:function(){}};var e}function gr(){return br.apply(this,arguments)}function br(){return(br=t(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=vr(),r=function(e){e.forEach(t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xr(n.container,n.icon),ne(n.videos),e.next=4,n.playlistUpdateVideoHandler();case 4:case"end":return e.stop()}}),e)}))))},!R()){e.next=5;break}return e.next=5,T(1e3);case 5:new MutationObserver(r).observe(document.querySelector("head > title")||document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),S("click",".snipo-open-notion",mr),xr(n.container,n.icon),ne(n.videos),ht(yr({},n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t){var n=document.createElement("button");if(n.innerHTML=t,n.classList.add("round-button","media-by-actions-button","media-engage-snipo","snipo-open-notion"),e){for(var r=document.querySelectorAll(".snipo-open-notion"),a=0;a<r.length;a++)r[a].remove();e.appendChild(n)}}var wr="https://api.mixpanel.com",kr="undefined"!=typeof window?window.app=window.app||{}:self.app=self.app||{},Sr={};kr.analytics={init:function(e,t,n){Sr.token=e,Sr.distinct_id=t;var r=0,a=0;try{r=parseInt(((new Date).getTime()-parseInt(n))/1e3/2592e3),a=parseInt(((new Date).getTime()-parseInt(n))/1e3/31104e3)}catch(e){console.log(e)}Sr.mAge=r,Sr.yAge=a},track:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=chrome.runtime.getManifest(),a=r&&r.version?r.version:"none",o={distinct_id:Sr.distinct_id,token:Sr.token,mage:Sr.mAge,yage:Sr.yAge,version_id:a,browser:O()},i={event:e,properties:Object.assign(o,t)},s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c=wr+"/track?data="+s;return R()||!1!==n||chrome.runtime.sendMessage({cmd:"mixpanel_request",url:c},(function(){})),c}};const _r=kr;function Tr(e){return Or.apply(this,arguments)}function Or(){return(Or=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=document.querySelector(t);r?e(r):new MutationObserver((function(n,r){Array.from(document.querySelectorAll(t)).forEach((function(t){e(t),r.disconnect()}))})).observe(document.querySelector("html"),{attributes:!0})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(){return qr.apply(this,arguments)}function qr(){return qr=t(a().mark((function e(){var n,r,o,i,s,c,l,u,p,d,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){return(l=t(a().mark((function e(t){var n,r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("www.youtube.com"!==location.host||!location.href.match(/watch\?/)){e.next=13;break}if(!R()){e.next=9;break}return document.querySelector("html[snipo-transcript-response-flashcards]")&&document.querySelector("html[snipo-transcript-response-flashcards]").removeAttribute("snipo-transcript-response-flashcards"),e.next=5,we(t);case 5:return e.next=7,Tr("html[snipo-transcript-response-flashcards]");case 7:return n=JSON.parse(document.querySelector("html").getAttribute("snipo-transcript-response-flashcards")),e.abrupt("return",{text:n.transcriptText});case 9:return e.next=11,we(t);case 11:return e.t0=e.sent,e.abrupt("return",{text:e.t0});case 13:if(!(location.host.indexOf(".udemy.com")>-1&&-1!==location.pathname.indexOf("/course"))){e.next=18;break}return e.next=16,At();case 16:return e.t1=e.sent,e.abrupt("return",{text:e.t1});case 18:if(!(location.host.indexOf(".ted.com")>-1&&-1!==location.pathname.indexOf("/talks"))){e.next=23;break}return e.next=21,jn();case 21:return e.t2=e.sent,e.abrupt("return",{text:e.t2});case 23:if(!(location.host.indexOf("vimeo.com")>-1)){e.next=28;break}return e.next=26,kn();case 26:return e.t3=e.sent,e.abrupt("return",{text:e.t3});case 28:if(!(location.host.indexOf(".skillshare.com")>-1)){e.next=33;break}return e.next=31,ln();case 31:return e.t4=e.sent,e.abrupt("return",{text:e.t4});case 33:if(!(location.host.indexOf(".linkedin.com")>-1)){e.next=38;break}return e.next=36,Gt();case 36:return e.t5=e.sent,e.abrupt("return",{text:e.t5});case 38:if(!(location.host.indexOf(".coursera.org")>-1)){e.next=43;break}return e.next=41,pr();case 41:return e.t6=e.sent,e.abrupt("return",{text:e.t6});case 43:if(!window.location.href.includes("docs.google.com/document")){e.next=47;break}return r="",Array.from(document.getElementsByTagName("script")).map((function(e){var t=e.innerText;try{t.includes("DOCS_modelChunk ")&&(t=(t=t.split('"s":"')[1].trim()).split('"},{"')[0].trim(),r+=" "+t.replace(/(\r\n|\n|\r)/gm,""))}catch(e){console.log("Failed to get google docs text")}})),e.abrupt("return",{text:r});case 47:return o=Array.from(document.getElementsByTagName("article")).map((function(e){return e.innerText})),i="",o&&o.length>0&&(i=o[0],o.map((function(e){e.length>i.length&&(i=e)}))),(!o||0===o.length||i.length<300)&&(s=Array.from(document.getElementsByTagName("body")).map((function(e){return e.innerText})),i=s[0]),e.abrupt("return",{text:i});case 51:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e){return l.apply(this,arguments)},s=function(){document.querySelector(".snipo-open-notion").click()},i=function(){return(i=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("take-notes"!==t.cmd){e.next=2;break}return e.abrupt("return",s());case 2:if("generate-flash-cards"!==t.cmd){e.next=6;break}return e.next=5,c(t.paidUser);case 5:return e.abrupt("return",e.sent);case 6:if("ping"!==t.cmd){e.next=8;break}return e.abrupt("return",{status:"pong"});case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(e){return i.apply(this,arguments)},document.querySelector("video")&&((n=document.createElement("div")).innerHTML="",n.classList.add("snipo-open-notion")),r="https://oauth.snipo.io".replace("http://","").replace("https://",""),chrome.runtime.onMessage.addListener((function(e,t,n){return o(e).then(n),!0})),e.next=10,H(["install_date","uuid"]);case 10:u=e.sent,_r.analytics.init("e4c9b5b21e2fa0e9f7d70f28548f6391","uuid"in u?u.uuid:"unknown","install_date"in u?u.install_date:(new Date).getTime()),p=0,d=[".edx.org",".pluralsight.com",".futurelearn.com","study.com","explore.skillbuilder.aws",".udacity.com",".masterclass.com",".khanacademy.org","classcentral.com",".datacamp.com",".bitdegree.org","alison.com",".bitchute.com","kajabi.com",".dailymotion.com",".odysee.com"];case 14:if(!(p<d.length)){e.next=22;break}if(m=d[p],!(location.host.indexOf(m)>-1)){e.next=19;break}return L(),e.abrupt("return");case 19:p++,e.next=14;break;case 22:if("www.youtube.com"===location.host||"www.notion.so"===location.host||-1!==location.host.indexOf(".udemy.com")||-1!==location.host.indexOf(".coursera.org")||"www.linkedin.com"===location.host||"www.skillshare.com"===location.host||"www.ted.com"===location.host||"vimeo.com"===location.host||"rumble.com"===location.host||"www.bilibili.tv"===location.host||"www.bilibili.com"===location.host||location.host===r){e.next=24;break}return e.abrupt("return");case 24:if("www.notion.so"!==location.host){e.next=29;break}return e.next=27,Re();case 27:return _r.analytics.track("open",{type:"notion"}),e.abrupt("return");case 29:if(location.host!==r){e.next=34;break}return e.next=32,Ne();case 32:return _r.analytics.track("open",{type:"snipo"}),e.abrupt("return");case 34:if("www.youtube.com"!==location.host){e.next=45;break}return document.querySelector("html")&&document.querySelector("html").setAttribute("snipo",1),R()&&P("/build/yt.js"),e.next=39,Ke();case 39:return e.next=41,tt();case 41:return e.next=43,it();case 43:return _r.analytics.track("open",{type:"youtube"}),e.abrupt("return");case 45:if(!(location.host.indexOf(".udemy.com")>-1)){e.next=50;break}return e.next=48,_t();case 48:return _r.analytics.track("open",{type:"udemy",host:location.host}),e.abrupt("return");case 50:if(!(location.host.indexOf(".coursera.org")>-1)){e.next=55;break}return e.next=53,ir();case 53:return _r.analytics.track("open",{type:"coursera",host:location.host}),e.abrupt("return");case 55:if("www.linkedin.com"!==location.host||0!==location.pathname.indexOf("/learning")){e.next=60;break}return e.next=58,Bt();case 58:return _r.analytics.track("open",{type:"linkedin"}),e.abrupt("return");case 60:if("www.skillshare.com"!==location.host){e.next=65;break}return e.next=63,rn();case 63:return _r.analytics.track("open",{type:"skillshare"}),e.abrupt("return");case 65:if("www.ted.com"!==location.host){e.next=70;break}return e.next=68,An();case 68:return _r.analytics.track("open",{type:"ted"}),e.abrupt("return");case 70:if("vimeo.com"!==location.host){e.next=75;break}return e.next=73,gn();case 73:return _r.analytics.track("open",{type:"vimeo"}),e.abrupt("return");case 75:if("rumble.com"!==location.host){e.next=80;break}return e.next=78,gr();case 78:return _r.analytics.track("open",{type:"rumble"}),e.abrupt("return");case 80:if("www.bilibili.tv"!==location.host){e.next=85;break}return e.next=83,Bn();case 83:return _r.analytics.track("open",{type:"bilibili"}),e.abrupt("return");case 85:if("www.bilibili.com"!==location.host){e.next=90;break}return e.next=88,Xn();case 88:return _r.analytics.track("open",{type:"bilibili"}),e.abrupt("return");case 90:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}ytcfg=window.ytcfg=window.ytcfg||{},activeTranscriptApiParams=window.activeTranscriptApiParams=window.activeTranscriptApiParams||"",activeTranscriptCodes=window.activeTranscriptCodes=window.activeTranscriptCodes||[],activeCodesData=window.activeCodesData=window.activeCodesData||{},activeCreateBackstagePostParams=window.activeCreateBackstagePostParams=window.activeCreateBackstagePostParams||"",timerRecordIndicator=window.timerRecordIndicator=window.timerRecordIndicator||null,startRangeRecord=window.startRangeRecord=window.startRangeRecord||0,"loading"!==document.readyState&&I()?Er():document.addEventListener("readystatechange",function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"==t.target.readyState){e.next=2;break}return e.abrupt("return");case 2:Er();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})()})();